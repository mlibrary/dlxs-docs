<?xml version="1.0"?>

<!-- SPO Editorial Services                  -->
<!-- automatically-generated XML header file -->

<?xml-stylesheet href="../../pre11-dlxsdocs.xsl" type="text/xsl"?>
<!DOCTYPE DLPSDOC PUBLIC "-//UM-DLPS//DTD DLPS Publications//EN" "http://docs.umdl.umich.edu/dlps/docs/dlpsdocs.dtd">
<DLPSDOC>
<TITLE>Editing DLXS templates in Macromedia Dreamweaver</TITLE>
<HEADER>
<JOURNAL>DLXS Documentation</JOURNAL>
<PUBDATE>2003-03-03 16:58:01 EST</PUBDATE>
<AUTH1>Stoeffler, Matt</AUTH1>
<EMAIL1>mstoef@umich.edu</EMAIL1>
<AUTH2></AUTH2>
<DOCTITLE>Editing DLXS templates in Macromedia Dreamweaver</DOCTITLE>
<VOL>ui</VOL>
<ISS></ISS>
<FILE>dlxsdocs-dlxs-in-mmdw</FILE>
</HEADER>
<BODY>
        <BHEAD>Editing DLXS templates in Macromedia Dreamweaver MX</BHEAD>
        <DIV1 ID="contents">
      <UL>
  <LI><A HREF="#settingup">Setting up Dreamweaver for DLXS templates
    </A>
    <UL>
      <LI><A HREF="#configuredmx">Configuring Dreamweaver to open DLXS template files
          </A>
        <UL>
            <LI><A HREF="#doctype">Create a DLXS document type entry in the DW document type definition
                file</A></LI>
            <LI><A HREF="#extensions">Add the tpl extension to the extensions.txt file</A></LI>
            <LI><A HREF="#localizedstring">Define a localized string for the DLXS template document type</A></LI>
        </UL>
      </LI>
      <LI><A HREF="#renderpis">Configure Dreamweaver to render DLXS PIs
        </A>
        <UL>
          <LI><A HREF="#tagspec">Define a tag specification for the PI tag in Tags.xml</A></LI>
          <LI><A HREF="#icon">Create an icon to substitute for a PI in design view</A></LI>
        </UL>
      </LI>
    </UL>
  </LI>
  <LI><A HREF="#editingtemplate">Editing a template file in Dreamweaver</A>
    <UL>
      <LI><A HREF="#viewingsearch">Viewing search.tpl in design view</A></LI>
    </UL>
  </LI>
</UL>
<HR WIDTH="90%" />
        </DIV1>
        <DIV1 ID="main">

<P><A NAME="settingup" ID="SETTINGUP"></A></P>
<DIV2>
<H2>Setting up Dreamweaver for DLXS templates</H2>
<P>Macromedia Dreamweaver MX (DMX) is built on a fairly robust extensibility
  model that uses XML and TXT configuration files for defining everything from
  allowed
  document types to markup colors, and also provides APIs for developing custom
  behavior modules, &quot;extensions,&quot; that can be added to the default tools set
  for the application. The pull-down menu behavior included in the navigation
  bar
  for release 10 was created by just such an &quot;extension&quot; created by the firm
  <A HREF="http://projectseven.com/">Project Seven</A>. Taking
  advantage of that model allows us to configure Dreamweaver so that DLXS template
  files with .tpl extensions and unique PI markup can be opened
  and edited easily. Directions for setting the proper configurations are included
  in the sections below.</P>
<P>(<STRONG>Note</STRONG>: Much of what is discussed below mirrors directions
  given in the DMX help &quot;book&quot; <STRONG>Extending Dreamweaver MX</STRONG>,
  in the <STRONG>Overview</STRONG> chapter, under sub-heading
  &quot;Extensible document types in Dreamweaver.&quot;)</P>
<P> </P>
<DIV3>
<H3 ID="configuredmx">Configuring Dreamweaver to open DLXS template files</H3>
<DIV4>
<H4 ID="doctype">Create a DLXS document type entry in the DW document type definition file</H4>
<P>Dreamweaver can be configured to recognize custom file types, and to render their
appearance in ways unique to that document type.  </P>
<P>To open a DLXS template file
    with extension .tpl, we first need to define the document type to DMX. Document
  types are defined in the MMDocumentTypes.xml file, located in the DMX folder
  in the </P>
<P>/Configuration/DocumentTypes/          path.</P>
<P>To add the a DLXS document &quot;type&quot; open MMDocumentTypes.xml
  in a text editor and create a new <CODE>documenttype</CODE> element like this
  (or simply replace your current MMDocumentTypes.xml file with this <A HREF="MMDocumentTypes.xml">pre-edited version</A> .  Right- or ctrl-click the link to save it to your computer.  ):</P>
<BLOCKQUOTE>
  <P><CODE> &lt;documenttype id=&quot;TPL&quot; internaltype=&quot;HTML&quot; winfileextension=&quot;tpl&quot; macfileextension=&quot;tpl&quot; file=&quot;Default.html&quot; writebyteordermark=&quot;false&quot;&gt;<BR />
&lt;TITLE&gt;<BR />
&lt;MMString:loadString id=&quot;mmdocumenttypes_64&quot; /&gt;<BR />
&lt;/TITLE&gt;<BR />
&lt;description&gt;<BR />
&lt;MMString:loadString id=&quot;mmdocumenttypes_65&quot; /&gt;<BR />
&lt;/description&gt;<BR />
&lt;/documenttype&gt;</CODE></P>
</BLOCKQUOTE>
<P>The <CODE>internaltype=&quot;HTML&quot;</CODE> attribute value tells DMX to treat
tpl files just like HTML files, so that HTML elements in the template files will
be rendered properly in the editor design view. The DMX help documentation gives
a full, detailed explanation of the structure of this file.  
</P>
</DIV4>
<DIV4>
<H4><A NAME="extensions"></A>Add the tpl extension to the extensions.txt file</H4>
<P>Now that there is a document type definition for a DLXS template file, we need
to edit the extensions.txt file, which is the file DMX uses to verify all allowed
file extensions. The extensions.txt file is located in the users configuration
folder ... </P>
<BLOCKQUOTE>
  <P><BR />
    For Windows 2000 and Windows XP platforms: <BR />
&lt;
    drive&gt;:\Documents and Settings\&lt;username&gt;\ Application Data\Macromedia\Dreamweaver
  MX\Configuration </P>
  <P><BR />
    For Windows NT platforms: <BR />
&lt;
    drive&gt;:\WinNT\profiles\&lt;username&gt;\ Application Data\Macromedia\Dreamweaver
  MX\Configuration </P>
  <P><BR />
    For Mac OS X platforms: <BR />
&lt;
    drive&gt;:Users:&lt;username&gt;:Library:Application Support: Macromedia:Dreamweaver
    MX:Configuration </P>
</BLOCKQUOTE>
<P>Open the file, and add an entry for tpl files by creating a new line (i.e.,
  at the bottom) and inserting</P>
<P><CODE>TPL:DLXS Template Files</CODE></P>
<P>(or simply replace your current extensions.txt file with this <A HREF="extensions.txt">pre-edited version</A> .  Right- or ctrl-click the link to save it to your computer.  )</P>
<P> </P>
</DIV4>

 <DIV4>
 <H4><A NAME="localizedstring" ID="LOCALIZEDSTRING"></A>Define a localized string for the DLXS template document type</H4>

<P>In the document type definition shown above, the content of the <CODE>TITLE</CODE> and
  <CODE>DESCRIPTION</CODE> elements was provided by an <CODE>MMString:loadString</CODE> directive,
  which simply references a unique string in a separate strings file to insert
  as the value. (This value is the label that will appear in a &quot;create new document&quot;
  dialog.) In this case, we referenced for the <CODE>TITLE</CODE> and <CODE>DESCRIPTION</CODE> elements
  the strings identified as <CODE>mmdocumenttypes_64</CODE> and <CODE>mmdocumenttypes_65</CODE>,
  respectively. To declare those strings, we need to edit the documenttypes.xml
  file, located in the DMX folder
  in the </P>
<P>/Configuration/Strings/          path.</P>
<P>Open the documenttypes.xml
file and insert ...</P>
<BLOCKQUOTE>
  <P><CODE> &lt;string id=&quot;mmdocumenttypes_64&quot; value=&quot;TPL&quot; /&gt;<BR />
&lt;string id=&quot;mmdocumenttypes_65&quot; value=&quot;&lt;![CDATA[TPL document]]&gt;&quot; /&gt;</CODE></P>
</BLOCKQUOTE>
<P>(or simply replace your current documenttypes.xml file with this <A HREF="documenttypes.xml">pre-edited version</A> .  Right- or ctrl-click the link to save it to your computer.  )
</P>
<P> </P>
</DIV4>
</DIV3>
<DIV3>
<H3><A NAME="renderpis" ID="RENDERPIS"></A>Configure Dreamweaver to render DLXS PIs
</H3>
<P>Completing the steps above assures that DMX will open a .tpl file and attempt
  to treat it like an HTML file. There still remains the issue of how it should
  attempt to display the custom PI tags included in template files. DMX provides
  a mechanism for defining third party tags that we can utilize. Instructions
  for defining PIs as third parth tags are given in the next two sections.</P>

  <DIV4>
<H4><A NAME="tagspec" ID="TAGSPEC"></A>Define a tag specification for the PI tag in Tags.xml</H4>
  <P>Dreamweaver defines how to process non-HTML tags by referencing the Tags.xml
    file located in DMX folder
  in the </P>
  <P>/Configuration/ThirdPartyTags/          path.</P>
  <P>To add the PI tag, create a tagspec element for it by inserting ...</P>
  <BLOCKQUOTE>
    <P><CODE>&lt;!-- DLXS --&gt;<BR />
&lt;
    tagspec tag_name=&quot;dlxs&quot; start_string=&quot;&lt;?&quot; end_string=&quot;&gt;&quot; detect_in_attribute=&quot;true&quot; icon=&quot;dlxsicon.gif&quot; icon_width=&quot;17&quot; icon_height=&quot;15&quot;&gt;&lt;/tagspec&gt;</CODE></P>
  </BLOCKQUOTE>
  <P>(or simply replace your current Tags.xml file with this <A HREF="Tags.xml">pre-edited version</A> .  Right- or ctrl-click the link to save it to your computer.  ). Complete details about the content model of the <CODE>tagspec </CODE>element
  can be found in the document <A HREF="customizing_dwmx.pdf">Customizing Dreamweaver
  MX.pdf
  </A>.
  </P>
</DIV4>
  <DIV4>
<H4><A NAME="icon" ID="ICON"></A>Create an icon to substitute for a PI in design view</H4>
    <P>Notice that the <CODE>tagspec</CODE>element include attributes <CODE>icon</CODE>, <CODE>icon_width</CODE>, and <CODE>icon_height.</CODE>If
  the tag being specified is a string defined type (rather than a conventional
  HTML-like tag), which PIs are, than the 
  
icon specification is required. This
  is the icon that will appear in place of the PI in the editor design view for
  intances of teh PI that 
  
do not appear within element attributes.  The icon
  dlxsicon.gif has been created for that purpose.  Simple save the icon to the
  ThirdPartyTags folder to make it available to DMX.
    </P>
    <TABLE WIDTH="50" BORDER="0" CELLPADDING="1" CELLSPACING="0">
<TBODY>
    <TR>
      <TD ALIGN="CENTER" VALIGN="MIDDLE"><IMG SRC="graphics/dlxsicon.gif" ALT="dlxsicon.gif" WIDTH="17" HEIGHT="15" STYLE="padding: 25px 25px 25px 25px"/></TD>
    </TR>
    <TR>
      <TD><SPAN>dlxsicon.gif</SPAN></TD>
    </TR>
  </TBODY>
</TABLE>
<P> </P>
</DIV4>
</DIV3>
</DIV2>
<DIV2 ID="editingtemplate">
<H2>Editing a template file in Dreamweaver</H2>
<P>Now that Dreamweaver is configured to open and view template files properly,
  viewing and editing template files is relatively easy. We'll briefly step through
  the components of the search.tpl file to demonstrate.</P>
<DIV3 ID="viewingsearch">
<H3>Viewing search.tpl in design view</H3>
<P><STRONG>Figure 1</STRONG> shows a Basic search page for the American verse
  collection. This page is created via a combination of 3 main templates: search.tpl,
  navheader.chnk, and simplesearchform.chnk.</P>
<BR/>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2">
<TBODY>
  <TR>
    <TD><IMG SRC="graphics/amverse-basic.gif" ALT="amverse-basic.gif" STYLE="border: 1px solid 000000" /></TD>
  </TR>
  <TR>
    <TD><B>Figure 1</B>: Basic search page for American Verse.</TD>
  </TR>
</TBODY>
</TABLE>
<P> </P>
<P>search.tpl is the container file, and viewing it in DMX, as illustrated in
  <STRONG>Figure 2</STRONG>, gives us a relatively clear sense of how the page parts come together.</P>
<P> </P>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2">
<TBODY>
  <TR>
    <TD><IMG SRC="graphics/search-tpl-dw.gif" ALT="search-tpl-dw.gif" WIDTH="613" HEIGHT="343" STYLE="border: 1px solid 000000" /></TD>
  </TR>
  <TR>
    <TD><B>Figure 2</B>: search.tpl template file as it appears in Dreamweaver
      design view.</TD>
  </TR>
</TBODY>
</TABLE>
<P> </P>
<P>Here you see the search form in skeletal form, with additional PIs providing
  component HTML markup or dynamic text values indicated via the dlxsicon.gif
  ( <IMG SRC="graphics/dlxsicon.gif" ALT="dlxsicon.gif" WIDTH="17" HEIGHT="15" /> ) image.
  Notice that all image references appear as broken image gifs. This is because
  the paths in the SRC attribute are relative paths or PI generated paths. (CSS
  paths are also incorrect, which could cause some HTML to appear differently
  that it would coming from the server. Notice also that the &quot;Groups
  Menu,&quot; and
  the headers for the collection list, which are only used for multiple collection
  group
  searching,
  are displayed
  by default
  and matching
  PIs are used to remove this markup conditionally. The PI's icons for the
  two sets of matching PIs, <CODE>&lt;?INCLUDE_GROUPS_SELECTION_NAV&gt;</CODE> and<CODE> &lt;?INCLUDE_COLL_LIST_WITH_CHECKBOXES&gt;</CODE>, are
  not shown here because they occur outside of <CODE>TD</CODE> elements.
  The other PI's that are displayed as icons are, as they occur form top left
  to
  bottom right:</P>
<UL>
  <LI> <CODE>&lt;?CHUNK filename=&quot;navheader.chnk&quot;&gt;</CODE> - This is a reference
    to the navheader.chnk file, which provides the entire header/navigation portion
    of the file.<BR />
  </LI>
  <LI><CODE>&lt;?SEARCH_TYPE_TEXT&gt;</CODE> - This is the text for the page
    sub-header telling us what kind of search we are at.<BR />
  </LI>
  <LI><CODE>&lt;?SEARCH_RESTRICTION&gt;</CODE> - This provides the item metadata
    in circumstances when we are searching witin a specific item.<BR />
  </LI>
  <LI><CODE>&lt;?CHUNK type=&quot;page&quot;&gt;</CODE> - This is a rereference
    to the appropriate search form, depending on which search type was selected.<BR />
  </LI>
  <LI><CODE>&lt;?GROUP_IN_FOCUS_NAME&gt;</CODE> - Inserts the name of the group
    currently selected. Again, this is for multiple collection searching only.<BR />
  </LI>
  <LI><CODE>&lt;?CONTACT type=&quot;text&quot;&gt;</CODE> - Returns the content
    of the contacttext field in the colldb.</LI>
</UL>
<P> </P>
<P>We are interested in the two chunk files. <STRONG>Figure 3</STRONG> shows the content of simplesearchform.chnk,
  which is inserted if we are displaying the Basic form shown in <STRONG>Figure
  1</STRONG> above.</P>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2">
<TBODY>
  <TR>
    <TD><IMG SRC="graphics/SOURCE/simple-form-chnk-dw.gif" ALT="SOURCE/simple-form-chnk-dw.gif" WIDTH="541" HEIGHT="393" STYLE="border: 1px solid 000000" /></TD>
  </TR>
  <TR>
    <TD><B>Figure 3</B>: simplesearchform.chnk file</TD>
  </TR>
</TBODY>
</TABLE>
<P>Again we see HTML in skeletal form, with all possible options shown (and again
  with filtering PI pairs hidden outside of <CODE>TD</CODE> elements). Here most
  of the PI icons represent the individual form elements that will be inserted
  for the form. But because we have the source file, and access to all the essential
  layout HTML, we have pretty good control for making changes easily that we
can confirm &quot;offline.&quot;</P>
<P>The next component we are interested in is the navheader.chnk file, shown
  in <STRONG>Figure 4</STRONG>.</P>
<P> </P>
<TABLE WIDTH="570" BORDER="0" CELLPADDING="0" CELLSPACING="2">
<TBODY>
  <TR>
    <TD VALIGN="TOP"><BR />
   <STRONG>a  </STRONG></TD>
    <TD><P><IMG SRC="graphics/navhdr-chnk-dw1.gif" ALT="navhdr-chnk-dw1.gif" WIDTH="547" HEIGHT="81" STYLE="border: 1px solid 000000" /></P>
    <P> </P></TD>
  </TR>
  <TR>
    <TD VALIGN="TOP"><STRONG><BR />
    b  </STRONG></TD>
    <TD><P><IMG SRC="graphics/navhdr-chnk-dw2.gif" ALT="navhdr-chnk-dw2.gif" WIDTH="558" HEIGHT="85" STYLE="border: 1px solid 000000" /></P>
    <P> </P></TD>
  </TR>
  <TR>
    <TD VALIGN="TOP"><STRONG><BR />
c</STRONG></TD>
    <TD><IMG SRC="graphics/navhdr-cknk-dw3.gif" ALT="navhdr-cknk-dw3.gif" WIDTH="558" HEIGHT="87" STYLE="border: 1px solid 000000" />    </TD>
  </TR>
  <TR>
    <TD COLSPAN="2"><B>Figure 4</B>: navheader.chnk file shown in design view
      with <STRONG>a</STRONG>) pull-down menu hidden, <STRONG>b</STRONG>) pull-down
      menu layer showing, and <STRONG>c</STRONG>) closer layer showing</TD>
  </TR>
</TBODY>
</TABLE>
<P>Here we have easy access to the HTML content of the pull-down menu (though
  not really the behavior attached to it), where we can easily change the labels,
  or CSS style associations for an of the other HTML elements. Or we can even
  rearrange the table itself to make the menu display vertically. For more detailed
  information about how the menu behavior works, refer to the fine <A HREF="http://projectseven.com/tutorials/menuing/mcloser/index.htm">tutorial</A> provided
  by Project Seven. The DLXS implementation departs from the Project Seven demo
  in a few small particulars, mostly in the shape fo the menu and in the use
  of mostly text anchors, instead of images, to implement it. But the fundamental
  mechanisms are as described on the <A HREF="http://projectseven.com/">Project
  Seven</A> site.</P>
<P> </P>
</DIV3>
</DIV2>
        </DIV1>
    </BODY>
</DLPSDOC>
