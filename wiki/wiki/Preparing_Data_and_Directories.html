<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from localhost/wiki/Preparing_Data_and_Directories by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:34:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.5" />
		<meta name="keywords" content="Preparing Data and Directories,DLXS Wiki,Directory Structure,Mounting Collections: Class-specific Steps,Mounting a Finding Aids Collection,Patch prep commands,Release14 Makefile,Samplefa Makefile,Useful Tools" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/mediawiki/opensearch_desc.php" title="DLXS Documentation (en)" />
		<link rel="alternate" type="application/rss+xml" title="DLXS Documentation RSS Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="DLXS Documentation Atom Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Preparing Data and Directories - DLXS Documentation</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../mediawiki/skins/common/sharedfa7c.css?164";
			@import "../mediawiki/skins/monobook/mainfa7c.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../mediawiki/skins/common/commonPrintfa7c.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/monobook/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/monobook/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/mediawiki/skins";
var wgArticlePath = "/wiki/$1";
var wgScriptPath = "/mediawiki";
var wgScript = "http://localhost/mediawiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Preparing_Data_and_Directories";
var wgTitle = "Preparing Data and Directories";
var wgAction = "view";
var wgArticleId = "226";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "2237";
var wgVersion = "1.13.5";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="../mediawiki/skins/common/wikibitsfa7c.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="../mediawiki/skins/common/ajaxfa7c.js?164"></script>
		<script type="text/javascript" src="http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000&amp;useskin=monobook";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-Preparing_Data_and_Directories">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Preparing Data and Directories</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From DLXS Documentation</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Preparing Data and Directories
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Overview_of_Data_Preparation_and_Indexing_Steps"><span class="tocnumber">1</span> <span class="toctext">Overview of Data Preparation and Indexing Steps</span></a></li>
<li class="toclevel-1"><a href="#Set_Up_Directories_and_Files_for_Data_Preparation"><span class="tocnumber">2</span> <span class="toctext">Set Up Directories and Files for Data Preparation</span></a>
<ul>
<li class="toclevel-2"><a href="#Fixing_paths"><span class="tocnumber">2.1</span> <span class="toctext">Fixing paths</span></a></li>
<li class="toclevel-2"><a href="#Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation"><span class="tocnumber">2.2</span> <span class="toctext">Step by step instructions for setting up Directories for Data Preparation</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Set_Up_Directories_and_Files_for_XPAT_Indexing"><span class="tocnumber">3</span> <span class="toctext">Set Up Directories and Files for XPAT Indexing</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Overview_of_Data_Preparation_and_Indexing_Steps"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit&amp;section=1" title="Edit section: Overview of Data Preparation and Indexing Steps">edit</a>]</span> <span class="mw-headline">Overview of Data Preparation and Indexing Steps</span></h2>
<p><b>Data Preparation</b> 
</p>
<ol><li> Validate the files individually against the EAD <i>2002</i> DTD<br /><b>make validateeach</b><br />
</li><li> Concatenate the files into one larger XML file<br /><b>make prepdocs</b><br />
</li><li> Validate the concatenated file against the <i>dlxsead2002</i> DTD:<br /><b>make validate</b><br />
</li><li> Normalize the concatenated file.<br /><b>make norm</b><br />
</li><li> Validate the normalized concatenated file against the <i>dlxsead2002</i> DTD <br /><b>make validate</b><br />
</li></ol>
<p>The end result of these steps is a file containing the concatenated EADs wrapped in a &lt;COLL&gt; element which validates against the dlxsead2002 and is ready for indexing:
</p>
<pre>&lt;COLL&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;

</pre>
<p><b>WARNING!</b>    If there are extra characters or some other problem with the part of the program that strips out the xml declaration and the doctype declaration the file will end up like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;
</pre>
<p>In this case you will get "character data not allowed" or similar errors during the make validate step. You can troubleshoot by looking at the concatenated file and/or checking your original EADs.
</p><p><b>Indexing</b>
</p>
<ol><li> <b>make singledd</b> indexes all the words in the concatenated file. 
</li><li> <b>make xml</b> indexes the XML structure by reading the DTD. Validates as it indexes.
</li><li> <b>make post</b> builds and indexes fabricated regions based on the XPAT queries stored in the workshopfa.extra.srch file.
</li></ol>
<a name="Set_Up_Directories_and_Files_for_Data_Preparation"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit&amp;section=2" title="Edit section: Set Up Directories and Files for Data Preparation">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for Data Preparation</span></h2>
<p>You will need to set up a directory structure  where you plan to store your EAD2002 XML source files, your object files (used by xpat for indexing), index files (including region index files)and other information such as data dictionaries, and files you use to prepare your data.  
</p><p>The convention used by DLXS is to use subdirectories named with the first letter of the collection id and the collection name:$DLXSROOT/xxx/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile. See the <a href="Directory_Structure.html" title="Directory Structure">DLPS Directory Conventions</a> section  and <a href="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" class="external text" title="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" rel="nofollow">Workshop discussion of Directory Conventions</a>for more information.
</p><p>When deciding on your collection id consider that it needs to be unique across all classes to enable cross-collection searching.  So you don't want both a text class collection with a collid of "my_coll" and a finding aid class collection with a collection id of "my_coll".  You will also probably want to make your collection ids rather short and make sure they don't contain any special characters, since they will also be used for sub-directory names.
</p><p>Note that the Makefile we provide along with most of the data preparation scripts supplied with DLXS assume this directory structure.
</p><p>We recommend you use the following directory structure:
</p>
<ul><li>	Store specialized scripts for preparing and/or preprocessing your collection and its Makefile in $DLXSROOT/bin/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile. See the DLPS Directory Conventions section for more information.
</li><li>	Store your source finding aids in $DLXSROOT/prep/{c}/{coll}/data/. 
</li></ul>
<ul><li>	Store any DTDs, doctype, and files for preparing your data in $DLXSROOT/prep/{c}/{coll}/. Unlike the contents of other directories, everything in prep should be expendable when actually running the indexes.
</li><li>	After running all the targets in the Makefile, the finalized, concatenated XML file for your finding aids collection will be created in $DLXSROOT/obj/{c}/{coll}/ , e.g., /l1/obj/b/bhlead/bhlead.xml.
</li><li>	Store index, region, data dictionary, and init files in $DLXSROOT/idx/{c}/{coll}/ , e.g., /l1/idx/b/bhlead/bhlead.idx. These will be updated as the index related targets in the Makefile are run. See the XPAT documentation for more on these types of files.
</li></ul>
<a name="Fixing_paths"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit&amp;section=3" title="Edit section: Fixing paths">edit</a>]</span> <span class="mw-headline">Fixing paths</span></h3>
<p>The installation script should have changed all instances of /l1/ to your $DLXSROOT and all bang prompts "#!/l/local/bin/perl" to your location of perl.  However, you may wish to check the following scripts:
</p>
<ul><li>	$DLXSROOT/bin/f/findaid/output.dd.frag.pl
</li><li>	$DLXSROOT/bin/f/findaid/inc.extra.dd.pl
</li><li>	$DLXSROOT/bin/s/samplefa/preparedocs.pl 
</li></ul>
<p>If you use the Makefile in  $DLXSROOT/bin/s/samplefa  you should check that the paths in the Makefile are correct for the locations of xpat, oxs, and osgmlnorm as installed on your system.  These are the Make varibles that should be checked:
</p>
<ul><li> XPATBINDIR
</li><li> OSX
</li><li> OSGMLNORM 
</li></ul>
<p><br />
</p>
<a name="Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit&amp;section=4" title="Edit section: Step by step instructions for setting up Directories for Data Preparation">edit</a>]</span> <span class="mw-headline">Step by step instructions for setting up Directories for Data Preparation</span></h3>
<p>You can use the scripts and files from the sample finding aids collection "samplefa" as a basis for creating a new collection.  In the instructions that follow you would use /{c}/{coll} instead of /w/workshopfa where {c} is the first letter of your collection id and  {coll} is your collection id.  So for example if your collection id was mycoll instead of 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p>you would do 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/m/mycoll/mycoll.extra.srch
</pre>
<p><br />
This documentation will make use of the concept of the $DLXSROOT, which is the place at which your DLXS directory structure starts. We generally use /l1/.
</p><p>To check your <span class="unixcommand">$DLXSROOT</span>, type the following command at the command prompt:
</p>
<pre>echo $DLXSROOT
</pre>
<p>The <span class="unixcommand">prep</span> directory under <span class="unixcommand">$DLXSROOT</span> is the space for you to take your encoded finding aids and "package them up" for use with the DLXS middleware. Create your basic directory <span class="unixcommand">$DLXSROOT/prep/w/workshopfa</span> and its <span class="unixcommand">data</span> subdirectory with the following command:
</p>
<pre>mkdir -p $DLXSROOT/prep/w/workshopfa/data
</pre>
<p>Move into the <span class="unixcommand">prep</span> directory with the following command:
</p>
<pre>cd $DLXSROOT/prep/w/workshopfa
</pre>
<p>This will be your staging area for all the things you will be doing to your EADs, and ultimately to your collection. At present, all it contains is the <span class="unixcommand">data</span> subdirectory you created a moment ago. Unlike the contents of other collection-specific directories, everything in <span class="unixcommand">prep</span> should be ultimately expendable in the production environment.
</p><p>Copy the necessary files into your <span class="unixcommand">data</span> directory with the following commands:
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/data/*.xml $DLXSROOT/prep/w/workshopfa/data/.
</pre>
<p>We'll also need a few files to get us started working. They will need to be copied over as well, and also have paths adapted and collection identifiers changed. Follow these commands:
</p><p><br /> 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/validateeach.csh $DLXSROOT/prep/w/workshopfa/.
cp $DLXSROOT/prep/s/samplefa/samplefa.xml.inp $DLXSROOT/prep/w/workshopfa/workshopfa.xml.inp
cp $DLXSROOT/prep/s/samplefa/samplefa.text.inp $DLXSROOT/prep/w/workshopfa/workshopfa.text.inp
mkdir -p $DLXSROOT/obj/w/workshopfa
mkdir -p $DLXSROOT/bin/w/workshopfa
cp $DLXSROOT/bin/s/samplefa/preparedocs.pl $DLXSROOT/bin/w/workshopfa/.
cp $DLXSROOT/bin/s/samplefa/Makefile $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>(If you have installed the Release 13 August 24th patch substitute <a href="Patch_prep_commands.html" title="Patch prep commands">these</a> instructions)
</p>
<div class="release"> Release 13 with August 24 patch:
<p>If release 13, make sure you install the patch files as listed in the README:
<a href="http://www.dlxs.org/products/archive-by-CDROM/13/Patches/24August2007/README" class="external text" title="http://www.dlxs.org/products/archive-by-CDROM/13/Patches/24August2007/README" rel="nofollow">README</a>
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.xml.inp $DLXSROOT/prep/w/workshopfa/workshopfa.xml.inp
cp $DLXSROOT/prep/s/samplefa/samplefa.text.inp $DLXSROOT/prep/w/workshopfa/workshopfa.text.inp
mkdir -p $DLXSROOT/obj/w/workshopfa
mkdir -p $DLXSROOT/bin/w/workshopfa
cp $DLXSROOT/bin/s/samplefa/preparedocs.pl $DLXSROOT/bin/w/workshopfa/.
cp $DLXSROOT/bin/s/samplefa/fixdoctype.pl $DLXSROOT/bin/w/workshopfa/.
cp $DLXSROOT/bin/s/samplefa/validateeach.sh $DLXSROOT/bin/w/workshopfa/.
cp $DLXSROOT/bin/s/samplefa/Makefile $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>Make sure you have edited the perl bang prompt and the paths to your shell and directories in these files:
</p>
<pre>   * $DLXSROOT/bin/f/findaid/stripdoctype.pl
   * $DLXSROOT/bin/s/samplefa/fixdoctype.pl
   * $DLXSROOT/bin/s/samplefa/preparedocs.pl
   * $DLXSROOT/bin/w/workshopfa/validateeach.sh
   * $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
</div>
<p><br />
</p><p><br />
Now you'll need to edit these files to ensure that the paths match your <span class="unixcommand">$DLXSROOT</span> and that the collection name is <i>workshopfa</i> instead of <i>samplefa</i>.
</p><p><i>STOP!! Make sure you edit the files before going to the next steps!! </i>
</p><p>Make sure you change these files:
</p>
<ul><li> $DLXSROOT/prep/w/workshopfa/validateeach.csh
</li></ul>
<div class="release">Release 13 wi patch
<ul><li> $DLXSROOT/prep/w/workshopfa/validateeach.sh
</li></ul>
</div>
<ul><li> $DLXSROOT/bin/w/workshopfa/Makefile (see below for details)
</li></ul>
<p>You can run this command to check to see if you forgot to change samplefa to workshopfa:
</p>
<pre>grep "samplefa" $DLXSROOT/bin/w/workshopfa/* $DLXSROOT/prep/w/workshopfa/* |grep -v "#"
</pre>
<p>With the ready-to-go ead2002 encoded finding aids files in the <span class="unixcommand">data</span> directory, we are ready to begin the preparation process. This will include:
</p>
<ol><li> Validating the files individually against the EAD 2002 DTD
</li><li> Concatenating the files into one larger XML file
</li><li> Validating the concatenated file against the <i>dlxsead2002</i> DTD
</li><li> "Normalizing" the concatenated file.
</li><li> Validating the normalized concatenated file against the <i>dlxsead2002</i> DTD
</li></ol>
<p>These steps are generally handled via the <span class="unixcommand">Makefile</span> in <span class="unixcommand">$DLXSROOT/bin/s/samplefa</span> which we have copied to $DLXSROOT/bin/w/workshopfa. <a href="Samplefa_Makefile.html" title="Samplefa Makefile">Example Makefile</a>.
</p>
<div class="release">Release 14 <a href="Release14_Makefile.html" title="Release14 Makefile">Example Makefile</a>.</div>
<p>Make sure you changed your copy of the Makefile to reflect
</p><p>/w/workshopfa instead of /s/samplefa. You will want to change lines 2 and 3 accordingly
</p><p><br /> 
</p>
<pre>   1  
   2  NAMEPREFIX = samplefa
   3  FIRSTLETTERSUBDIR = s
</pre>
<div class="release">Release 14: 
<pre>   1  DLXSROOT = /l1
   2  NAMEPREFIX = samplefa
   3  FIRSTLETTERSUBDIR = s
</pre>
<p><br />
</p>
</div>
<div class="tip"> Tip: Be sure not to add any space after the workshopfa or w. The Makefile ignores space immediately before and after the equals sign but treats all other space as part of the string. If you accidentally put a space after the FIRSTLETTERSUBDIR = s , you will get an error like "[validateeach] Error 127" If you look closely at the first line of what the Makefile reported to standard output (see below) you will see that instead of running the command:
<pre>/l1/workshop/tburtonw/dlxs/prep/w/workshopfa/validateeach.csh
</pre>
<p>which just calls the validateeach c-shell script
</p><p>it tried to run a directory name: "/l1/workshop/tburtonw/dlxs/prep/w" with the argument "/workshopfa/validateeach.csh" which does not make sense
</p>
<pre>&nbsp;% make validateeach
/l1/workshop/tburtonw/dlxs/prep/w /workshopfa/validateeach.csh
make: execvp: /l1/workshop/tburtonw/dlxs/prep/w: Permission denied
make: [validateeach] Error 127 (ignored)
</pre>
</div>
<div class="tip">
<p>Further note on editing the Makefile: If you modify or write your own Make targets, you need to make sure that a real "tab" starts each command line rather than spaces. The easiest way to check for these kinds of errors is to use "cat -vet Makefile" to show all spaces, tabs and newlines
</p>
</div>
<p>You should make sure you that $DLXSROOT, and the locations of the various binaries to have been changed to match your installation. 
</p>
<ul><li> Change $DLXSROOT /l1/ to your $DLXSROOT on every line that uses it
</li><li> Change XPATBINDIR = /l/local/bin/ to the location of the <span class="unixcommand">xpat</span> binary in your installation
</li><li> Change the location of the <span class="unixcommand">osx</span> binary from
</li></ul>
<pre>OSX = /l/local/bin/osx
to the location in your installation
</pre>
<ul><li> Change the location of the <span class="unixcommand">osgmlnorm</span> binary from
</li></ul>
<pre>OSGMLNORM = /l/local/bin/osgmlnorm
to the location in your installation
</pre>
<div class="tip"> Tip: oxs and osgmlnorm are installed as part of the OpenSP package. If you are using linux, make sure that the OpenSP package for your version of linux is installed and make sure the paths above are changed to match your installation. If you are using Solaris you will have to install (and possibly compile) OpenSP. You may also need to make sure the $LD_LIBRARY_PATH environment variable is set so that the OpenSP programs can find the required libraries. For troubleshooting such problems the unix <b>ldd</b> utility is invaluble. See also links to OpenSP package on the tools page: <a href="Useful_Tools.html" title="Useful Tools">Useful Tools</a>
</div>
<hr />
<a name="Set_Up_Directories_and_Files_for_XPAT_Indexing"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit&amp;section=5" title="Edit section: Set Up Directories and Files for XPAT Indexing">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for XPAT Indexing</span></h2>
<pre>Please substitute /{c}/{coll} where {c} is the first letter of your collection id 
and {coll}is your collection id  for any instance of /w/workshopfa 
and substitute {coll} wherever you see "workshopfa" in the following instructions.
</pre>
<p>First, we need to create the rest of the directories in the <b>workshopfa</b> environment with the following commands:
</p>
<pre>mkdir -p $DLXSROOT/idx/w/workshopfa
</pre>
<p>The <span class="unixcommand">bin</span> directory we created when we prepared directories for data preparation holds any scripts or tools used for the collection specifically; <span class="unixcommand">obj</span> ( created earlier) holds the "object" or XML file for the collection, and <span class="unixcommand">idx</span> holds the XPAT indexes. Now we need to finish populating the directories.
</p>
<pre>
 cp $DLXSROOT/prep/s/samplefa/samplefa.blank.dd  DLXSROOT/prep/w/workshopfa/workshopfa.blank.dd
 cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p><br />
<b>Each of these files need to be edited </b>to reflect the new collection name and the paths to your particular directories. Failure to change even one file can result in puzzling errors, because the scripts <i>are</i> working, just not necessarily in the directories you are looking at.
</p>
<pre>grep -l "samplefa" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p>will check for any leftover unchanged instances of the string /samplefa. 
You also need to check that "/l1/"  has been replacedby whatever $DLXSROOT is on your server. If you don't have an /l1 directory on your server (which is very likely if you are not here using a DLPS machine) you can check with:
</p>
<pre>grep -l "l1" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p><a href="#top" title="">Top</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 61/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki_dlxsdocs_15:pcache:idhash:226-0!1!0!!en!2 and timestamp 20250202211642 -->
<div class="printfooter">
Retrieved from "<a href="Preparing_Data_and_Directories.html">http://localhost/wiki/Preparing_Data_and_Directories</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Preparing_Data_and_Directories.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://localhost/mediawiki/index.php?title=Talk:Preparing_Data_and_Directories&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="User_172.20.0.html" title="The user page for the ip you&#039;re editing as [.]" accesskey="." class="new">172.20.0.1</a></li>
				<li id="pt-anontalk"><a href="User_talk_172.20.0.html" title="Discussion about edits from this ip address [n]" accesskey="n" class="new">Talk for this IP</a></li>
				<li id="pt-anonlogin"><a href="http://localhost/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Preparing_Data_and_Directories" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../dlxs15/uploads/DLXS_logo2.gif);" href="Main_Page.html" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a href="DLXS_Documentation_Community_Portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="DLXS_Documentation_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Mounting_a_Bib_Class_Collection.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help_Contents.html" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://localhost/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search DLXS Documentation [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Preparing_Data_and_Directories.html" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Preparing_Data_and_Directories.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://localhost/mediawiki/index.php?title=Preparing_Data_and_Directories&amp;oldid=2237" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 8 July 2008, at 20:18.</li>
				<li id="viewcount">This page has been accessed 2,144 times.</li>
				<li id="privacy"><a href="DLXS_Documentation_Privacy_policy.html" title="DLXS Documentation:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="DLXS_Documentation_About.html" title="DLXS Documentation:About">About DLXS Documentation</a></li>
				<li id="disclaimer"><a href="DLXS_Documentation_General_disclaimer.html" title="DLXS Documentation:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.111 secs. --></body>
<!-- Mirrored from localhost/wiki/Preparing_Data_and_Directories by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:34:07 GMT -->
</html>
