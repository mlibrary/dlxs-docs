<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from localhost/wiki/OAI_Provider by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:29:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.5" />
		<meta name="keywords" content="OAI Provider,Ancillary Resources,Broker20: An OAI-compliant Metadata Server,DLXS Wiki,DLXS to DC,OAI Harvester" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/mediawiki/opensearch_desc.php" title="DLXS Documentation (en)" />
		<link rel="alternate" type="application/rss+xml" title="DLXS Documentation RSS Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="DLXS Documentation Atom Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>OAI Provider - DLXS Documentation</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../mediawiki/skins/common/sharedfa7c.css?164";
			@import "../mediawiki/skins/monobook/mainfa7c.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../mediawiki/skins/common/commonPrintfa7c.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/monobook/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/monobook/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/mediawiki/skins";
var wgArticlePath = "/wiki/$1";
var wgScriptPath = "/mediawiki";
var wgScript = "http://localhost/mediawiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "OAI_Provider";
var wgTitle = "OAI Provider";
var wgAction = "view";
var wgArticleId = "305";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "3060";
var wgVersion = "1.13.5";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="../mediawiki/skins/common/wikibitsfa7c.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="../mediawiki/skins/common/ajaxfa7c.js?164"></script>
		<script type="text/javascript" src="http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000&amp;useskin=monobook";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-OAI_Provider">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">OAI Provider</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From DLXS Documentation</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="Ancillary_Resources.html" title="Ancillary Resources">Ancillary Resources</a> &gt; OAI Provider
</p><p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1"><a href="#Setup_within_DLXS"><span class="tocnumber">2</span> <span class="toctext">Setup within DLXS</span></a></li>
<li class="toclevel-1"><a href="#Setup_outside_of_DLXS"><span class="tocnumber">3</span> <span class="toctext">Setup outside of DLXS</span></a></li>
<li class="toclevel-1"><a href="#UMProvider"><span class="tocnumber">4</span> <span class="toctext">UMProvider</span></a>
<ul>
<li class="toclevel-2"><a href="#Synopsis"><span class="tocnumber">4.1</span> <span class="toctext">Synopsis</span></a></li>
<li class="toclevel-2"><a href="#Configuration"><span class="tocnumber">4.2</span> <span class="toctext">Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#LoadOai.pl"><span class="tocnumber">5</span> <span class="toctext">LoadOai.pl</span></a></li>
<li class="toclevel-1"><a href="#Record_Loader_.28PHP.29"><span class="tocnumber">6</span> <span class="toctext">Record Loader (PHP)</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Overview"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a>]</span> <span class="mw-headline">Overview</span></h2>
<p>Below you will find the documentation for using the UMProvider and LoadOai.pl, in order to make metadata available to the world using the <a href="http://www.openarchives.org/" class="external text" title="http://www.openarchives.org/" rel="nofollow">OAI Protocol for Metadata Harvesting (OAI-PMH)</a>. These tools, along with the <a href="OAI_Harvester.html" title="OAI Harvester">OAI Harvester</a>, are open source and available for download from <a href="http://sourceforge.net/projects/umoaitoolkit" class="external text" title="http://sourceforge.net/projects/umoaitoolkit" rel="nofollow">Source Forge</a> as well as included in DLXS release 14.
</p><p>DLXS also offers an older data provider tool-- <a href="Broker20__An_OAI-compliant_Metadata_Server.html" title="Broker20: An OAI-compliant Metadata Server">broker20</a>, which uses XPAT and collmgr to function.
</p>
<a name="Setup_within_DLXS"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=2" title="Edit section: Setup within DLXS">edit</a>]</span> <span class="mw-headline">Setup within DLXS</span></h2>
<p>If you are using the UMProvider within a DLXS installation you will be prompted to configure your UMProvider during the installation step (running <i>Installer.pl</i>).  If you are not ready to install your OAI provider when you are installing DLXS, you can come back and just install the UMProvider any time.  To install/configure only the UMProvider use the <i>Installer.pl</i> with the <i>-f</i> option like:
</p>
<pre>

  # cd $DLXSROOT/bin/i/installer/
  # perl ./Installer.pl -f $DLXSROOT/cgi/o/oai/oai.cfg

</pre>
<p><span class="release_15"><b>Release_15</b></span> If you are not using dlxs, you may not have a symlink of the perl interpreter set, therefore, you may need to change the location of the perl interpreter in  $DLXSROOT/cgi/o/oai/oai.
</p><p><span class="release_15"><b>Release_15</b></span> Make sure that you have installed the following modules from CPAN
</p>
<pre>

   Switch
   Date::Parse
   Config::Tiny
   XML::LibXML
   Mail::Mailer

</pre>
<p>If you have the UMProvider configured correctly, and you have updated your database with the MySQL dump file that is provided with the release, you will <b>not</b> need to create the database tables or create/modify the CGI script. You should now be able to make the following requests and get proper <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html" class="external text" title="http://www.openarchives.org/OAI/openarchivesprotocol.html" rel="nofollow">OAI-PMH</a> XML responses:
</p>
<pre>

  http://your.host.org/cgi/o/oai/oai?verb=Identify
  http://your.host.org/cgi/o/oai/oai?verb=ListSets
  http://your.host.org/cgi/o/oai/oai?verb=ListRecords&amp;metadataPrefix=oai_dc

</pre>
<p>If these look good, the DLXS configuration steps are complete.  You can skip down to the OAI <a href="#Configuration" title="">#Configuration</a> step below where you describe your OAI provider. After that you are ready to load data.
</p>
<a name="Setup_outside_of_DLXS"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=3" title="Edit section: Setup outside of DLXS">edit</a>]</span> <span class="mw-headline">Setup outside of DLXS</span></h2>
<p>Basic steps for setting up an OAI-PMH 2.0 Provider using UMProvider.pm downloaded from <a href="http://sourceforge.net/projects/umoaitoolkit" class="external text" title="http://sourceforge.net/projects/umoaitoolkit" rel="nofollow">Source Forge</a>:
</p>
<ol><li> Create the <i>oai</i> and <i>oaisets</i> tables in MySQL (or another database). See CREATE TABLE examples and explanation below.<br />
</li><li> There is a script described below to assist you in loading the metadata but there is no way around the fact that you need to generate Dublin Code (DC) metadata for each record. One option is to wrap the oai_dc records in &lt;metadata&gt; tags and put them into the format for loading with the <i>LoadOai.pl</i> (details below). If you have another mechanism for loading the data that you would prefer to use, create these records and load everything, including the &lt;metadata&gt; element into the oai_dc field of the oai table. For both options you will also need to have a unique identifier for each record as well as the set(s) information. <br />We also have scripts and XSLT style sheets that should help convert existing DLXS collection to DC for loading into the database. Information for that can be found here: <a href="DLXS_to_DC.html" title="DLXS to DC">DLXS_to_DC</a>.<br />
</li><li> Copy <i>sample_config.xml</i> to <i>config.xml</i> and edit for your setup.  Be sure to change: <b>repositoryName, baseURL, adminEmail, repositoryIdentifier, sampleIdentifier, the list of sets and list of possible metadata formats.</b><br />
</li><li> Place <i>oai</i> (the CGI script), <i>config.xml</i> and <i>UMProvider.pm</i> in a CGI directory on a web server.  <br />
</li><li> Edit <i>oai</i> (the CGI script) to add
<ol><li> database connection settings,
</li><li> pointer to your config.xml, and 
</li><li> log file location (details below).<br />
</li></ol>
</li><li> Test OAI provider:
</li></ol>
<pre>   <a href="http://your.host.org/cgi-bin/oai?verb=Identify" class="external free" title="http://your.host.org/cgi-bin/oai?verb=Identify" rel="nofollow">http://your.host.org/cgi-bin/oai?verb=Identify</a>
   <a href="http://your.host.org/cgi-bin/oai?verb=ListRecords&amp;metadataPrefix=oai_dc" class="external free" title="http://your.host.org/cgi-bin/oai?verb=ListRecords&amp;metadataPrefix=oai_dc" rel="nofollow">http://your.host.org/cgi-bin/oai?verb=ListRecords&amp;metadataPrefix=oai_dc</a>
</pre>
<a name="UMProvider"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=4" title="Edit section: UMProvider">edit</a>]</span> <span class="mw-headline">UMProvider</span></h2>
<p>UMProvider: OAI-PMH 2.0 Provider Perl module. The UMProvider relies heavily on [<a href="http://xmlsoft.org/" class="external text" title="http://xmlsoft.org/" rel="nofollow">libxml</a>] (XML::LibXML) for creating and parsing XML data and a database for storage. 
</p><p>UMProvider requires that you have pre-formed oai_dc metadata in a database.  The default database is mysql but any DBI.pm supported database should work.  The data must be stored in two tables with the following required columns:
</p>
<pre>
  +----+--------------------+
  | table: oai              |
  +----+-----------+--------+
  | id | timestamp | oai_dc |
  +----+-----------+--------+

  +----+-----------+
  | table: oaisets |
  +----+-----------+
  | id | oaiset    |
  +----+-----------+
</pre>
<p>The second table for OAI set information (<i>oaisets</i>) is optional just like the use of sets in <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html" class="external text" title="http://www.openarchives.org/OAI/openarchivesprotocol.html" rel="nofollow">OAI-PMH 2.0</a>.
</p><p>If you would like to provide additional metadata formats such as marc21 or mods, add these columns after oai_dc in the first (main) table.  The column name must match the metadata format.  <span class="release_15"><b>Release_15</b></span> You must also create the tables oai_marc, and oai_mods.  Here are example create table statements:
</p>
<pre>
  CREATE TABLE oai (id VARCHAR(50) PRIMARY KEY,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    oai_dc MEDIUMBLOB,
    mods   MEDIUMBLOB,
    marc21 MEDIUMBLOB,
    PRIMARY KEY  (id),
    KEY timestamp (timestamp),
    KEY oai_time_id (timestamp, id));

  CREATE TABLE oaisets (id VARCHAR(50), 
    oaiset VARCHAR(32), 
    PRIMARY KEY (id,oaiset),
    KEY 'oaiset' (oaiset));

  CREATE TABLE `oai_marc` (
    id  varchar(150) NOT NULL default '',
    timestamp  timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
    marc21  mediumblob,
    PRIMARY KEY  (id),
    KEY timestamp (timestamp),
    KEY oai_time_id (timestamp,id));

  CREATE TABLE `oai_mods` (
    id` varchar(150) NOT NULL default '',
    timestamp  timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP,
    mods  mediumblob,
    PRIMARY KEY  (id),
    KEY timestamp (timestamp),
    KEY oai_time_id (timestamp,id));

</pre>
<p>The <i>id</i> values in the <i>oai</i> table and the <i>oaisets</i> tables must match.  The id in the oai table must be unique but since an item can exist in multiple oai sets, that <i>id</i> can repeat in the oaisets table.  Records do not have to be assigned to a set so it is possible that an item in the <i>oai</i> table does not exist in the <i>oaisets</i> table.
</p><p><b>IMPORTANT:</b> If you have hierarchical sets, be sure to have an entry for each unique set name down to the root set for each item.  For example, if the item "abc123" is in the set "foo:bar:baz", you must have the following three rows in the <i>oaisets</i> table:
</p>
<pre>
  +--------+-------------+
  | id     | oaiset      |
  +--------+-------------+
  | abc123 | foo:bar:baz |
  | abc123 | foo:bar     |
  | abc123 | foo         |
  +--------+-------------+
</pre>
<p>The id in the database is only the brief unique identifier and not the full OAI identifier.  For the OAI-PMH response, the identifier is created with the host name (<i>repositoryIdentifier</i>) from the XML configuration file (oai:host:id).
</p><p><b>Deleted records:</b> If you would like to mark a record as deleted, just set the "oai_dc" field for that record to NULL in the database.  The UMProvider will continue to return the header for this record and the header will have the <i>deleted</i> status attribute.  The UMProvider only supports marking an entire record as deleted, an individual format for a record cannot be deleted.
</p><p><b>Required perl modules:</b> POSIX, XML::LibXML, DBI, Encode
</p>
<a name="Synopsis"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=5" title="Edit section: Synopsis">edit</a>]</span> <span class="mw-headline">Synopsis</span></h3>
<p>Here is an example CGI script using UMProvider:
</p>
<pre>
  use OaiProvider;
  use CGI;
  use CGI::Carp;

  my $query  = CGI-&gt;new();
  my @params = $query-&gt;param();
  my $url    = $query-&gt;url();

  my $args = {};
  foreach ( $query-&gt;param() ) { $args-&gt;{$_} = join($;, $query-&gt;param($_)); }

  my $op = new UMProvider(
      configFile =&gt; &quot;oai_provider_conf.xml&quot;,
      logFile    =&gt; &quot;oai_provider.log&quot;,
      url        =&gt; $url,
      arguments  =&gt; $args);

  if ( $op&nbsp;!~ /UMProvider/ )
  {
      carp ($op);
      print $query-&gt;header(-status =&gt; 500);
      exit;
  }

  if (&nbsp;! $op-&gt;ConnectToDb( $db_user, $db_passwd, $db_name, $db_server ) )
  {
      carp (&quot;failed ConnectToDb: $db_user, $db_passwd, $db_name, $db_server&quot;);
      print $query-&gt;header(-status =&gt; 500);
      exit;
  }

  $op-&gt;BuildResponse();
  print $query-&gt;header(-type =&gt; ’text/xml’, -charset =&gt; ’utf-8’, -status =&gt; 200);
  print $op-&gt;toString();
</pre>
<p><b>Public Methods</b> available to CGI scripts using UMProvider:
</p>
<ul><li>new(): Creates a new UMProvider object
</li></ul>
<pre>
  $op-&gt;new( hash_ref )
          { configFile =&gt; &quot;oai_provider_conf.xml&quot;,
            logFile    =&gt; &quot;oai_provider.log&quot;,
            url        =&gt; &quot;http://some.url.org/OAI&quot;,
            arguments  =&gt; $args, ($args-&gt;{verb} = &quot;ListSets&quot;)

            ## optional
            maxItems     =&gt; 500,                   ## default 100
            tableName    =&gt; &quot;my_oai&quot;,              ## default &quot;oai&quot;
            setTableName =&gt; &quot;my_oaisets&quot;,          ## default &quot;oaisets&quot;
            DBDriver     =&gt; &quot;SQLite&quot;,              ## default &quot;mysql&quot;
            shortDate    =&gt; 1                      ## use the short date format YYYY-MM-DD (no time)
            DbUpdate     =&gt; &quot;2007-12-25 10:00:01&quot;, ## default to check update time of table
          }
</pre>
<p><b>Note:</b> When the database table holding the OAI data is altered (<b>Update_time</b> changes for the table), any outstanding resumptionTokens become invalid.  If your data is constantly updated, or the OAI table is frequently updated for some reason other than data changes, use the optional <b>DbUpdate</b> time in your CGI script.
</p>
<ul><li>ConnectToDb(): Connect to the database
</li></ul>
<pre>$op-&gt;ConnectToDb( $db_user, $db_passwd, $db_name, $db_server )</pre>
<ul><li>$op-&gt;BuildResponse(): Builds a response based on the cgi parameters passed in from new().  If a problem is found, an OAI error node is created and added to the response object.
</li></ul>
<ul><li>$op-&gt;toString(): Serialize the response.
</li></ul>
<ul><li>$op-&gt;DisconnectDb(): Disconnect from the database.  The connection to the DB should be closed when the CGI script terminates.  This may be useful if your CGI script is doing something else after getting the response from the UMProvider object.
</li></ul>
<a name="Configuration"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=6" title="Edit section: Configuration">edit</a>]</span> <span class="mw-headline">Configuration</span></h3>
<p>The UMProvider configuration contains information about the repository for the Identify, ListSets and ListMetadataFormats OAI-PMH verb responses. This data is not really dynamic so it is just stored in an XML configuration file.
</p>
<ul><li> <tt># cd $DLXSROOT/cgi/o/oai/</tt>
</li><li> <tt># cp sample_config.xml oai_conf.xml</tt>
</li><li> edit oai_config.xml
</li></ul>
<p>Information on the values you should use within the <i>Identify</i> section can be found <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#Identify" class="external text" title="http://www.openarchives.org/OAI/openarchivesprotocol.html#Identify" rel="nofollow">here</a>.  Sets are optional in OAI-PMH so the <i>&lt;ListSets&gt;</i> section can be left empty.  More information about sets in OAI-PMH can be found <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListSets" class="external text" title="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListSets" rel="nofollow">here</a>.  The <i>&lt;possibleMetadataFormats&gt;</i> section should list <i>oai_dc</i> and any other metadata formats that you choose to provide.  Information about metadata formats can be found <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListMetadataFormats" class="external text" title="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListMetadataFormats" rel="nofollow">here</a>.
</p><p>Test the configuration with the following OAI requests:
</p>
<pre>
  http://your.host.org/cgi/o/oai/oai?verb=Identify
  http://your.host.org/cgi/o/oai/oai?verb=ListSets
  http://your.host.org/cgi/o/oai/oai?verb=ListMetadataFormats 
</pre>
<p><i>Sample config file:</i>
</p>
<pre>
        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
        &lt;oai_config&gt;
          &lt;Identify&gt;
            &lt;repositoryName&gt;Your Repository&lt;/repositoryName&gt;
            &lt;baseURL&gt;http://your.host.edu/OAI&lt;/baseURL&gt;
            &lt;protocolVersion&gt;2.0&lt;/protocolVersion&gt;
            &lt;adminEmail&gt;you@your.edu&lt;/adminEmail&gt;
            &lt;earliestDatestamp/&gt;
            &lt;deletedRecord&gt;transient&lt;/deletedRecord&gt;
            &lt;granularity&gt;YYYY-MM-DDThh:mm:ssZ&lt;/granularity&gt;
            &lt;description&gt;
              &lt;oai-identifier xmlns=&quot;http://www.openarchives.org/OAI/2.0/oai-identifier&quot;
                  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
                  xsi:schemaLocation=&quot;http://www.openarchives.org/OAI/2.0/oai-identifier
                  http://www.openarchives.org/OAI/2.0/oai-identifier.xsd&quot;&gt;
                &lt;scheme&gt;oai&lt;/scheme&gt;
                &lt;repositoryIdentifier&gt;your.host.edu&lt;/repositoryIdentifier&gt;
                &lt;delimiter&gt;:&lt;/delimiter&gt;
                &lt;sampleIdentifier&gt;oai:your.host.edu:000000001&lt;/sampleIdentifier&gt;
              &lt;/oai-identifier&gt;
            &lt;/description&gt;
          &lt;/Identify&gt;
          &lt;ListSets&gt;
            &lt;set&gt;
              &lt;setSpec&gt;foo&lt;/setSpec&gt;
              &lt;setName&gt;All things of foo&lt;/setName&gt;
            &lt;/set&gt;
            &lt;set&gt;
              &lt;setSpec&gt;bar&lt;/setSpec&gt;
              &lt;setName&gt;All things of bar&lt;/setName&gt;
            &lt;/set&gt;
          &lt;/ListSets&gt;
          &lt;PossibleMetadataFormats&gt;
            &lt;metadataFormat&gt;
              &lt;metadataPrefix&gt;oai_dc&lt;/metadataPrefix&gt;
              &lt;schema&gt;http://www.openarchives.org/OAI/2.0/oai_dc.xsd&lt;/schema&gt;
              &lt;metadataNamespace&gt;http://www.openarchives.org/OAI/2.0/oai_dc&lt;/metadataNamespace&gt;
            &lt;/metadataFormat&gt;
            &lt;metadataFormat&gt;
              &lt;metadataPrefix&gt;marc21&lt;/metadataPrefix&gt;
              &lt;schema&gt;http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd&lt;/schema&gt;
              &lt;metadataNamespace&gt;http://www.loc.gov/MARC21/slim&lt;/metadataNamespace&gt;
            &lt;/metadataFormat&gt;
          &lt;/PossibleMetadataFormats&gt;
        &lt;/oai_config&gt;
</pre>
<a name="LoadOai.pl"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=7" title="Edit section: LoadOai.pl">edit</a>]</span> <span class="mw-headline">LoadOai.pl</span></h2>
<p>This is a generic example script for loading data.  The script looks for XML files in the data directory (<i>data dir</i>) and loads each record into the <i>oai</i> and <i>oaisets</i> tables.  Before using this script you must change the DB connection settings at the top:
</p>
<pre>
  my $dbUser   = &quot;user&quot;;
  my $dbPasswd = &quot;passwd&quot;;
  my $dbName   = &quot;foo&quot;;
  my $dbServer = &quot;bar&quot;;
</pre>
<p>The available arguments for the script are:
</p>
<pre>
  -d data dir (place to find the XML data)
  -s oai set (optional)
  -h (help: message printed)
  -v (verbose output)
</pre>
<p>The only required argument is the data dir (-d).
</p><p>All of the data within and including the &lt;metadata&gt; element is loaded into the DB under the specified format.  The script should be able to identify <i>oai_dc</i> and <i>marc21</i> but any other metadata format may require code modifications.  This data is not validated or checked in any way other than to make sure it is well formed XML.
</p><p>If the oai set option (-s) is used, the setSpec is ignored in the <b>/record/header/</b> element for all records being loaded.
</p><p>For the identifier, the script only uses anything after the last ":" (oai:host:id).  The "oai:host:" part is added on to the identifier by the UMProvider.
</p>
<ul><li>DB Format (see above under UMProvider)
</li></ul>
<ul><li>XML Format
</li></ul>
<p>The XML files must have the OAI record elements wrapped in a <b>&lt;record&gt;</b> element (just like OAI-PMH 2.0).  By default, this script will look for record elements wrapped in a <b>&lt;records&gt;</b> tag.  If you have the data nested some other way, just change the <code>$recordXpath</code> value in the script to the correct xpath for finding the <b>&lt;record&gt;</b> elements.  There can be multiple record elements in a single file as well as multiple XML files in the data directory.  Here’s an example XML file:
</p>
<pre>
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
    &lt;records&gt;
      &lt;record&gt;
        &lt;header&gt;
          &lt;identifier&gt;oai:some.host.edu:id-1234&lt;/identifier&gt;
          &lt;setSpec&gt;foo&lt;/setSpec&gt;
        &lt;/header&gt;
        &lt;metadata&gt; [ ... ]
        &lt;/metadata&gt;
      &lt;/record&gt;
      &lt;record&gt; [ ... ] &lt;/record&gt;
    &lt;/records&gt;
</pre>
<a name="Record_Loader_.28PHP.29"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit&amp;section=8" title="Edit section: Record Loader (PHP)">edit</a>]</span> <span class="mw-headline">Record Loader (PHP)</span></h2>
<p>Lisa Brooks at <a href="http://issuelab.org/" class="external text" title="http://issuelab.org" rel="nofollow">IssueLab</a> has created an open source PHP script for loading records into a database for the UMProvider.  This can be used as an alternative to the Perl script (LoadOai.pl) described above.  
</p><p>The script along with detailed instruction can be found here:  <a href="http://harvest.issuelab.org/software.php" class="external free" title="http://harvest.issuelab.org/software.php" rel="nofollow">http://harvest.issuelab.org/software.php</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 63/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki_dlxsdocs_15:pcache:idhash:305-0!1!0!!en!2 and timestamp 20250202211435 -->
<div class="printfooter">
Retrieved from "<a href="OAI_Provider.html">http://localhost/wiki/OAI_Provider</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="OAI_Provider.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://localhost/mediawiki/index.php?title=Talk:OAI_Provider&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://localhost/mediawiki/index.php?title=Special:UserLogin&amp;returnto=OAI_Provider" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../dlxs15/uploads/DLXS_logo2.gif);" href="Main_Page.html" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a href="DLXS_Documentation_Community_Portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="DLXS_Documentation_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Mounting_a_Bib_Class_Collection.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help_Contents.html" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://localhost/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search DLXS Documentation [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/OAI_Provider.html" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/OAI_Provider.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://localhost/mediawiki/index.php?title=OAI_Provider&amp;oldid=3060" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 28 October 2010, at 19:31.</li>
				<li id="viewcount">This page has been accessed 12,119 times.</li>
				<li id="privacy"><a href="DLXS_Documentation_Privacy_policy.html" title="DLXS Documentation:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="DLXS_Documentation_About.html" title="DLXS Documentation:About">About DLXS Documentation</a></li>
				<li id="disclaimer"><a href="DLXS_Documentation_General_disclaimer.html" title="DLXS Documentation:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.344 secs. --></body>
<!-- Mirrored from localhost/wiki/OAI_Provider by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:29:39 GMT -->
</html>
