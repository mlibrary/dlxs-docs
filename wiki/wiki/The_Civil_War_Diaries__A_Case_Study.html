<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from localhost/wiki/The_Civil_War_Diaries:_A_Case_Study by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:31:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.5" />
		<meta name="keywords" content="The Civil War Diaries: A Case Study,Case Studies,DLXS Wiki" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/mediawiki/opensearch_desc.php" title="DLXS Documentation (en)" />
		<link rel="alternate" type="application/rss+xml" title="DLXS Documentation RSS Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="DLXS Documentation Atom Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>The Civil War Diaries: A Case Study - DLXS Documentation</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../mediawiki/skins/common/sharedfa7c.css?164";
			@import "../mediawiki/skins/monobook/mainfa7c.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../mediawiki/skins/common/commonPrintfa7c.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/monobook/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/monobook/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/mediawiki/skins";
var wgArticlePath = "/wiki/$1";
var wgScriptPath = "/mediawiki";
var wgScript = "http://localhost/mediawiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "The_Civil_War_Diaries:_A_Case_Study";
var wgTitle = "The Civil War Diaries: A Case Study";
var wgAction = "view";
var wgArticleId = "82";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "2943";
var wgVersion = "1.13.5";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="../mediawiki/skins/common/wikibitsfa7c.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="../mediawiki/skins/common/ajaxfa7c.js?164"></script>
		<script type="text/javascript" src="http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000&amp;useskin=monobook";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-The_Civil_War_Diaries_A_Case_Study">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">The Civil War Diaries: A Case Study</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From DLXS Documentation</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="Case_Studies.html" title="Case Studies">Case Studies</a> &gt; The Civil War Diaries: A Case Study
</p>
<hr />
<p>The Civil War Diaries is a DLXS client web site that we are providing here as a case study.
</p><p>Leaving aside all the markup issues that are inherent in this project and generally outside the scope of the interface designer (but which nonetheless have major impact on usability), the changes that the client's staff asked for provide a nice primer on things that generally can be altered in the interface.  
</p><p>This was project initially put online with a minimal interface with minimal options.  There was no browsing (as we started with one diary, it seemed pointless).  The basic search was available within “full text” with searches limited by author, title, and citation.  KWICs were enabled for results, and notes were shown as inline. 
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Add_browses.2C_change_notes_to_pop-ups"><span class="tocnumber">1</span> <span class="toctext">Add browses, change notes to pop-ups</span></a></li>
<li class="toclevel-1"><a href="#Additional_.E2.80.9Csearch_within.E2.80.9D_values"><span class="tocnumber">2</span> <span class="toctext">Additional “search within” values</span></a></li>
<li class="toclevel-1"><a href="#More_explicit_division_headings_for_DIVs_with_no_HEADs"><span class="tocnumber">3</span> <span class="toctext">More explicit division headings for DIVs with no HEADs</span></a></li>
<li class="toclevel-1"><a href="#Customized_phrase-level_markup_rendering_styles"><span class="tocnumber">4</span> <span class="toctext">Customized phrase-level markup rendering styles</span></a></li>
<li class="toclevel-1"><a href="#Removal_of_redundant_page_labels"><span class="tocnumber">5</span> <span class="toctext">Removal of redundant page labels</span></a></li>
<li class="toclevel-1"><a href="#Pop-up_the_regularized_forms_of_names"><span class="tocnumber">6</span> <span class="toctext">Pop-up the regularized forms of names</span></a></li>
<li class="toclevel-1"><a href="#Customized_browses_in_addition_to_author.2Ftitle"><span class="tocnumber">7</span> <span class="toctext">Customized browses in addition to author/title</span></a></li>
<li class="toclevel-1"><a href="#Banners.2C_tab_colors.2C_and_customized_TOC_view"><span class="tocnumber">8</span> <span class="toctext">Banners, tab colors, and customized TOC view</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Add_browses.2C_change_notes_to_pop-ups"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=1" title="Edit section: Add browses, change notes to pop-ups">edit</a>]</span> <span class="mw-headline">Add browses, change notes to pop-ups</span></h2>
<p>The client immediately asked that a browse be provided and that notes not show inline.  These are simple changes in the collmgr’s  browseable/browsenav and displaynotesinline fields.  browseable was set to yes and browsenav was set to 0 (as there will only ever be a handful of diaries, the alphabetic rulers seemed like overkill); displaynotesinline was set to no.  The browse script (in /l1/bin/browse) was then run to populate the browse table.
</p><p><a href="Image_Civilwar1.html" class="image" title="Image:civilwar1.jpg"><img alt="Image:civilwar1.jpg" src="../mediawiki/images/d/d2/Civilwar1.jpg" width="433" height="359" border="0" /></a>
</p>
<a name="Additional_.E2.80.9Csearch_within.E2.80.9D_values"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=2" title="Edit section: Additional “search within” values">edit</a>]</span> <span class="mw-headline">Additional “search within” values</span></h2>
<p>The client next asked that we add subject as an option for “Search in” and “Limit to.”  This requires that “subject” be added to the collmgr’s  bibsearch and termsearch fields.  However, for this to function properly and not simply appear in the pulldown menu, you also need a mapping in the mapfile for the collection to direct the search to the proper elements in the indexed text.  civilwar1 initially used the philamer.map, but it was clear that this will be a collection with a fair amount of customization and will require a mapfile of its own (/l1/misc/t/text/maps/civilwar1.map). At this point (with only one diary in hand), the subject mapping could safely be defined as 
</p>
<pre> &lt;mapping&gt;
   &lt;label&gt;subject&lt;/label&gt;
   &lt;synthetic&gt;SUBJECT&lt;/synthetic&gt;
   &lt;native&gt;region TERM&lt;/native&gt;
   &lt;nativeregionname&gt;TERM&lt;/nativeregionname&gt;
 &lt;/mapping&gt;
</pre>
<p>However, it seems that the markup in the collection is elaborate enough that TERM elements may eventually appear in places aside from the KEYWORDS element in the HEADER (the canonical location for subject terms), so it is more prudent to provide a more specific mapping.
</p>
<pre> &lt;mapping&gt;
   &lt;label&gt;subject&lt;/label&gt;
   &lt;synthetic&gt;SUBJECT&lt;/synthetic&gt;
   &lt;native&gt;region subject&lt;/native&gt;
   &lt;nativeregionname&gt;subject&lt;/nativeregionname&gt;
 &lt;/mapping&gt;
</pre>
<p>This required a fabricated region “subject” be created in the extra.srch file: 
</p><p><code>(region TERM within region KEYWORDS); {exportfile "/l1/idx/c/civilwar1/subject.rgn"}; export; ~sync "subject";</code>
</p><p>and that the “make post” indexing step be rerun.
</p><p><br />
</p>
<a name="More_explicit_division_headings_for_DIVs_with_no_HEADs"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=3" title="Edit section: More explicit division headings for DIVs with no HEADs">edit</a>]</span> <span class="mw-headline">More explicit division headings for DIVs with no HEADs</span></h2>
<p>The client also asked if we could do something about the headings appearing in results lists and the TOC view.   Generally, the headings are pulled from the “div1head” region et al (depending on how deeply subdivided a text is, you can have div2head, div3head, etc.), which is defined as the HEAD element in a given DIV1 or the tag itself if there is no HEAD.  This diary has no HEADs, but the encoders have provided a TYPE of “entry” for each DIV1, along with the ISO date in the N attribute, so the tag looks like:
</p><p><code>&lt;DIV1 NODE="USCW0001.0001.001:34" TYPE="entry" N="1862-09-14"&gt;</code>
</p><p>However, general DLXS settings show only the TYPE attribute in the absence of a HEAD:
</p><p><a href="Image_Civilwar2.html" class="image" title="Image:civilwar2.jpg"><img alt="Image:civilwar2.jpg" src="../mediawiki/images/3/39/Civilwar2.jpg" width="433" height="358" border="0" /></a> 
</p><p>In order to locate where such styles are handled, grepping for TYPE within the XSL stylesheets in the <code>/l1/web/t/text</code> directory is almost always fruitful.  The proper file in this case is <code>scopedivs.xsl</code>, as what needs to be changed is the label for the “scoped heads” as they are generally referred to in DLXS.  A local version of the <code>scopedivs.xsl</code> was created in the web directory for civilwar1.  It imports the main <code>scopedivs.xsl</code> and contains only the altered “Divhead” template.  The top of the file is as follows:
</p>
<pre>  &lt;?xml version="1.0" encoding="UTF-8"&nbsp;?&gt;
  &lt;xsl:stylesheet version="1.0" 
   xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" class="external free" title="http://www.w3.org/1999/XSL/Transform" rel="nofollow">http://www.w3.org/1999/XSL/Transform</a>" 
   xmlns:func="<a href="http://exslt.org/functions" class="external free" title="http://exslt.org/functions" rel="nofollow">http://exslt.org/functions</a>" 
   xmlns:dlxs="<a href="http://dlxs.org/" class="external free" title="http://dlxs.org" rel="nofollow">http://dlxs.org</a>"
   extension-element-prefixes="func dlxs" 
   exclude-result-prefixes="func dlxs"&gt;
   
   &lt;xsl:import href="../../t/text/scopedivs.xsl"/&gt;
   
   &lt;xsl:strip-space elements="*"/&gt;
   
   &lt;xsl:template match="BuildDivHeadLinkLabel"&gt;
</pre>
<p><code>scopedivs.xsl</code> is very complicated as a whole, as it involves printing the labels and building the links whether there are HEAD elements or not, whether we are dealing with serial articles or not, etc.  However, the small portion that is relevant here is fairly straightforward, and again, searching for TYPE and realizing that you are concerned with the cases where DIVs have no HEADs will steer you to the proper portion of the template:
</p><p><a href="Image_Civilwarcode1.html" title="Image:Civilwarcode1.tiff">Image:Civilwarcode1.tiff</a>
</p><p><br />
So, if there is no child HEAD and the TYPE is not “entry”, show the value of the TYPE attribute (example 1. above).  If there is no child HEAD and the TYPE is “entry”, show the value of the TYPE attribute followed by a colon and space and then the value of the N attribute (example 2. above).  The remainder of the template deals with cases where there is neither a HEAD nor a TYPE (print the word “Section”) and those cases where there are HEADs, in which case it will  show each HEAD (some DIVs may have more than one)  separated by non-breaking spaces (&#xa0;). 
</p><p>Here is the results list after the <code>scopedivs.xsl</code> for civilwar1 is placed into its web directory:
</p><p><a href="Image_Civilwar3.html" class="image" title="Image:civilwar3.jpg"><img alt="Image:civilwar3.jpg" src="../mediawiki/images/d/d7/Civilwar3.jpg" width="433" height="389" border="0" /></a>
</p>
<a name="Customized_phrase-level_markup_rendering_styles"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=4" title="Edit section: Customized phrase-level markup rendering styles">edit</a>]</span> <span class="mw-headline">Customized phrase-level markup rendering styles</span></h2>
<p>The diary entries have a great deal of markup of individual words and phrases.  Place names, personal names, dates, etc., are all wrapped in elements and have attributes expanding or clarifying them (creating a de facto authority file); additions and deletions (using the ADD and DEL elements of the TEI), and switches in handwriting (for example, <code>&lt;HI1 REND=“underlined”&gt;</code> or <code>&lt;HI1 REND=“superscript”&gt;</code>) are all captured as well.   Such things are present in the basic DLXS package, but because the client’s encoding practices vary from our standard, more customizations needed to be made.  The most straightforward is that the appropriate REND behaviors were not present; things marked as superscript or underlined appeared as plain text.  
</p><p>Rendering of elements gets handled in the XSL as a conversion to HTML that will be treated by CSS.  That is, the <code>&lt;HI1 REND="superscript"&gt;st&lt;/HI1&gt;</code> in the XML gets converted to <span class="rend-superscript">st</span> (essentially, it takes the content of the element, wraps it in a span, and gives it a class of rend-hyphen-“value of the REND attribute”).  Our CSS files didn’t have a class of “rend-superscript” – rend-sup and rend-super were there, though, since we tend to abbreviate such values – so a textclass-specific.css file was needed for the collection.   Again, since it was clear there would be more custom styling to come, it seemed best to copy the whole “rend styles” section of the textclass.css: 
</p><p><a href="Image_Civilwarcode2.html" title="Image:Civilwarcode2.tiff">Image:Civilwarcode2.tiff</a>
</p><p><br />
All of the renderings needed were already present in the CSS; the more verbose class names merely needed to be added to the existing groups.   Note superscripting of the dates on the first line:
</p><p><a href="Image_Civilwar4.html" class="image" title="Image:civilwar4.jpg"><img alt="Image:civilwar4.jpg" src="../mediawiki/images/4/48/Civilwar4.jpg" width="433" height="390" border="0" /></a>
</p><p>Note the phrase “in the morning” in red above, which is encoded with an ADD element.  This was not how the client's staff envisioned additions appearing; they also wanted deletions to be shown with a strike-through, which had been considered but rejected as possibly too illegible by previous DLPS interface designers.  Phrase-level markup is generally handled in <code>text.components.xsl</code>, and as with the changes to the div1heads, a custom version of the stylesheet was created for the collection and placed in /l1/web/c/civilwar1.  Here is the beginning of the file:
</p>
<pre>   &lt;?xml version="1.0" encoding="UTF-8"&nbsp;?&gt;
   &lt;xsl:stylesheet version="1.0"
   xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" class="external free" title="http://www.w3.org/1999/XSL/Transform" rel="nofollow">http://www.w3.org/1999/XSL/Transform</a>"
   xmlns:func="<a href="http://exslt.org/functions" class="external free" title="http://exslt.org/functions" rel="nofollow">http://exslt.org/functions</a>"
   xmlns:dlxs="<a href="http://www.umdl.umich.edu/dlxs" class="external free" title="http://www.umdl.umich.edu/dlxs" rel="nofollow">http://www.umdl.umich.edu/dlxs</a>"
   extension-element-prefixes="func"
   exclude-result-prefixes="func dlxs"&gt;
   
   &lt;xsl:import href="../../t/text/text.components.xsl"/&gt;
</pre>
<p>The new definitions for the conversion of the XML to HTML were added to the collection-specific stylesheet:
</p>
<pre>  &lt;xsl:template match="DEL"&gt;
      &lt;S&gt;&lt;xsl:apply-templates/&gt;&lt;/S&gt;
  &lt;/xsl:template&gt;
   
  &lt;xsl:template match="ADD"&gt;
         &lt;span class="rend-superscript"&gt;&lt;xsl:apply-templates/&gt;&lt;/span&gt;
  &lt;/xsl:template&gt;
</pre>
<p>Now added text is shown as superscript:
</p><p><a href="Image_Civilwar5.html" class="image" title="Image:civilwar5.jpg"><img alt="Image:civilwar5.jpg" src="../mediawiki/images/f/fa/Civilwar5.jpg" width="433" height="390" border="0" /></a>
</p>
<a name="Removal_of_redundant_page_labels"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=5" title="Edit section: Removal of redundant page labels">edit</a>]</span> <span class="mw-headline">Removal of redundant page labels</span></h2>
<p>Because the client's staff had provided page labels in their PB attribute values, links to page images had redundant descriptive language:
</p><p><a href="Image_Civilwar6.html" class="image" title="Image:civilwar6.jpg"><img alt="Image:civilwar6.jpg" src="../mediawiki/images/3/3e/Civilwar6.jpg" width="433" height="390" border="0" /></a>
</p><p>Labels like this are contained in the langmap file found in <code>/l1/web/t/text</code>.  The label is defined there as <code>&lt;Item key=”headerutils.st.page”&gt;Page &lt;/Item&gt;</code>. To override the labels available for all of Text Class in general, a langmapextra.en.xml file was placed in <code>/l1/web/c/civilwar1</code> containing the following empty descriptor:
</p><p><code>&lt;Item key="headerutils.str.page"&gt; &lt;/Item&gt;</code>
</p><p>This provides a slightly cleaner link
</p><p><a href="Image_Civilwar7.html" class="image" title="Image:civilwar7.jpg"><img alt="Image:civilwar7.jpg" src="../mediawiki/images/7/70/Civilwar7.jpg" width="433" height="390" border="0" /></a>
</p>
<a name="Pop-up_the_regularized_forms_of_names"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=6" title="Edit section: Pop-up the regularized forms of names">edit</a>]</span> <span class="mw-headline">Pop-up the regularized forms of names</span></h2>
<p>As mentioned before, the client's staffers have encoded many names – of battles, people, and places – to specifically identify them by providing regularized versions of the names, like 
</p><p><code>&lt;NAME TYPE="place" REG="Jeffersonville (Ind.)"&gt; Jeffersonville&lt;/NAME&gt; and &lt;NAME TYPE="person" REG="Davis, Jefferson Columbus, 1828-1879"&gt;Genl.&lt;LB/&gt;Jeff C. Davis&lt;/NAME&gt;.</code>
</p><p>They wanted the regularized forms to “pop up” when the user clicked on the names.  Because of our institutional commitment to minimize the use of javascript, we decided to try using CSS “tooltips” to provide this functionality.  In the interface, the NAMEs are underscored with a dashed line and a text box containing the normalized value pops up when the user mouses over the NAME; the name itself is highlighted.  In the example below, the third NAME is being moused over; you can see that there are two other normalized names in the entry.  (The word “wagon” is highlighted in yellow because it was the search term that led to this entry.)
</p><p><a href="Image_Civilwar8.html" class="image" title="Image:civilwar8.jpg"><img alt="Image:civilwar8.jpg" src="../mediawiki/images/a/ac/Civilwar8.jpg" width="433" height="392" border="0" /></a>
</p><p>Implementing the tooltips is a two-step process.  First, a template for NAME needed to be added to the text.components.xsl in /l1/web/c/civilwar1:
</p>
<pre>   &lt;xsl:template match="DIV1//NAME"&gt;
   &lt;a class="info" href="#"&gt;&lt;xsl:value-of select="."/&gt;<span>&lt;xsl:value-of select="@
   REG"/&gt;</span>&lt;/a&gt;
   &lt;/xsl:template&gt;
</pre>
<p>This wraps the content of the NAME element in an &lt;a&gt; tag and places the content of the REG attribute in a <span> tag.  The examples from above become
</p><p><tt>&lt;a class=”info” href="#"&gt; Jeffersonville <span>Jeffersonville (Ind.)</span>&lt;/a&gt; and &lt;a class=”info” href="#"&gt;Genl.&lt;LB/&gt;Jeff C. Davis <span>Davis, Jefferson Columbus, 1828-1879</span>&lt;/a&gt;.</tt>
</p><p>Then, the following styles need to be added to the <tt>textclass.specific.css</tt> file in <tt>/l1/web/c/civilwar1</tt>:
</p>
<pre>   a.info{
       position:relative; /*this is the key*/
       z-index:24;
       color:#000;
       border-bottom:1px dashed #000;
       text-decoration:none}
   
   a.info:hover{z-index:25; background-color: #dad1b2;}
   
   a.info span{display: none}
   
   a.info:hover span{ /*the span will display just on&nbsp;:hover state*/
       display:block;
       position:absolute;
       top:2em; left:2em; width:15em;
       border:1px solid #dad1b2;
       background-color: #f5f5dc; color:#000;
       text-align: center;
       text-decoration:none}
</pre>
<a name="Customized_browses_in_addition_to_author.2Ftitle"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=7" title="Edit section: Customized browses in addition to author/title">edit</a>]</span> <span class="mw-headline">Customized browses in addition to author/title</span></h2>
<p>In addition to regularized forms of names, the client's staff had identified topics within the diary entries.  This had been done using SEGs for topics. For example:
</p><p><tt>&lt;SEG TYPE="transportation"&gt;crossed on boats&lt;/SEG&gt;</tt>
</p><p>in addition to the  NAMEs mentioned above:
</p><p><tt>&lt;NAME TYPE="battles" ID="battles4" REG="Perryville, Battle of, Perryville, Ky., 1862"&gt;battleground&lt;/NAME&gt;</tt>.
</p><p>They wanted to have indexes of these values that users could browse, as well as the usual browse list of diary authors and titles.  This meant that customized browse pages needed to be built.  This hybrid approach makes use of the automatic browse building, plus additional hand-coded HTML pages, with links to the other browse pages either coded in the HTML or supplied by a collection-specific browse.xsl in <tt>/l1/web/c/civilwar1</tt>.
</p><p>So, in addition to my first steps in customization of setting browseable to yes and browsenav to 0 in collmgr, I created three HTML pages: browse.html, browsetopic.html, and browsename.html.  browse.html is a file that links to all the browse options, including the cgi-driven option:
</p><p><tt>&lt;A HREF="/cgi/t/text/text-idx?page=browse;c=civilwar1"&gt;Browse the Civil War Diaries by author/title&lt;/A&gt;</tt>
</p><p><tt>browsename.html</tt> and <tt>browsetopic.html</tt> are basically canned searches that will take users to the diary entries containing those names or topics.  They were created by using xpatu to pull the values out of the collection and then wrapping them in the necessary HTML and cgi values.  All the data is as it was provided in the collection, with no change of capitalization, pluralization, etc.
</p><p><a href="Image_Civilwarcode4.html" title="Image:Civilwarcode4.tiff">Image:Civilwarcode4.tiff</a>
</p><p><a href="Image_Civilwarcode5.html" title="Image:Civilwarcode5.tiff">Image:Civilwarcode5.tiff</a>
</p><p><br />
The links to the other browse options are part of the HTML code (circled in the HTML provided above).  
</p><p><a href="Image_Civilwar9.html" class="image" title="Image:civilwar9.jpg"><img alt="Image:civilwar9.jpg" src="../mediawiki/images/2/28/Civilwar9.jpg" width="433" height="393" border="0" /></a>
</p><p>In the browse by author/title page generated by running the browsebuilder, links to the hand-coded browse options are provided by placing a collection-specific <tt>browse.xsl</tt> into <tt>/l1/web/c/civilwar1</tt>:
</p>
<pre>   &lt;xsl:stylesheet version="1.0" xmlns:xsl=<a href="http://www.w3.org/1999/XSL/Transform" class="external free" title="http://www.w3.org/1999/XSL/Transform" rel="nofollow">http://www.w3.org/1999/XSL/Transform</a>
   xmlns:exsl="<a href="http://exslt.org/common" class="external free" title="http://exslt.org/common" rel="nofollow">http://exslt.org/common</a>"&gt;
   &lt;xsl:import href="../../t/text/browse.xsl"/&gt;
   
   &lt;xsl:template name="collSpecificText"&gt;
   &lt;xsl:text&gt; | &lt;/xsl:text&gt;&lt;xsl:element name="a"&gt;
   &lt;xsl:attribute name="href"&gt;&lt;xsl:text&gt;/c/civilwar1/browsename.html&lt;/xsl:text&gt;&lt;/xsl:attribute&gt;
   Browse by Name&lt;/xsl:element&gt;&lt;xsl:text&gt; | &lt;/xsl:text&gt;
   &lt;xsl:element name="a"&gt;
   &lt;xsl:attribute name="href"&gt;&lt;xsl:text&gt;/c/civilwar1/browsetopic.html&lt;/xsl:text&gt;&lt;/xsl:attribute&gt;
   Browse by Topic &lt;/xsl:element&gt;&lt;/xsl:template&gt;
   &lt;/xsl:stylesheet&gt;

</pre>
<p><a href="Image_Civilwar10.html" class="image" title="Image:civilwar10.jpg"><img alt="Image:civilwar10.jpg" src="../mediawiki/images/2/2f/Civilwar10.jpg" width="433" height="393" border="0" /></a>
</p>
<a name="Banners.2C_tab_colors.2C_and_customized_TOC_view"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit&amp;section=8" title="Edit section: Banners, tab colors, and customized TOC view">edit</a>]</span> <span class="mw-headline">Banners, tab colors, and customized TOC view</span></h2>
<p>The client staffers wanted to make aesthetic changes to the site, with a graphical banner instead of the plain text “Civil War Diaries” and matching the tabs to the color scheme of the banner.  Additionally, because the diaries are previously unpublished, many of the labels that come “out of the box” in DLXS were not quite appropriate.  
</p><p>Changing the banner was very simple – the banner (named banner.jpg) they provided was placed into the directory <tt>/l1/web/c/civilwar1/graphics</tt> and the collmgr primarytitle was changed to read <tt>graphic:banner.jpg</tt>.  
</p><p>The colors of the navigation tabs were changed in the textclass-specific.css file.  
</p>
<pre>   /* STYLES FOR NAVIGATION AND MENUS   */
   td.mainnavcell {
   background-color: #A2A0AB;
   padding-left:20px;
   padding-right:20px;
   border-bottom: 1px solid #666666;}
   
   .navcolor { background-color: #8A7B90; }
</pre>
<p>Because their banner was taller than the 60 px maximum we budget for in the page layout, we needed to add information about the optimum frame spacing in pageviewer, or the navigation bars get hidden by the page images.  In the directory <tt>/l1/web/c/civilwar1/</tt> is a file called <tt>pageviewerextra.xml</tt> which contains the following information:
</p>
<pre> &lt;Viewer&gt;
   &lt;Frameset&gt;
     &lt;Rows&gt;
       &lt;Pdf&gt;300&lt;/Pdf&gt;
       &lt;NonPdf&gt;200&lt;/NonPdf&gt;
     &lt;/Rows&gt;
   &lt;/Frameset&gt;
 &lt;/Viewer&gt;
</pre>
<p>Here is the look with the new banner and color scheme:
</p><p><a href="Image_Civilwar11.html" class="image" title="Image:civilwar11.jpg"><img alt="Image:civilwar11.jpg" src="../mediawiki/images/a/a8/Civilwar11.jpg" width="431" height="310" border="0" /></a>
</p><p>The client wanted to suppress some existing metadata (Print source) and show additional pieces of the metadata in the header, so a collection-specific version of tocheader.xsl was placed in the <tt>l1/web/c/civilwar1</tt> directory.   In the place of Print source, which shows metadata from the SOURCEDESC, they wanted to display their notes.  A template was added for notes:
</p>
<pre>   &lt;xsl:template match="NOTE"&gt;
       &lt;xsl:apply-templates/&gt;
   &lt;/xsl:template&gt;
</pre>
<p>which was called instead of the SOURCEDESC, after AVAILABILITY:
</p>
<pre>   &lt;xsl:variable name="availability"&gt;
     &lt;xsl:copy-of select="HEADER/FILEDESC/PUBLICATIONSTMT/AVAILABILITY/P"/&gt;
   &lt;/xsl:variable&gt;
   &lt;xsl:variable name="notesstmt"&gt;
     &lt;xsl:copy-of select="HEADER/FILEDESC/NOTESSTMT/NOTE"/&gt;
   &lt;/xsl:variable&gt;
</pre>
<p>Labels for various metadata sections were also changed, as they wanted Publisher instead of Publication Info and Rights instead of Availability.  This was done in the langmapextra.en.xml, which had been previously created to change the PB metadata filtering.  
</p>
<pre>   &lt;ColLookupTables&gt;
      &lt;Lookup id="headerutils"&gt;
   &lt;Item key="headerutils.str.page"&gt; &lt;/Item&gt;
   &lt;Item key="headerutils.str.publicationinfo"&gt;Publisher&lt;/Item&gt;
   &lt;Item key="headerutils.str.22"&gt;Rights&lt;/Item&gt;
   &lt;Item key="civil.str.notes"&gt;Notes&lt;/Item&gt;
     &lt;/Lookup&gt;
   &lt;/ColLookupTables&gt;
</pre>
<p><a href="#top" title="">Top</a></span>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 48/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki_dlxsdocs_15:pcache:idhash:82-0!1!0!!en!2 and timestamp 20250202211526 -->
<div class="printfooter">
Retrieved from "<a href="The_Civil_War_Diaries__A_Case_Study.html">http://localhost/wiki/The_Civil_War_Diaries:_A_Case_Study</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="The_Civil_War_Diaries__A_Case_Study.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://localhost/mediawiki/index.php?title=Talk:The_Civil_War_Diaries:_A_Case_Study&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://localhost/mediawiki/index.php?title=Special:UserLogin&amp;returnto=The_Civil_War_Diaries:_A_Case_Study" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../dlxs15/uploads/DLXS_logo2.gif);" href="Main_Page.html" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a href="DLXS_Documentation_Community_Portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="DLXS_Documentation_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Mounting_a_Bib_Class_Collection.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help_Contents.html" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://localhost/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search DLXS Documentation [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/The_Civil_War_Diaries__A_Case_Study.html" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/The_Civil_War_Diaries__A_Case_Study.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://localhost/mediawiki/index.php?title=The_Civil_War_Diaries:_A_Case_Study&amp;oldid=2943" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 17 June 2010, at 20:11.</li>
				<li id="viewcount">This page has been accessed 3,148 times.</li>
				<li id="privacy"><a href="DLXS_Documentation_Privacy_policy.html" title="DLXS Documentation:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="DLXS_Documentation_About.html" title="DLXS Documentation:About">About DLXS Documentation</a></li>
				<li id="disclaimer"><a href="DLXS_Documentation_General_disclaimer.html" title="DLXS Documentation:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.125 secs. --></body>
<!-- Mirrored from localhost/wiki/The_Civil_War_Diaries:_A_Case_Study by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:31:39 GMT -->
</html>
