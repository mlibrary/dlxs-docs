<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from localhost/wiki/Mounting_Finding_Aids:_Release_14/Workshop_working_copy by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:34:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.5" />
		<meta name="keywords" content="Mounting Finding Aids: Release 14/Workshop working copy,Mounting Finding Aids: Release 14/Workshop working copy,Attribute ids must be unique within the entire collection,Building the Index,Character Encoding issues,Collection Manager Field Descriptions,Customizing Findaid Class,Customizing the User Interface,DLXS Wiki,Data Conversion and Preparation,Directory Structure" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/mediawiki/opensearch_desc.php" title="DLXS Documentation (en)" />
		<link rel="alternate" type="application/rss+xml" title="DLXS Documentation RSS Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="DLXS Documentation Atom Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Mounting Finding Aids: Release 14/Workshop working copy - DLXS Documentation</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../../mediawiki/skins/common/sharedfa7c.css?164";
			@import "../../mediawiki/skins/monobook/mainfa7c.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../../mediawiki/skins/common/commonPrintfa7c.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/monobook/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/monobook/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/mediawiki/skins";
var wgArticlePath = "/wiki/$1";
var wgScriptPath = "/mediawiki";
var wgScript = "http://localhost/mediawiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Mounting_Finding_Aids:_Release_14/Workshop_working_copy";
var wgTitle = "Mounting Finding Aids: Release 14/Workshop working copy";
var wgAction = "view";
var wgArticleId = "315";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "2393";
var wgVersion = "1.13.5";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="../../mediawiki/skins/common/wikibitsfa7c.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="../../mediawiki/skins/common/ajaxfa7c.js?164"></script>
		<script type="text/javascript" src="http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000&amp;useskin=monobook";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-Mounting_Finding_Aids_Release_14_Workshop_working_copy">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Mounting Finding Aids: Release 14/Workshop working copy</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From DLXS Documentation</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<div class="templateMessage"><div class="floatleft"><span><a href="../Image_Crystal_Clear_app_kgoldrunner.html" class="image" title="progress icon"><img alt="progress icon" src="../../mediawiki/images/thumb/c/c4/Crystal_Clear_app_kgoldrunner.png/50px-Crystal_Clear_app_kgoldrunner.png" width="50" height="50" border="0" /></a></span></div>This page is a work in progress. It is actively being worked on.<br /> <i>So don't worry if it looks kinda weird.</i></div> 
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; Mounting a Finding Aids Collection
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Release_14_Working_Copy"><span class="tocnumber">1</span> <span class="toctext">Release 14 Working Copy</span></a>
<ul>
<li class="toclevel-2"><a href="#Draft_Finding_Aids_Workshop_Stuff"><span class="tocnumber">1.1</span> <span class="toctext">Draft Finding Aids Workshop Stuff</span></a></li>
<li class="toclevel-2"><a href="#Finding_Aids_Workshop_Quick_Reference"><span class="tocnumber">1.2</span> <span class="toctext">Finding Aids Workshop Quick Reference</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Findaid_Class_Behaviors_Overview"><span class="tocnumber">2.1</span> <span class="toctext">Findaid Class Behaviors Overview</span></a></li>
<li class="toclevel-2"><a href="#Examples_of_Findaid_Class_Implementations_and_Practices"><span class="tocnumber">2.2</span> <span class="toctext">Examples of Findaid Class Implementations and Practices</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Working_with_the_EAD"><span class="tocnumber">3</span> <span class="toctext">Working with the EAD</span></a>
<ul>
<li class="toclevel-2"><a href="#EAD_2002_DTD_Overview"><span class="tocnumber">3.1</span> <span class="toctext">EAD 2002 DTD Overview</span></a></li>
<li class="toclevel-2"><a href="#Practical_EAD_Encoding_Issues"><span class="tocnumber">3.2</span> <span class="toctext">Practical EAD Encoding Issues</span></a>
<ul>
<li class="toclevel-3"><a href="#Types_of_changes_to_accomodate_differing_encoding_practices_and.2For_interface_changes"><span class="tocnumber">3.2.1</span> <span class="toctext">Types of changes to accomodate differing encoding practices and/or interface changes</span></a></li>
<li class="toclevel-3"><a href="#Specific_Encoding_Issues"><span class="tocnumber">3.2.2</span> <span class="toctext">Specific Encoding Issues</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Preparing_Data_and_Directories"><span class="tocnumber">4</span> <span class="toctext">Preparing Data and Directories</span></a>
<ul>
<li class="toclevel-2"><a href="#Set_Up_Directories_and_Files_for_Data_Preparation"><span class="tocnumber">4.1</span> <span class="toctext">Set Up Directories and Files for Data Preparation</span></a>
<ul>
<li class="toclevel-3"><a href="#Fixing_paths"><span class="tocnumber">4.1.1</span> <span class="toctext">Fixing paths</span></a></li>
<li class="toclevel-3"><a href="#Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation"><span class="tocnumber">4.1.2</span> <span class="toctext">Step by step instructions for setting up Directories for Data Preparation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Set_Up_Directories_and_Files_for_XPAT_Indexing"><span class="tocnumber">4.2</span> <span class="toctext">Set Up Directories and Files for XPAT Indexing</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Finding_Aids_Data_Preparation"><span class="tocnumber">5</span> <span class="toctext">Finding Aids Data Preparation</span></a>
<ul>
<li class="toclevel-2"><a href="#Overview_of_Data_Preparation_and_Indexing_Steps"><span class="tocnumber">5.1</span> <span class="toctext">Overview of Data Preparation and Indexing Steps</span></a></li>
<li class="toclevel-2"><a href="#Preprocessing"><span class="tocnumber">5.2</span> <span class="toctext">Preprocessing</span></a></li>
<li class="toclevel-2"><a href="#Validating_and_Normalizing_Your_Data"><span class="tocnumber">5.3</span> <span class="toctext">Validating and Normalizing Your Data</span></a>
<ul>
<li class="toclevel-3"><a href="#Step_1:_Validating_the_files_individually_against_the_EAD_2002_DTD"><span class="tocnumber">5.3.1</span> <span class="toctext">Step 1: Validating the files individually against the EAD 2002 DTD</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_error_messages_and_solutions:"><span class="tocnumber">5.3.1.1</span> <span class="toctext">Common error messages and solutions:</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_2:_Concatentating_the_files_into_one_larger_XML_file_.28and_running_some_preprocessing_commands.29"><span class="tocnumber">5.3.2</span> <span class="toctext">Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands)</span></a></li>
<li class="toclevel-3"><a href="#Step_3:_Validating_the_concatenated_file_against_the_dlxsead2002_DTD"><span class="tocnumber">5.3.3</span> <span class="toctext">Step 3: Validating the concatenated file against the dlxsead2002 DTD</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_common_causes_of_error_messages_and_solutions"><span class="tocnumber">5.3.3.1</span> <span class="toctext">Common common causes of error messages and solutions</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_4:_Normalizing_the_concatenated_file"><span class="tocnumber">5.3.4</span> <span class="toctext">Step 4: Normalizing the concatenated file</span></a></li>
<li class="toclevel-3"><a href="#Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD"><span class="tocnumber">5.3.5</span> <span class="toctext">Step 5: Validating the normalized file against the dlxsead2002 DTD</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Building_the_Index"><span class="tocnumber">6</span> <span class="toctext">Building the Index</span></a>
<ul>
<li class="toclevel-2"><a href="#Indexing_Overview"><span class="tocnumber">6.1</span> <span class="toctext">Indexing Overview</span></a></li>
<li class="toclevel-2"><a href="#Step_by_Step_Instructions_for_Indexing"><span class="tocnumber">6.2</span> <span class="toctext">Step by Step Instructions for Indexing</span></a>
<ul>
<li class="toclevel-3"><a href="#Step_1:_Indexing_the_text"><span class="tocnumber">6.2.1</span> <span class="toctext">Step 1: Indexing the text</span></a></li>
<li class="toclevel-3"><a href="#Step_2:_Indexing_the_the_XML"><span class="tocnumber">6.2.2</span> <span class="toctext">Step 2: Indexing the the XML</span></a></li>
<li class="toclevel-3"><a href="#Step_3:_Configuring_fabricated_regions"><span class="tocnumber">6.2.3</span> <span class="toctext">Step 3: Configuring fabricated regions</span></a>
<ul>
<li class="toclevel-4"><a href="#Run_the_.22make_post.22_and_iterate_until_there_are_no_errors_reported."><span class="tocnumber">6.2.3.1</span> <span class="toctext">Run the "make post" and iterate until there are no errors reported.</span></a></li>
<li class="toclevel-4"><a href="#Analysis_of_your_collection"><span class="tocnumber">6.2.3.2</span> <span class="toctext">Analysis of your collection</span></a></li>
<li class="toclevel-4"><a href="#Exercise_the_web_user_interface"><span class="tocnumber">6.2.3.3</span> <span class="toctext">Exercise the web user interface</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_4:_Indexing_fabricated_regions"><span class="tocnumber">6.2.4</span> <span class="toctext">Step 4: Indexing fabricated regions</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_common_causes_of_error_messages_and_solutions_2"><span class="tocnumber">6.2.4.1</span> <span class="toctext">Common common causes of error messages and solutions</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Testing_the_index"><span class="tocnumber">6.3</span> <span class="toctext">Testing the index</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Working_with_Fabricated_Regions_in_Findaid_Class"><span class="tocnumber">7</span> <span class="toctext">Working with Fabricated Regions in Findaid Class</span></a>
<ul>
<li class="toclevel-2"><a href="#Fabricated_Regions_Overview"><span class="tocnumber">7.1</span> <span class="toctext">Fabricated Regions Overview</span></a></li>
<li class="toclevel-2"><a href="#Why_Fabricate_Regions.3F"><span class="tocnumber">7.2</span> <span class="toctext">Why Fabricate Regions?</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_Regions_in_the_UI"><span class="tocnumber">7.3</span> <span class="toctext">Fabricated Regions in the UI</span></a></li>
<li class="toclevel-2"><a href="#Working_with_extra.srch"><span class="tocnumber">7.4</span> <span class="toctext">Working with extra.srch</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_regions_required_in_Findaid_Class"><span class="tocnumber">7.5</span> <span class="toctext">Fabricated regions required in Findaid Class</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_regions_commonly_found_in_Findaid_Class"><span class="tocnumber">7.6</span> <span class="toctext">Fabricated regions commonly found in Findaid Class</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Customizing_Findaid_Class"><span class="tocnumber">8</span> <span class="toctext">Customizing Findaid Class</span></a>
<ul>
<li class="toclevel-2"><a href="#Working_with_the_table_of_contents"><span class="tocnumber">8.1</span> <span class="toctext">Working with the table of contents</span></a>
<ul>
<li class="toclevel-3"><a href="#Changing_the_labels_in_the_table_of_contents"><span class="tocnumber">8.1.1</span> <span class="toctext">Changing the labels in the table of contents</span></a></li>
<li class="toclevel-3"><a href="#Adding_sections_to_the_table_of_contents"><span class="tocnumber">8.1.2</span> <span class="toctext">Adding sections to the table of contents</span></a>
<ul>
<li class="toclevel-4"><a href="#Step_1.__Add_the_appropriate_xpat_region_definitions_to_your_extra.srch_file"><span class="tocnumber">8.1.2.1</span> <span class="toctext">Step 1.  Add the appropriate xpat region definitions to your extra.srch file</span></a></li>
<li class="toclevel-4"><a href="#Step_2.__Modify_the_TOC_headers_hash"><span class="tocnumber">8.1.2.2</span> <span class="toctext">Step 2.  Modify the TOC headers hash</span></a>
<ul>
<li class="toclevel-5"><a href="#Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg__config_file."><span class="tocnumber">8.1.2.2.1</span> <span class="toctext">Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.</span></a></li>
<li class="toclevel-5"><a href="#Step_2.B.__Create_a_subclass"><span class="tocnumber">8.1.2.2.2</span> <span class="toctext">Step 2.B.  Create a subclass</span></a></li>
</ul>
</li>
<li class="toclevel-4"><a href="#Step_3._Add_appropriate_XSL_to_render_the_sections"><span class="tocnumber">8.1.2.3</span> <span class="toctext">Step 3. Add appropriate XSL to render the sections</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Changing_the_Bioghist_labels_to_use_the_appropriate_.3Chead.3E_elements"><span class="tocnumber">8.2</span> <span class="toctext">Changing the Bioghist labels to use the appropriate &lt;head&gt; elements</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Mounting_the_Collection_Online"><span class="tocnumber">9</span> <span class="toctext">Mounting the Collection Online</span></a>
<ul>
<li class="toclevel-2"><a href="#Create_and_edit_an_entry_in_the_Collection_Database_for_your_collection_with_CollMgr"><span class="tocnumber">9.1</span> <span class="toctext">Create and edit an entry in the Collection Database for your collection with CollMgr</span></a></li>
<li class="toclevel-2"><a href="#Review_the_Groups_Database_Entry_with_CollMgr"><span class="tocnumber">9.2</span> <span class="toctext">Review the Groups Database Entry with CollMgr</span></a></li>
<li class="toclevel-2"><a href="#Make_Collection_Map"><span class="tocnumber">9.3</span> <span class="toctext">Make Collection Map</span></a></li>
<li class="toclevel-2"><a href="#More_Documentation"><span class="tocnumber">9.4</span> <span class="toctext">More Documentation</span></a></li>
<li class="toclevel-2"><a href="#Set_Up_the_Collection.27s_Web_Directory"><span class="tocnumber">9.5</span> <span class="toctext">Set Up the Collection's Web Directory</span></a></li>
<li class="toclevel-2"><a href="#Create_a_browse_page"><span class="tocnumber">9.6</span> <span class="toctext">Create a browse page</span></a></li>
<li class="toclevel-2"><a href="#Try_It_Out"><span class="tocnumber">9.7</span> <span class="toctext">Try It Out</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Troubleshooting_Finding_Aids"><span class="tocnumber">10</span> <span class="toctext">Troubleshooting Finding Aids</span></a>
<ul>
<li class="toclevel-2"><a href="#General_Techniques"><span class="tocnumber">10.1</span> <span class="toctext">General Techniques</span></a>
<ul>
<li class="toclevel-3"><a href="#Common_Problems_and_Solutions"><span class="tocnumber">10.1.1</span> <span class="toctext">Common Problems and Solutions</span></a>
<ul>
<li class="toclevel-4"><a href="#Title_of_Finding_Aid_does_not_show_up"><span class="tocnumber">10.1.1.1</span> <span class="toctext">Title of Finding Aid does not show up</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Linking_from_Finding_Aids_Using_ID_Resolver"><span class="tocnumber">11</span> <span class="toctext">Linking from Finding Aids Using ID Resolver</span></a></li>
<li class="toclevel-1"><a href="#Workshop_Materials"><span class="tocnumber">12</span> <span class="toctext">Workshop Materials</span></a></li>
<li class="toclevel-1"><a href="#Working_with_the_User_Interface"><span class="tocnumber">13</span> <span class="toctext">Working with the User Interface</span></a>
<ul>
<li class="toclevel-2"><a href="#Findaid_Class_Graphics_Files"><span class="tocnumber">13.1</span> <span class="toctext">Findaid Class Graphics Files</span></a></li>
<li class="toclevel-2"><a href="#Findaid_Class_Processing_Instructions"><span class="tocnumber">13.2</span> <span class="toctext">Findaid Class Processing Instructions</span></a></li>
<li class="toclevel-2"><a href="#Finding_Aids_Workshop_Quick_Reference_2"><span class="tocnumber">13.3</span> <span class="toctext">Finding Aids Workshop Quick Reference</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Overview_2"><span class="tocnumber">14</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2"><a href="#Findaid_Class_Behaviors_Overview_2"><span class="tocnumber">14.1</span> <span class="toctext">Findaid Class Behaviors Overview</span></a></li>
<li class="toclevel-2"><a href="#Examples_of_Findaid_Class_Implementations_and_Practices_2"><span class="tocnumber">14.2</span> <span class="toctext">Examples of Findaid Class Implementations and Practices</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Working_with_the_EAD_2"><span class="tocnumber">15</span> <span class="toctext">Working with the EAD</span></a>
<ul>
<li class="toclevel-2"><a href="#EAD_2002_DTD_Overview_2"><span class="tocnumber">15.1</span> <span class="toctext">EAD 2002 DTD Overview</span></a></li>
<li class="toclevel-2"><a href="#Practical_EAD_Encoding_Issues_2"><span class="tocnumber">15.2</span> <span class="toctext">Practical EAD Encoding Issues</span></a>
<ul>
<li class="toclevel-3"><a href="#Types_of_changes_to_accomodate_differing_encoding_practices_and.2For_interface_changes_2"><span class="tocnumber">15.2.1</span> <span class="toctext">Types of changes to accomodate differing encoding practices and/or interface changes</span></a></li>
<li class="toclevel-3"><a href="#Specific_Encoding_Issues_2"><span class="tocnumber">15.2.2</span> <span class="toctext">Specific Encoding Issues</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Preparing_Data_and_Directories_2"><span class="tocnumber">16</span> <span class="toctext">Preparing Data and Directories</span></a>
<ul>
<li class="toclevel-2"><a href="#Set_Up_Directories_and_Files_for_Data_Preparation_2"><span class="tocnumber">16.1</span> <span class="toctext">Set Up Directories and Files for Data Preparation</span></a>
<ul>
<li class="toclevel-3"><a href="#Fixing_paths_2"><span class="tocnumber">16.1.1</span> <span class="toctext">Fixing paths</span></a></li>
<li class="toclevel-3"><a href="#Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation_2"><span class="tocnumber">16.1.2</span> <span class="toctext">Step by step instructions for setting up Directories for Data Preparation</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Set_Up_Directories_and_Files_for_XPAT_Indexing_2"><span class="tocnumber">16.2</span> <span class="toctext">Set Up Directories and Files for XPAT Indexing</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Finding_Aids_Data_Preparation_2"><span class="tocnumber">17</span> <span class="toctext">Finding Aids Data Preparation</span></a>
<ul>
<li class="toclevel-2"><a href="#Overview_of_Data_Preparation_and_Indexing_Steps_2"><span class="tocnumber">17.1</span> <span class="toctext">Overview of Data Preparation and Indexing Steps</span></a></li>
<li class="toclevel-2"><a href="#Preprocessing_2"><span class="tocnumber">17.2</span> <span class="toctext">Preprocessing</span></a></li>
<li class="toclevel-2"><a href="#Validating_and_Normalizing_Your_Data_2"><span class="tocnumber">17.3</span> <span class="toctext">Validating and Normalizing Your Data</span></a>
<ul>
<li class="toclevel-3"><a href="#Step_1:_Validating_the_files_individually_against_the_EAD_2002_DTD_2"><span class="tocnumber">17.3.1</span> <span class="toctext">Step 1: Validating the files individually against the EAD 2002 DTD</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_error_messages_and_solutions:_2"><span class="tocnumber">17.3.1.1</span> <span class="toctext">Common error messages and solutions:</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_2:_Concatentating_the_files_into_one_larger_XML_file_.28and_running_some_preprocessing_commands.29_2"><span class="tocnumber">17.3.2</span> <span class="toctext">Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands)</span></a></li>
<li class="toclevel-3"><a href="#Step_3:_Validating_the_concatenated_file_against_the_dlxsead2002_DTD_2"><span class="tocnumber">17.3.3</span> <span class="toctext">Step 3: Validating the concatenated file against the dlxsead2002 DTD</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_common_causes_of_error_messages_and_solutions_3"><span class="tocnumber">17.3.3.1</span> <span class="toctext">Common common causes of error messages and solutions</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_4:_Normalizing_the_concatenated_file_2"><span class="tocnumber">17.3.4</span> <span class="toctext">Step 4: Normalizing the concatenated file</span></a></li>
<li class="toclevel-3"><a href="#Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD_2"><span class="tocnumber">17.3.5</span> <span class="toctext">Step 5: Validating the normalized file against the dlxsead2002 DTD</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Building_the_Index_2"><span class="tocnumber">18</span> <span class="toctext">Building the Index</span></a>
<ul>
<li class="toclevel-2"><a href="#Indexing_Overview_2"><span class="tocnumber">18.1</span> <span class="toctext">Indexing Overview</span></a></li>
<li class="toclevel-2"><a href="#Step_by_Step_Instructions_for_Indexing_2"><span class="tocnumber">18.2</span> <span class="toctext">Step by Step Instructions for Indexing</span></a>
<ul>
<li class="toclevel-3"><a href="#Step_1:_Indexing_the_text_2"><span class="tocnumber">18.2.1</span> <span class="toctext">Step 1: Indexing the text</span></a></li>
<li class="toclevel-3"><a href="#Step_2:_Indexing_the_the_XML_2"><span class="tocnumber">18.2.2</span> <span class="toctext">Step 2: Indexing the the XML</span></a></li>
<li class="toclevel-3"><a href="#Step_3:_Configuring_fabricated_regions_2"><span class="tocnumber">18.2.3</span> <span class="toctext">Step 3: Configuring fabricated regions</span></a>
<ul>
<li class="toclevel-4"><a href="#Run_the_.22make_post.22_and_iterate_until_there_are_no_errors_reported._2"><span class="tocnumber">18.2.3.1</span> <span class="toctext">Run the "make post" and iterate until there are no errors reported.</span></a></li>
<li class="toclevel-4"><a href="#Analysis_of_your_collection_2"><span class="tocnumber">18.2.3.2</span> <span class="toctext">Analysis of your collection</span></a></li>
<li class="toclevel-4"><a href="#Exercise_the_web_user_interface_2"><span class="tocnumber">18.2.3.3</span> <span class="toctext">Exercise the web user interface</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Step_4:_Indexing_fabricated_regions_2"><span class="tocnumber">18.2.4</span> <span class="toctext">Step 4: Indexing fabricated regions</span></a>
<ul>
<li class="toclevel-4"><a href="#Common_common_causes_of_error_messages_and_solutions_4"><span class="tocnumber">18.2.4.1</span> <span class="toctext">Common common causes of error messages and solutions</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Testing_the_index_2"><span class="tocnumber">18.3</span> <span class="toctext">Testing the index</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Working_with_Fabricated_Regions_in_Findaid_Class_2"><span class="tocnumber">19</span> <span class="toctext">Working with Fabricated Regions in Findaid Class</span></a>
<ul>
<li class="toclevel-2"><a href="#Fabricated_Regions_Overview_2"><span class="tocnumber">19.1</span> <span class="toctext">Fabricated Regions Overview</span></a></li>
<li class="toclevel-2"><a href="#Why_Fabricate_Regions.3F_2"><span class="tocnumber">19.2</span> <span class="toctext">Why Fabricate Regions?</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_Regions_in_the_UI_2"><span class="tocnumber">19.3</span> <span class="toctext">Fabricated Regions in the UI</span></a></li>
<li class="toclevel-2"><a href="#Working_with_extra.srch_2"><span class="tocnumber">19.4</span> <span class="toctext">Working with extra.srch</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_regions_required_in_Findaid_Class_2"><span class="tocnumber">19.5</span> <span class="toctext">Fabricated regions required in Findaid Class</span></a></li>
<li class="toclevel-2"><a href="#Fabricated_regions_commonly_found_in_Findaid_Class_2"><span class="tocnumber">19.6</span> <span class="toctext">Fabricated regions commonly found in Findaid Class</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Customizing_Findaid_Class_2"><span class="tocnumber">20</span> <span class="toctext">Customizing Findaid Class</span></a>
<ul>
<li class="toclevel-2"><a href="#Working_with_the_table_of_contents_2"><span class="tocnumber">20.1</span> <span class="toctext">Working with the table of contents</span></a>
<ul>
<li class="toclevel-3"><a href="#Changing_the_labels_in_the_table_of_contents_2"><span class="tocnumber">20.1.1</span> <span class="toctext">Changing the labels in the table of contents</span></a></li>
<li class="toclevel-3"><a href="#Adding_sections_to_the_table_of_contents_2"><span class="tocnumber">20.1.2</span> <span class="toctext">Adding sections to the table of contents</span></a>
<ul>
<li class="toclevel-4"><a href="#Step_1.__Add_the_appropriate_xpat_region_definitions_to_your_extra.srch_file_2"><span class="tocnumber">20.1.2.1</span> <span class="toctext">Step 1.  Add the appropriate xpat region definitions to your extra.srch file</span></a></li>
<li class="toclevel-4"><a href="#Step_2.__Modify_the_TOC_headers_hash_2"><span class="tocnumber">20.1.2.2</span> <span class="toctext">Step 2.  Modify the TOC headers hash</span></a>
<ul>
<li class="toclevel-5"><a href="#Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg__config_file._2"><span class="tocnumber">20.1.2.2.1</span> <span class="toctext">Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.</span></a></li>
<li class="toclevel-5"><a href="#Step_2.B.__Create_a_subclass_2"><span class="tocnumber">20.1.2.2.2</span> <span class="toctext">Step 2.B.  Create a subclass</span></a></li>
</ul>
</li>
<li class="toclevel-4"><a href="#Step_3._Add_appropriate_XSL_to_render_the_sections_2"><span class="tocnumber">20.1.2.3</span> <span class="toctext">Step 3. Add appropriate XSL to render the sections</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Changing_the_Bioghist_labels_to_use_the_appropriate_.3Chead.3E_elements_2"><span class="tocnumber">20.2</span> <span class="toctext">Changing the Bioghist labels to use the appropriate &lt;head&gt; elements</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Mounting_the_Collection_Online_2"><span class="tocnumber">21</span> <span class="toctext">Mounting the Collection Online</span></a>
<ul>
<li class="toclevel-2"><a href="#Create_and_edit_an_entry_in_the_Collection_Database_for_your_collection_with_CollMgr_2"><span class="tocnumber">21.1</span> <span class="toctext">Create and edit an entry in the Collection Database for your collection with CollMgr</span></a></li>
<li class="toclevel-2"><a href="#Review_the_Groups_Database_Entry_with_CollMgr_2"><span class="tocnumber">21.2</span> <span class="toctext">Review the Groups Database Entry with CollMgr</span></a></li>
<li class="toclevel-2"><a href="#Make_Collection_Map_2"><span class="tocnumber">21.3</span> <span class="toctext">Make Collection Map</span></a></li>
<li class="toclevel-2"><a href="#More_Documentation_2"><span class="tocnumber">21.4</span> <span class="toctext">More Documentation</span></a></li>
<li class="toclevel-2"><a href="#Set_Up_the_Collection.27s_Web_Directory_2"><span class="tocnumber">21.5</span> <span class="toctext">Set Up the Collection's Web Directory</span></a></li>
<li class="toclevel-2"><a href="#Create_a_browse_page_2"><span class="tocnumber">21.6</span> <span class="toctext">Create a browse page</span></a></li>
<li class="toclevel-2"><a href="#Try_It_Out_2"><span class="tocnumber">21.7</span> <span class="toctext">Try It Out</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Troubleshooting_Finding_Aids_2"><span class="tocnumber">22</span> <span class="toctext">Troubleshooting Finding Aids</span></a>
<ul>
<li class="toclevel-2"><a href="#General_Techniques_2"><span class="tocnumber">22.1</span> <span class="toctext">General Techniques</span></a>
<ul>
<li class="toclevel-3"><a href="#Common_Problems_and_Solutions_2"><span class="tocnumber">22.1.1</span> <span class="toctext">Common Problems and Solutions</span></a>
<ul>
<li class="toclevel-4"><a href="#Title_of_Finding_Aid_does_not_show_up_2"><span class="tocnumber">22.1.1.1</span> <span class="toctext">Title of Finding Aid does not show up</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Linking_from_Finding_Aids_Using_ID_Resolver_2"><span class="tocnumber">23</span> <span class="toctext">Linking from Finding Aids Using ID Resolver</span></a></li>
<li class="toclevel-1"><a href="#Workshop_Materials_2"><span class="tocnumber">24</span> <span class="toctext">Workshop Materials</span></a></li>
<li class="toclevel-1"><a href="#Working_with_the_User_Interface_2"><span class="tocnumber">25</span> <span class="toctext">Working with the User Interface</span></a>
<ul>
<li class="toclevel-2"><a href="#Findaid_Class_Graphics_Files_2"><span class="tocnumber">25.1</span> <span class="toctext">Findaid Class Graphics Files</span></a></li>
<li class="toclevel-2"><a href="#Findaid_Class_Processing_Instructions_2"><span class="tocnumber">25.2</span> <span class="toctext">Findaid Class Processing Instructions</span></a></li>
</ul>
</li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Release_14_Working_Copy"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=1" title="Edit section: Release 14 Working Copy">edit</a>]</span> <span class="mw-headline"> <b>Release 14 Working Copy </b> </span></h2>
<p><i>This Material is in process and will be changing until the workshop</i>
</p>
<hr />
<p><br />
This topic describes how to mount a Findaid Class collection.
</p><p><br />
</p>
<div class="templateMessage"><div class="floatleft"><span><a href="../Image_Crystal_Clear_app_kgoldrunner.html" class="image" title="progress icon"><img alt="progress icon" src="../../mediawiki/images/thumb/c/c4/Crystal_Clear_app_kgoldrunner.png/50px-Crystal_Clear_app_kgoldrunner.png" width="50" height="50" border="0" /></a></span></div>This page is a work in progress. It is actively being worked on.<br /> <i>So don't worry if it looks kinda weird.</i></div> 
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; Mounting a Finding Aids Collection
</p><p><br />
</p><p><br />
This topic describes how to mount a Findaid Class collection.
</p>
<a name="Draft_Finding_Aids_Workshop_Stuff"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=2" title="Edit section: Draft Finding Aids Workshop Stuff">edit</a>]</span> <span class="mw-headline"><a href="http://localhost/mediawiki/index.php?title=Draft_Finding_Aids_Workshop_Stuff&amp;action=edit&amp;redlink=1" class="new" title="Draft Finding Aids Workshop Stuff (not yet written)">Draft Finding Aids Workshop Stuff </a></span></h3>
<a name="Finding_Aids_Workshop_Quick_Reference"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=3" title="Edit section: Finding Aids Workshop Quick Reference">edit</a>]</span> <span class="mw-headline"><a href="../Finding_Aids_Workshop_Quick_Reference.html" title="Finding Aids Workshop Quick Reference">Finding Aids Workshop Quick Reference</a></span></h3>
<p>Old (2007)workshop materials are located at <a href="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" class="external free" title="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" rel="nofollow">http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html</a>
</p>
<a name="Overview"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=4" title="Edit section: Overview">edit</a>]</span> <span class="mw-headline">Overview</span></h2>
<p>The Finding Aids Class is in many ways similar in behavior to Text Class. Access minimally includes full text searching across collections or within a particular collection of Finding Aids, viewing Finding Aids in a variety of display formats, and creation of personal collections ("bookbag") of Finding Aids.
</p><p>To mount a Finding Aids Collection, you will need to complete the following steps:
</p>
<ol><li> <a href="../Preparing_Data_and_Directories.html" title="Preparing Data and Directories">Prepare your data and set up a directory structure</a>
</li><li> <a href="../Finding_Aids_Data_Preparation.html#Validating_and_Normalizing_Your_Data" title="Finding Aids Data Preparation"> Validate and normalize your data</a> 
</li><li> <a href="../Building_the_Index.html" title="Building the Index">Build the Index</a>
</li><li> <a href="../Mounting_the_Collection_Online.html" title="Mounting the Collection Online">Mount the collection online</a>
</li></ol>
<a name="Findaid_Class_Behaviors_Overview"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=5" title="Edit section: Findaid Class Behaviors Overview">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Behaviors_Overview.html" title="Findaid Class Behaviors Overview">Findaid Class Behaviors Overview</a></span></h3>
<p>This section describes the basic Findaid Class behaviors.
</p>
<a name="Examples_of_Findaid_Class_Implementations_and_Practices"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=6" title="Edit section: Examples of Findaid Class Implementations and Practices">edit</a>]</span> <span class="mw-headline">Examples of Findaid Class Implementations and Practices</span></h3>
<p>This section contains links to public implementations of DLXS Findaid Class as well as documentation on workflow and implementation issues.  If you are a member of DLXS and have a collection or resource you would like to add, or wish to add more information about your collection, please edit this section.
</p>
<dl><dt><a href="http://bentley.umich.edu/EAD/index.php" class="external text" title="http://bentley.umich.edu/EAD/index.php" rel="nofollow">University of Michigan, Bentley Historical Library Finding Aids</a>
</dt><dd> Out-of-the-box DLXS 13 implementation.  
</dd><dt><a href="http://bentley.umich.edu/EAD/eadproject.php" class="external text" title="http://bentley.umich.edu/EAD/eadproject.php" rel="nofollow">Overview of Bentley's workflow process for Finding Aids </a>
</dt><dd>See also the links in <a href="#Practical_EAD_Encoding_Issues" title=""> Practical EAD Encoding Issues</a> for background on the Bentley EAD workflow and encoding practices
</dd></dl>
<dl><dt><a href="http://dlc.lib.utk.edu/f/fa/" class="external text" title="http://dlc.lib.utk.edu/f/fa/" rel="nofollow">Unversity of Tennesee Special Collections Libraries</a>
</dt><dd> DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="http://digital.library.pitt.edu/ead/" class="external text" title="http://digital.library.pitt.edu/ead/" rel="nofollow">University of Pittsburgh, Historic Pittsburgh Finding Aids</a>
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd><dt><a href="http://digital.library.pitt.edu/ead/aboutead.html" class="external text" title="http://digital.library.pitt.edu/ead/aboutead.html" rel="nofollow">Background on Pittsburgh Finding Aids workflow</a>
</dt><dd>
</dd></dl>
<dl><dt><a href="http://digicoll.library.wisc.edu/wiarchives" class="external text" title="http://digicoll.library.wisc.edu/wiarchives" rel="nofollow">University of Wisconsin, Archival Resources in Wisconsin: Descriptive Finding Aids</a> 
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="http://discover.lib.umn.edu/findaid" class="external text" title="http://discover.lib.umn.edu/findaid" rel="nofollow">University of Minnesota Libraries, Online Finding Aids</a> 
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="https://wiki.lib.umn.edu/Staff/FindingAidsInEAD/" class="external text" title="https://wiki.lib.umn.edu/Staff/FindingAidsInEAD/" rel="nofollow">EAD Implementation at the University of Minnesota</a>
</dt><dd>
</dd></dl>
<dl><dt><a href="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=utf8a;c=utf8a;tpl=browse.tpl" class="external text" title="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=utf8a;c=utf8a;tpl=browse.tpl" rel="nofollow">Getty Research Institute Special Collections Finding Aids</a>
</dt><dd> Heavily customized DLXS11a.  <a href="http://library.pub.getty.edu:8100/DLXS06.html" class="external text" title="http://library.pub.getty.edu:8100/DLXS06.html" rel="nofollow">Background on Getty customization and user interface changes to DLXS</a>
</dd></dl>
<dl><dt><a href="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=iastaff;c=iastaff;tpl=browse.tpl" class="external text" title="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=iastaff;c=iastaff;tpl=browse.tpl" rel="nofollow">J. Paul Getty Trust Institutional Archives Finding Aids</a>
</dt><dd>Heavily customized DLXS11a.
</dd></dl>
<a name="Working_with_the_EAD"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=7" title="Edit section: Working with the EAD">edit</a>]</span> <span class="mw-headline">Working with the EAD</span></h2>
<a name="EAD_2002_DTD_Overview"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=8" title="Edit section: EAD 2002 DTD Overview">edit</a>]</span> <span class="mw-headline">EAD 2002 DTD Overview</span></h3>
<p>These instructions assume that you have already encoded your finding aids files in the XML-based <a href="http://www.loc.gov/ead/" class="external text" title="http://www.loc.gov/ead/" rel="nofollow">EAD 2002 DTD</a>. If you have finding aids encoded using the older EAD 1.0 standard or are using the SGML version of EAD2002, you will need to convert your files to the XML version of EAD2002.   When converting from SGML to XML a number of character set issues may arise. See 
<a href="../Data_Conversion_and_Preparation.html#Unicode.2C_XML.2C_and_Normalization" title="Data Conversion and Preparation"> Data Conversion and Preparation: Unicode,XML, and Normalization</a>
</p><p>Resources for converting from EAD 1.0 to EAD2002 and/or from SGML EAD to XML EAD are available from:
</p>
<ul><li> The Society of American Archivists EAD Tools page: <a href="http://www.archivists.org/saagroups/ead/tools.html" class="external free" title="http://www.archivists.org/saagroups/ead/tools.html" rel="nofollow">http://www.archivists.org/saagroups/ead/tools.html</a>
</li><li> Library of Congress EAD conversion tools: <a href="http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm" class="external free" title="http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm" rel="nofollow">http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm</a>
</li></ul>
<p>Other good sources of information about EAD encoding practices and practical issues involved with EADs are:
</p>
<ul><li> Library of Congress EAD page <a href="http://www.loc.gov/ead/" class="external free" title="http://www.loc.gov/ead/" rel="nofollow">http://www.loc.gov/ead/</a> (This is the home of the EAD standard
</li><li> EAD2002 tag library <a href="http://www.loc.gov/ead/tglib/index.html" class="external free" title="http://www.loc.gov/ead/tglib/index.html" rel="nofollow">http://www.loc.gov/ead/tglib/index.html</a>
</li><li> The Society of American Archivists EAD Help page: <a href="http://www.archivists.org/saagroups/ead/" class="external free" title="http://www.archivists.org/saagroups/ead/" rel="nofollow">http://www.archivists.org/saagroups/ead/</a>
</li><li> Various EAD Best Practice Guidelines listed on the Society of American Archivists EAD essentials page:  <a href="http://www.archivists.org/saagroups/ead/essentials.html" class="external free" title="http://www.archivists.org/saagroups/ead/essentials.html" rel="nofollow">http://www.archivists.org/saagroups/ead/essentials.html</a> (the links to BPGs are at the bottom of the page)
</li><li> The EAD listserv <a href="http://listserv.loc.gov/listarch/ead.html" class="external free" title="http://listserv.loc.gov/listarch/ead.html" rel="nofollow">http://listserv.loc.gov/listarch/ead.html</a>
</li></ul>
<p>Sources of information about more general issues such as user studies can be found in:
</p><p><a href="http://www.library.uiuc.edu/archives/features/workpap.php" class="external free" title="http://www.library.uiuc.edu/archives/features/workpap.php" rel="nofollow">http://www.library.uiuc.edu/archives/features/workpap.php</a>
</p>
<a name="Practical_EAD_Encoding_Issues"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=9" title="Edit section: Practical EAD Encoding Issues">edit</a>]</span> <span class="mw-headline">Practical EAD Encoding Issues</span></h3>
<p>The EAD standard was designed as a loose standard in order to accommodate the large variety in local practices for paper finding aids and make it easy for archives to convert from paper to electronic form.  As a result, conformance with the EAD standard still allows a great deal of variety in encoding practices.
</p><p>The DLXS software is primarily designed as a system for mounting University of Michigan collections.  In the case of finding aids, the software has been designed to accommodate the encoding practices of the Bentley Historical Library. The more similar your data and setup is to the Bentley’s, the easier is will be to integrate your finding aids collection with DLXS.  If your practices differ significantly from the Bentley’s, you will probably need to do some preprocessing of your files and/or make changes to DLXS.  
</p><p>More information on the Bentley's encoding practices and workflow:
</p>
<ul><li> Overview of Bentley's workflow process for Finding Aids <a href="http://bentley.umich.edu/EAD/eadproject.php" class="external free" title="http://bentley.umich.edu/EAD/eadproject.php" rel="nofollow">http://bentley.umich.edu/EAD/eadproject.php</a>
</li><li> Description of Bentley Finding Aids and their presentation on the web <a href="http://bentley.umich.edu/EAD/system.php" class="external free" title="http://bentley.umich.edu/EAD/system.php" rel="nofollow">http://bentley.umich.edu/EAD/system.php</a>
</li><li> Bentley MS Word EAD templates and macros <a href="http://bentley.umich.edu/EAD/bhlfiles.php" class="external free" title="http://bentley.umich.edu/EAD/bhlfiles.php" rel="nofollow">http://bentley.umich.edu/EAD/bhlfiles.php</a>
</li><li> Description of EAD tags used in Bentley EADs <a href="http://bentley.umich.edu/EAD/bhltags.php" class="external free" title="http://bentley.umich.edu/EAD/bhltags.php" rel="nofollow">http://bentley.umich.edu/EAD/bhltags.php</a>
</li></ul>
<p><br />
</p><p><br />
</p>
<a name="Types_of_changes_to_accomodate_differing_encoding_practices_and.2For_interface_changes"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=10" title="Edit section: Types of changes to accomodate differing encoding practices and/or interface changes">edit</a>]</span> <span class="mw-headline">Types of changes to accomodate differing encoding practices and/or interface changes</span></h4>
<ul><li> Custom preprocessing
</li><li> Add dummy EAD to data
</li><li> Modify prep scripts (Makefile, preparedocs.pl, validateeach.csh)
</li><li> Modify *inp files (DOCTYPE declarations and entities)
</li><li> Modify fabricated regions (*.extra.srch)
</li><li> Modify CollMgr entries
</li><li> Modify findaidclass.cfg (change table of contents sections)
</li><li> Subclass FindaidClass.pm
</li><li> Modify XSL
</li><li> Modify XML templates
</li><li> Modify CSS
</li></ul>
<a name="Specific_Encoding_Issues"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=11" title="Edit section: Specific Encoding Issues">edit</a>]</span> <span class="mw-headline">Specific Encoding Issues</span></h4>
<p>There are a number of encoding issues that may affect the data preparation, indexing, searching, and rendering of your finding aids. Some of them are:
</p>
<ul><li> Preprocessing and Data Prep issues
<ul><li> <span class="redtext">&lt;eadid&gt; should be less than about 20 characters in length</span>
</li><li> <a href="../Attribute_ids_must_be_unique_within_the_entire_collection.html" title="Attribute ids must be unique within the entire collection">Attribute ids must be unique within the entire collection </a>
</li><li> If you use attribute ids and corresponding targets within your EADs preparedocs.pl may need to be modified.
</li><li> <a href="../Character_Encoding_issues.html" title="Character Encoding issues">Character Encoding issues</a>
</li><li> UTF-8 Byte Order Marks (BOM) should be removed from EADs prior to concatenation
</li><li> XML processing instructions should be removed from EADs prior to concatenation
</li><li> Multiline DOCTYPE declarations are not properly handled the data prep scripts in release 13 and earlier (without August 24, 2007 patch).
</li><li> If your DOCTYPE declaration contains entities, you need to modify the appropriate *dcl files accordingly. See $DLXSROOT/prep/s/samplefa/samplefa.ead2002.entity.example.dcl for an example )
</li><li> Out-of-the-box &lt;dao&gt; handling may need to be modified for your needs
</li></ul>
</li><li> Fabricated region issues  (some of these involve XSL as well)
<ul><li> If your &lt;unititle&gt; element precedes your &lt;origination&gt; element in <span class="unixcommand">the top level &lt;did&gt;, you will have to modify the maintitle fabricated region query in *.extra.srch </span> See <a href="Workshop_working_copy.html#Title_of_Finding_Aid_does_not_show_up" title="Mounting Finding Aids: Release 14/Workshop working copy"> Troubleshooting:Title of Finding Aid does not show up</a>  
</li><li> If you do not use a &lt;frontmatter&gt; element, you will either have to either a) create and populate frontmatter elements in your EADs manually, or b) run your EADs through some preprocessing XSL to create and populate frontmatter elements, or c) you will have to create a fabricated region  to provide an appropriate "Title Page" region based on the &lt;eadheader&gt; and you may also need to change the XSL and/or subclass FindaidClass to change the code that handles the Title Page region.
</li></ul>
</li></ul>
<ul><li> Table of Contents and Focus Region issues
<ul><li> If you do not use a &lt;frontmatter&gt; element you may have to make the changes mentioned above to get the title page to show in the table of contents and when the user clicks on the "Title Page" link in the table of contents
</li><li> If your encoding practices for &lt;biohist&gt; differ from the Bentley's, you may need to make changes in findaidclass.cfg or create a subclass of FindaidClass and override FindaidClass:: GetBioghistTocHead, and/or change the appropriate XSL files.
</li><li> If you want &lt;relatedmaterial&gt; and/or &lt;separatedmaterial&gt; to show up in the table of contents (TOC) on the left hand side of the Finding Aids, you may have to modify findaidclass.cfg and make other modifications to the code. This also applies if there are other sections of the finding aid not listed in the out-of-the-box findaidclass.cfg&nbsp;%gSectHeadsHash. 
</li><li> See also <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Customizing Findaid Class: Working with the table of contents</a>
</li></ul>
</li></ul>
<ul><li> XSL issues
<ul><li> If you have encoded &lt;unitdate&gt;s as siblings of &lt;unittitle&gt;s, you may have to modify the appropriate XSL templates.
</li><li> If you want the middleware to use the &lt;head&gt; element for labeling sections instead of the default hard-coded values in findaidclass.cfg, you may need to change fabricated regions and/or make changes to the XSL and/or possibly modify findaidclass.cfg or subclass FindaidClass.
</li></ul>
</li></ul>
<a name="Preparing_Data_and_Directories"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=12" title="Edit section: Preparing Data and Directories">edit</a>]</span> <span class="mw-headline">Preparing Data and Directories</span></h2>
<a name="Set_Up_Directories_and_Files_for_Data_Preparation"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=13" title="Edit section: Set Up Directories and Files for Data Preparation">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for Data Preparation</span></h3>
<p>You will need to set up a directory structure  where you plan to store your EAD2002 XML source files, your object files (used by xpat for indexing), index files (including region index files)and other information such as data dictionaries, and files you use to prepare your data.  
</p><p>The convention used by DLXS is to use subdirectories named with the first letter of the collection id and the collection name:$DLXSROOT/xxx/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile. See the <a href="../Directory_Structure.html" title="Directory Structure">DLPS Directory Conventions</a> section  and <a href="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" class="external text" title="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" rel="nofollow">Workshop discussion of Directory Conventions</a>for more information.
</p><p>When deciding on your collection id consider that it needs to be unique across all classes to enable cross-collection searching.  So you don't want both a text class collection with a collid of "my_coll" and a finding aid class collection with a collection id of "my_coll".  You will also probably want to make your collection ids rather short and make sure they don't contain any special characters, since they will also be used for sub-directory names.
</p><p>The Makefile we provide along with most of the data preparation scripts supplied with DLXS assume the directory structure described below. We recommend you follow these conventions.
</p>
<ul><li> Specialized scripts for collection-specific data preparation or preprocessing  are stored in $DLXSROOT/bin/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile.  The Makefile and preparedocs.pl which can be customized for a specific collection are stored in this directory. See the DLPS Directory Conventions section for more information.
</li><li> General processing utilities that can be applied to any collection for Findaid Class data prep are stored in $DLXSROOT/bin/f/findaid.
</li><li> Raw Finding aids should be stored in $DLXSROOT/prep/{c}/{coll}/data/. 
</li><li> Doctype declarations, data dictionary and fabricated region templates, and other files for preparing your data should be in $DLXSROOT/prep/{c}/{coll}/. Unlike the contents of other directories, everything in prep should be expendable after indexing. The Makefile stores temporary/intermediate files here as well.
</li><li> After running all the targets in the Makefile, the finalized, concatenated XML file for your finding aids collection will be created in $DLXSROOT/obj/{c}/{coll}/ , e.g., /l1/obj/b/bhlead/bhlead.xml.
</li><li> After	running all the targets in the Makefile, the index, region and data dictionary files will be stored in $DLXSROOT/idx/{c}/{coll}/ , e.g., /l1/idx/b/bhlead/bhlead.idx. These will be updated as the index related targets in the Makefile are run. See the XPAT documentation for more on these types of files.
</li></ul>
<a name="Fixing_paths"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=14" title="Edit section: Fixing paths">edit</a>]</span> <span class="mw-headline">Fixing paths</span></h4>
<p>The installation script should have changed all instances of /l1/ to your $DLXSROOT and all bang prompts "#!/l/local/bin/perl" to your location of perl.  However, you may wish to check the following scripts:
</p>
<ul><li>	$DLXSROOT/bin/f/findaid/output.dd.frag.pl
</li><li>	$DLXSROOT/bin/f/findaid/inc.extra.dd.pl
</li><li>	$DLXSROOT/bin/f/findaid/fixdoctype.pl
</li><li>	$DLXSROOT/bin/s/samplefa/preparedocs.pl 
</li></ul>
<p>You also might want to check that the path to the shell executable is correct in
</p>
<ul><li>	$DLXSROOT/bin/f/findaid/validateeach.sh
</li></ul>
<p>If you use the Makefile in  $DLXSROOT/bin/s/samplefa  you should check that the paths in the Makefile are correct for the locations of xpat, oxs, and osgmlnorm as installed on your system.  These are the Make varibles that should be checked:
</p>
<ul><li> XPATBINDIR
</li><li> OSX
</li><li> OSGMLNORM
</li></ul>
<a name="Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=15" title="Edit section: Step by step instructions for setting up Directories for Data Preparation">edit</a>]</span> <span class="mw-headline">Step by step instructions for setting up Directories for Data Preparation</span></h4>
<p>You can use the scripts and files from the sample finding aids collection "samplefa" as a basis for creating a new collection. 
</p>
<div class="tip">DLXS_TIP  
<ul><li><b>What is "/w/workshopfa"?</b>  
</li><li><b>How do I use the examples for my own collections?</b>
</li></ul>
<p>The instructions and examples in this section are designed for use at the DLXS workshop <a href="http://www.dlxs.org/training/workshops.html" class="external free" title="http://www.dlxs.org/training/workshops.html" rel="nofollow">http://www.dlxs.org/training/workshops.html</a>
</p><p>If you are not at the workshop, and want to use these instructions on your own collections, in the instructions that follow you would use /{c}/{coll} instead of /w/workshopfa where {c} is the first letter of your collection id and  {coll} is your collection id.  So for example if your collection id was mycoll instead of 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p>you would do 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/m/mycoll/mycoll.extra.srch
</pre>
</div>
<p>This documentation will make use of the concept of the $DLXSROOT, which is the place at which your DLXS directory structure starts. We generally use /l1/.
</p><p>To check your <span class="unixcommand">$DLXSROOT</span>, type the following command at the command prompt:
</p>
<pre>echo $DLXSROOT
</pre>
<p>The <span class="unixcommand">prep</span> directory under <span class="unixcommand">$DLXSROOT</span> is the space for you to take your encoded finding aids and "package them up" for use with the DLXS middleware. Create your basic directory <span class="unixcommand">$DLXSROOT/prep/w/workshopfa</span> and its <span class="unixcommand">data</span> subdirectory with the following command:
</p>
<pre>mkdir -p $DLXSROOT/prep/w/workshopfa/data
</pre>
<p>Move into the <span class="unixcommand">prep</span> directory with the following command:
</p>
<pre>cd $DLXSROOT/prep/w/workshopfa
</pre>
<p>This will be your staging area for all the things you will be doing to your EADs, and ultimately to your collection. At present, all it contains is the <span class="unixcommand">data</span> subdirectory you created a moment ago. Unlike the contents of other collection-specific directories, everything in <span class="unixcommand">prep</span> should be ultimately expendable in the production environment.
</p><p>Copy the necessary files into your <span class="unixcommand">data</span> directory with the following commands:
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/data/*.xml $DLXSROOT/prep/w/workshopfa/data/.
</pre>
<p>We'll also need a few files to get us started working. They will need to be copied over as well, and also have paths adapted and collection identifiers changed. Follow these commands:
</p><p><br />
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.ead2002.dcl $DLXSROOT/prep/w/workshopfa/workshopfa.ead2002.dcl
cp $DLXSROOT/prep/s/samplefa/samplefa.concat.ead.dcl $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl
mkdir -p $DLXSROOT/obj/w/workshopfa
mkdir -p $DLXSROOT/bin/w/workshopfa
cp $DLXSROOT/bin/s/samplefa/preparedocs.pl $DLXSROOT/bin/w/workshopfa/preparedocs.pl
cp $DLXSROOT/bin/s/samplefa/Makefile $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>Make sure you check and edit if necessary the perl bang prompt and the paths to your shell and directories in these files:
</p>
<pre>   * $DLXSROOT/bin/f/findaid/stripdoctype.pl
   * $DLXSROOT/bin/f/findaid/fixdoctype.pl
   * $DLXSROOT/bin/f/findaid/validateeach.sh
   * $DLXSROOT/bin/w/workshopfa/preparedocs.pl
</pre>
<pre>   * $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>With the ready-to-go ead2002 encoded finding aids files in the <span class="unixcommand">data</span> directory, we are ready to begin the preparation process. This will include:
</p>
<ol><li> Validating the files individually against the EAD 2002 DTD
</li><li> Concatenating the files into one larger XML file
</li><li> Validating the concatenated file against the <i>dlxsead2002</i> DTD
</li><li> "Normalizing" the concatenated file.
</li><li> Validating the normalized concatenated file against the <i>dlxsead2002</i> DTD
</li></ol>
<p>These steps are generally handled via the <span class="unixcommand">Makefile</span> in <span class="unixcommand">$DLXSROOT/bin/s/samplefa</span> which we have copied to $DLXSROOT/bin/w/workshopfa.  <a href="../Release14_Makefile.html" title="Release14 Makefile">Example Makefile</a>.
</p>
<div class="tip">DLXS_TIP:
<p>Make sure you changed your copy of the Makefile to reflect /w/workshopfa instead of /s/samplefa and that your $DLXSROOT is set correctly in the Makefile. You will want to change lines 1-3 accordingly
</p>
<pre>   1  DLXSROOT = /l1
   2  NAMEPREFIX = samplefa
   3  FIRSTLETTERSUBDIR = s
</pre>
</div>
<p><br />
</p>
<div class="note"> Tip: Be sure not to add any space after the workshopfa or w. The Makefile ignores space immediately before and after the equals sign but treats all other space as part of the string. If you accidentally put a space after the FIRSTLETTERSUBDIR = s , you will get an error like "[validateeach] Error 127" or " Can't open $DLXSROOT/prep/w*.xml: No such file or directory at $DLXSROOT/bin/f/findaid/fixdoctype.pl line 25."
<p>If you look closely at the first line of what the Makefile reported to standard output (see below) you will 
see that the Makefile will get confused about file paths and instead of running the command:
</p><p><br />
</p>
<pre>$DLXSROOT/bin/f/findaid/validateeach.sh  
-d $DLXSROOT/prep/w/workshopfa/data/
-x $DLXSROOT/misc/sgml/xml.dcl 
-t $DLXSROOT/prep/w/workshopfa/workshopfa.ead2002.dcl 
</pre>
<p>It will complain that the file paths don't make sense:
</p>
<pre>$DLXSROOT/bin/f/findaid/validateeach.sh  
-d $DLXSROOT/prep/w /workshopfa/data/ 
-x $DLXSROOT/misc/sgml/xml.dcl 
-t $DLXSROOT/prep/w /workshopfa/workshopfa .ead2002.dcl 
working on $DLXSROOT/prep/w*.xml
Can't open $DLXSROOT/prep/w*.xml: No such file or directory at $DLXSROOT/bin/f/findaid/fixdoctype.pl line 25.
</pre>
<p>It looks for xml files in  $DLXSROOT/prep/w instead of $DLXSROOT/prep/w/workshopfa/data and exits.
</p>
</div>
<p><br />
</p>
<div class="note">
<p>Further note on editing the Makefile: If you modify or write your own Make targets, you need to make sure that a real "tab" starts each command line rather than spaces. The easiest way to check for these kinds of errors is to use "cat -vet Makefile" to show all spaces, tabs and newlines
</p>
</div>
<p>The installation program should have changed the locations of the various binaries in the Makefile to match your answers in the installation process.  However, its a good idea to check to make sure that  the locations of the various binaries to have been changed to match your installation. 
</p>
<ul><li> Change XPATBINDIR = /l/local/bin/ to the location of the <span class="unixcommand">xpat</span> binary in your installation
</li><li> Change the location of the <span class="unixcommand">osx</span> binary from
</li></ul>
<pre>OSX = /l/local/bin/osx
to the location in your installation
</pre>
<ul><li> Change the location of the <span class="unixcommand">osgmlnorm</span> binary from
</li></ul>
<pre>OSGMLNORM = /l/local/bin/osgmlnorm
to the location in your installation
</pre>
<div class="tip"> Tip: oxs and osgmlnorm are installed as part of the OpenSP package. If you are using linux, make sure that the OpenSP package for your version of linux is installed and make sure the paths above are changed to match your installation. If you are using Solaris you will have to install (and possibly compile) OpenSP. You may also need to make sure the $LD_LIBRARY_PATH environment variable is set so that the OpenSP programs can find the required libraries. For troubleshooting such problems the unix <b>ldd</b> utility is invaluble. See also links to OpenSP package on the tools page: <a href="../Useful_Tools.html" title="Useful Tools">Useful Tools</a>
</div>
<hr />
<a name="Set_Up_Directories_and_Files_for_XPAT_Indexing"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=16" title="Edit section: Set Up Directories and Files for XPAT Indexing">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for XPAT Indexing</span></h3>
<pre>If you are not following these instructions at the DLXS workshop, please substitute /{c}/{coll} where {c} is the first letter of your collection id 
and {coll}is your collection id  for any instance of /w/workshopfa 
and substitute {coll} wherever you see "workshopfa" in the following instructions.
</pre>
<p>First, we need to create the rest of the directories in the <b>workshopfa</b> environment with the following commands:
</p>
<pre>mkdir -p $DLXSROOT/idx/w/workshopfa
</pre>
<p>The <span class="unixcommand">bin</span> directory we created when we prepared directories for data preparation holds any scripts or tools used for the collection specifically; <span class="unixcommand">obj</span> ( created earlier) holds the "object" or XML file for the collection, and <span class="unixcommand">idx</span> holds the XPAT indexes. Now we need to finish populating the directories.
</p>
<pre>
 cp $DLXSROOT/prep/s/samplefa/samplefa.blank.dd  $DLXSROOT/prep/w/workshopfa/workshopfa.blank.dd
 cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p><br />
<b>Both of these files need to be edited </b>to reflect the new collection name and the paths to your particular directories. Failure to change even one line in one file can result in puzzling errors, because the scripts <i>are</i> working, just not necessarily in the directories you are looking at.
</p>
<pre>cd $DLXSROOT/prep/w/workshopfa
</pre>
<p>After editing the files, you can check to make sure you changed all the "samplefa" strings with the following command:
</p>
<pre>grep -l "samplefa" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p>You also need to check that "/l1/"  has been replacedby whatever $DLXSROOT is on your server. If you don't have an /l1 directory on your server (which is very likely if you are not here using a DLPS machine) you can check with:
</p>
<pre>grep -l "l1" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p><a href="#top" title="">Top</a>
</p>
<a name="Finding_Aids_Data_Preparation"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=17" title="Edit section: Finding Aids Data Preparation">edit</a>]</span> <span class="mw-headline">Finding Aids Data Preparation</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Finding Aids Data Preparation
</p><p><br />
</p>
<a name="Overview_of_Data_Preparation_and_Indexing_Steps"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=18" title="Edit section: Overview of Data Preparation and Indexing Steps">edit</a>]</span> <span class="mw-headline">Overview of Data Preparation and Indexing Steps</span></h3>
<p><b>Data Preparation</b> 
</p>
<ol><li> Validate the files individually against the EAD <i>2002</i> DTD<br /><b>make validateeach</b><br />
</li><li> Concatenate the files into one larger XML file<br /><b>make prepdocs</b><br />
</li><li> Validate the concatenated file against the <i>dlxsead2002</i> DTD:<br /><b>make validate</b><br />
</li><li> Normalize the concatenated file.<br /><b>make norm</b><br />
</li><li> Validate the normalized concatenated file against the <i>dlxsead2002</i> DTD <br /><b>make validate</b><br />
</li></ol>
<p>The end result of these steps is a file containing the concatenated EADs wrapped in a &lt;COLL&gt; element which validates against the dlxsead2002 and is ready for indexing:
</p>
<pre>&lt;COLL&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;

</pre>
<p><b>WARNING!</b>    If there are extra characters or some other problem with the part of the program that strips out the xml declaration and the doctype declaration the file will end up like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;
</pre>
<p>In this case you will get "character data not allowed" or similar errors during the make validate step. You can troubleshoot by looking at the concatenated file and/or checking your original EADs.
</p><p><b>Indexing</b>
</p>
<ol><li> <b>make singledd</b> indexes all the words in the concatenated file. 
</li><li> <b>make xml</b> indexes the XML structure by reading the DTD. Validates as it indexes.
</li><li> <b>make post</b> builds and indexes fabricated regions based on the XPAT queries stored in the workshopfa.extra.srch file.
</li></ol>
<a name="Preprocessing"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=19" title="Edit section: Preprocessing">edit</a>]</span> <span class="mw-headline">Preprocessing</span></h3>
<a name="Validating_and_Normalizing_Your_Data"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=20" title="Edit section: Validating and Normalizing Your Data">edit</a>]</span> <span class="mw-headline">Validating and Normalizing Your Data</span></h3>
<a name="Step_1:_Validating_the_files_individually_against_the_EAD_2002_DTD"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=21" title="Edit section: Step 1: Validating the files individually against the EAD 2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step1"><b>Step 1: Validating the files individually against the EAD 2002 DTD</b></span> </span></h4>
<pre>cd $DLXSROOT/bin/w/workshopfa
make validateeach


</pre>
<p>The Makefile runs the following command:
</p>
<pre>% $DLXSROOT/bin/f/finadaid/validateeach.sh
</pre>
<p><br />
What's happening: The makefile is running the bourne-shell script <a href="../Validateeach.sh.html" title="Validateeach.sh.r14">validateeach.sh</a> in the $DLXSROOT/bin/f/findaid directory. The script processes each *.xml file in the data directory.  For each file, it creates a temporary file without the public DOCTYPE declaration, and then runs <span class="unixcommand">onsgmls</span> on each of the resulting XML files in the <span class="unixcommand">data</span> subdirectory to make sure they conform with the EAD 2002 DTD. If validation errors occur, error files will be in the <span class="unixcommand">data</span> subdirectory with the same name as the finding aids file but with an extension of <span class="unixcommand">.err</span>. If there are validation errors, fix the problems in the source XML files and re-run.
</p><p>Check the error files by running the following commands
</p>
<pre> ls -l $DLXSROOT/prep/w/workshopfa/data/*err
</pre>
<p>if there are any *err files, you can look at them with the following command: 
</p>
<pre> less  $DLXSROOT/prep/w/workshopfa/data/*err
</pre>
<a name="Common_error_messages_and_solutions:"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=22" title="Edit section: Common error messages and solutions:">edit</a>]</span> <span class="mw-headline">Common error messages and solutions:</span></h5>
<dl><dt>onsgmls:  Command not found
</dt><dd>The location of the onsgmls binary is not in your $PATH.  
</dd></dl>
<dl><dt>entityref errors such as "general entity 'foobar' not defined" 
</dt><dd>If you use entityrefs in your EADs, you may see errors relating to problems resolving entities. <a href="../Example_entityref_errors.html" title="Example entityref errors">Example entityref errors</a>. The solution is to add the entityref declarations to the doctype declaration in these two files:
</dd></dl>
<ul><li><dl><dt>$DLXSROOT/prep/s/samplefa/samplefa.ead2002.dcl
</dt></dl>
</li></ul>
<dl><dd> This is the doctype declaration used by the validateeach.sh script that points to the EAD2002 DTD.
</dd></dl>
<ul><li><dl><dt>$DLXSROOT/prep/s/samplefa/samplefa.concat.ead.dcl
</dt></dl>
</li></ul>
<dl><dd> This is the doctype declaration that points to the dlxs2002 dtd.  The dlxs2002 dtd essentially the dlxs2002 dtd with modifications to provide for multiple eads within one file.  It is used by the "make validate" target of the Makefile to validate the concatenated file containing all of your EADs.
</dd></dl>
<ul><li>See  $DLXSROOT/prep/s/samplefa/samplefa.ead2002.entity.example.dcl for an example of adding entityrefs to your docytype declaration files.
</li></ul>
<a name="Step_2:_Concatentating_the_files_into_one_larger_XML_file_.28and_running_some_preprocessing_commands.29"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=23" title="Edit section: Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands)">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step2"><b>Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands) </b></span> </span></h4>
<pre>cd $DLXSROOT/bin/w/workshopfa
make prepdocs
</pre>
<p>The Makefile runs the following command:
</p>
<pre>$DLXSROOT/bin/w/workshopfa/preparedocs.pl 
  $DLXSROOT/prep/w/workshopfa/data  
  $DLXSROOT/obj/w/workshopfa/workshopfa.xml 
  $DLXSROOT/prep/w/workshopfa/logfile.txt
</pre>
<p>This runs the preparedocs.pl script on all the files in the specified data directory and writes the output to the workshopfa.xml file in the appropriate /obj subdirectory. It also outputs a logfile to the /prep directory:
</p><p>The Perl script does two sets of things:
</p>
<ol><li> Concatenates all the files
</li><li> Runs a number of preprocessing steps on all the files
</li></ol>
<p><b>Concatenating the files </b>
</p><p>The script finds all XML files in the <span class="unixcommand">data</span> subdirectory,and then strips off the XML declaration and doctype declaration from each file before concatenating them together. It also wraps the concatenated EADs in a &lt;COLL&gt; tag . The end result looks like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;

</pre>
<p><b>WARNING!</b>    If are extra characters or some other problem with the part of the program that strips out the xml declaration and the docytype declearation the file will end up like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;
</pre>
<p>This will cause the document to be invalid since the dlxsead2002.dtd does not allow anything between the closing tag of one &lt;/ead&gt; and the opening tag of the next one &lt;ead&gt;
</p><p>Some of the possible causes of such a problem are:
</p>
<ul><li> UTF-8 Byte Order Marks at the beginning of the file
</li><li> DOCTYPE declaration on more than one line
</li><li> XML processing instructions
</li></ul>
<p><b>Preprocessing steps</b>
</p><p>The perl program also does some preprocessing on all the files. Some of these steps are customized to the needs of the Bentley. 
</p><p>The preprocessing steps are:
</p>
<ul><li> finds all id attributes and prepends a number to them
</li><li> removes XML declaration
</li><li> removes DOCTYPE declaration
</li><li> removes XML processing instructions
</li><li> removes the utf8 Byte Order Mark
</li></ul>
<p>Bentley specific processing:
</p>
<ul><li> adds a prefix string "dao-bhl" to all DAO links 
</li><li> removes empty <span class="unixcommand">persname</span>, <span class="unixcommand">corpname</span>, and <span class="unixcommand">famname</span> elements
</li></ul>
<div class="tip">DLXS_TIP:You should look at the perl code and determine if you need to modify it so it is appropriate for your encoding practices. You probably will want to comment out the Bentley specific processing</div>
<p>The output of the combined concatenation and preprocessing steps will be the one collection named xml file which is deposited into the obj subdirectory.
</p><p>If your collections need to be transformed in any way, or if you do not want the transformations to take place (the DAO changes, for example), you can edit preparedocs.pl file to effect the changes. Some changes you may want to make include:
</p>
<ul><li> Changing the algorithm used to make id attibute unique. For example if your encoding practices use id attributes and targets, the out-of-the-box algorithm will remove the relationship between the attributes and targets. One possible modification might be to modify the algorithm to prepend the eadid or filename to all id and target attributes. (See the commented out code in preparedocs.pl for an example of how to do this)
</li><li> Modifying the program to read a list of files or list of eadids so that the files are concatenated in a particular order. The default sort order for search results is in occurance order, which translates to the order in which the eads are concatenated. If you write a script which looks at the eads for some element that you want to sort by and then outputs a list of filenames sorted by that order, you could then pass that file to a modified preparedocs.pl so it would concatenate the files in the order listed.
</li></ul>
<hr />
<a name="Step_3:_Validating_the_concatenated_file_against_the_dlxsead2002_DTD"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=24" title="Edit section: Step 3: Validating the concatenated file against the dlxsead2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step3"><b>Step 3: Validating the concatenated file against the dlxsead2002 DTD</b></span> </span></h4>
<pre>make validate
</pre>
<p>The Makefile runs the following command:
</p>
<pre>onsgmls -wxml -s -f $DLXSROOT/prep/w/workshopfa/workshopfa.errors 
$DLXSROOT/misc/sgml/xml.dcl   
$DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
$DLXSROOT/obj/w/workshopfa/workshopfa.xml
</pre>
<p>This runs the onsgmls command against the concatenated file using the dlxs2002dtd, and writes any errors to the workshopfa.errors file in the appropriate subdirectory in $DLXSROOT/prep/c/collection.. 
<a href="../Validate.html" title="Validate.R14">More details</a>
Note that we are running this using <span class="unixcommand"><b>workshopfa.concat.ead.dcl</b></span> not <span class="unixcommand"><b>workshopfa.ead2002.dcl</b></span>. The <b>workshopfa.concat.ead.dcl</b> file points to <b>$DLXSROOT/misc/sgml/dlxsead2002.ead</b> which is the <i>dlxsead2002</i> DTD. The <i>dlxsead2002</i> DTD is exactly the same as the <i>EAD2002</i> DTD, but adds a wrapping element, <span class="unixcommand">&lt;COLL&gt;</span>, to be able to combine more than one <span class="unixcommand">ead</span> element, more than one finding aid, into one file. It is, of course, a good idea to validate the file now before going further.
</p><p><br />
Run the following command
</p>
<pre> ls -l $DLXSROOT/prep/w/workshopfa/workshopfa.errors
</pre>
<p>If there is a workshopfa.errors file then run the following command to look at the errors reported
</p>
<pre> less $DLXSROOT/prep/w/workshopfa/workshopfa.errors
</pre>
<p><br />
</p>
<a name="Common_common_causes_of_error_messages_and_solutions"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=25" title="Edit section: Common common causes of error messages and solutions">edit</a>]</span> <span class="mw-headline">Common common causes of error messages and solutions</span></h5>
<dl><dt>make: onsgmls: Command not found
</dt><dd>OSGMLNORM variable in Makefile does not point to correct location of onsgmls for your installation or openSP is not installed.
</dd></dl>
<dl><dt>If there were no errors when you ran "make validateeach" but you are now seeing errors
</dt><dd>there was very likely a problem with the preparedocs.pl processing.
</dd></dl>
<ul><li> The DOCTYPE declaration did not get completely removed. (Scripts prior to Release 13 August 24 patch, don't always remove multiline DOCTYPE declarations)
</li><li> There was a UTF-8 Byte Order Mark at the begginning of one or more of the concatenated files
</li></ul>
<dl><dt>onsgmls</dt><dd>/l1/dev/tburtonw/misc/sgml/xml.dcl:1:W: SGML declaration was not implied
</dd><dd>The above error can be ignored.
</dd></dl>
<div class="tip">Warning: If you see any other errors <b>STOP!</b> You need to determine the cause of the problem, fix it, and rerun the steps until there are no errors from make validate. If you continue with the next steps in the process with an invalid xml document, the errors will compound and it will be very difficult to trace the cause of the problem. </div>
<a name="Step_4:_Normalizing_the_concatenated_file"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=26" title="Edit section: Step 4: Normalizing the concatenated file">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step4"><b>Step 4: Normalizing the concatenated file</b></span> </span></h4>
<pre>make norm
</pre>
<p>The Makefile runs a series of copy statements and two main commands:
</p><p><br /> 
</p>
<pre>1.)   /l/local/bin/osgmlnorm -f $DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors 
      $DLXSROOT/misc/sgml/xml.dcl 
      $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
      $DLXSROOT/obj/w/workshopfa/workshopfa.xml.prenorm &gt; $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm
</pre>
<p><br />
</p>
<pre>2.)  /l/local/bin/osx -E0 -bUTF-8 -xlower -xempty -xno-nl-in-tag 
     -f $DLXSROOT/prep/w/workshopfa/workshopfa.osx.errors 
     $DLXSROOT/misc/sgml/xml.dcl 
     $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
     $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm &gt; $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm.osx 
</pre>
<p>These commands ensure that your collection data is normalized. What this means is that any attributes are put in the order in which they were defined in the DTD. Even though your collection data is XML and attribute order should be irrelevant (according to the XML specification), due to a bug in one of the supporting libraries used by xmlrgn (part of the indexing software), attributes must appear in the order that they are defined in the DTD. If you have "out-of-order" attributes and don't run make norm, you will get <i>"invalid endpoints"</i> errors during the make post step.
</p>
<div class="tip">Tip: Step one, which normalizes the document writes its errors to <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors</span>. Be sure to check this file.</div>
<pre>less $DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors
</pre>
<p>Step 2, which runs osx to convert the normalized document back into XML produces lots of error messages which are written to $DLXSROOT/prep/w/workshopfa/workshopfa.osx.errors. These will also result in the following message on standard output:
</p>
<pre> make: [norm] Error 1 (ignored)
</pre>
<p>These errors are caused because we are using an XML DTD (the EAD 2002 DTD) and osx is using it to validate against the SGML document created by the osgmlnorm step. 
<span class="redtext">These are the only errors which may generally be ignored.</span> 
However, if the next recommended step, which is to run "make validate" again reveals an invalid document, you may want to rerun osx and look at the errors for clues. (Only do this if you are sure that the problem is not being caused by XML processing instructions in the documents as explained below)
</p>
<a name="Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=27" title="Edit section: Step 5: Validating the normalized file against the dlxsead2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step5"><b>Step 5: Validating the normalized file against the dlxsead2002 DTD</b></span> </span></h4>
<pre>make validate2
</pre>
<p>Check the resulting error file:
</p>
<pre>less $DLXSROOT/prep/w/workshopfa/workshopfa.errors2
</pre>
<p>We run this step again to make sure that the normalization process did not produce an invalid document. This is necessary because under some circumstances the "make norm" step can result in invalid XML. One known cause of this is the presense of XML processing instructions. For example: <b>"&lt;?Pub Caret1?&gt;"</b>. Although XML processing instructions are supposed to be ignored by any XML application that does not understand them, the problem is that when we use sgmlnorm and osx, which are SGML tools, they end up munging the output XML. The preparedocs.pl script used in the "make prepdocs" step should have removed any XML processing instructions.  
</p>
<div class="tip">Tip: If this second make validate step fails, but the "make validate" step before "make norm" succeeded, there is some kind of a problem with the normalization process.  You may want to start over by running "make clean" and then going through steps 1-4 again.  If that doesn't solve the problem you may want to check your EADs to make sure they do not have XML processing instructions and if they don't, you will then need to look at the error messages from the second make validate.</div>
<a name="Building_the_Index"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=28" title="Edit section: Building the Index">edit</a>]</span> <span class="mw-headline">Building the Index</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Building the Index
</p>
<a name="Indexing_Overview"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=29" title="Edit section: Indexing Overview">edit</a>]</span> <span class="mw-headline">Indexing Overview</span></h3>
<p>Indexing is relatively straightforward once you have followed the steps to set up data and directories and prepared and normalized your data as described in 
</p>
<ul><li><a href="Workshop_working_copy.html#Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation" title="Mounting Finding Aids: Release 14/Workshop working copy">Step by step instructions for setting up Directories for Data Preparation</a>,
</li><li><a href="Workshop_working_copy.html#Set_Up_Directories_and_Files_for_XPAT_Indexing" title="Mounting Finding Aids: Release 14/Workshop working copy">Set Up Directories and Files for XPAT Indexing</a>,
</li><li><a href="../Finding_Aids_Data_Preparation.html#Validating_and_Normalizing_Your_Data" title="Finding Aids Data Preparation">Validating and Normalizing Your Data</a>, 
</li></ul>
<p>To create an index for use with the Findaid Class interface, you will need to index the words in the collection, then index the XML (the structural metadata, if you will), and then finally "fabricate" regions based on a combination of elements (for example, defining what the "main entry" is, without adding a &lt;MAINENTRY&gt; tag around the appropriate &lt;AUTHOR&gt; or &lt;TITLE&gt; element). 
</p><p>The main work in the indexing step is making sure that the fabricated regions in the workshopfa.extra.srch file match the characteristics of your collection.  
</p>
<div class="tip"> Tip:  If the final "make validate" step in <a href="../Finding_Aids_Data_Preparation.html#Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD" title="Finding Aids Data Preparation">Validating the normalized file against the dlxsead2002 DTD</a> produced errors, you will need to fix the problem before running the indexing steps.  Attempting to index an invalid document will lead to indexing problems and/or corrupt indexes.</div>
<p>The <span class="unixcommand">Makefile</span> in the <span class="unixcommand">$DLXSROOT/bin/w/workshopfa</span> directory contains the commands necessary to build the index, and can be executed easily.
</p>
<pre>cd $DLXSROOT/bin/w/workshopfa
</pre>
<p>The following commands can be used to make the index:
</p><p><b>make singledd</b> indexes words in the EADs that have been concatenated into one large file for a collection. 
</p><p><b>make xml</b> indexes the XML structure by reading the DTD. It validates as it indexes.  
</p><p><b>make post</b> builds and indexes fabricated regions based on the XPAT queries stored in the workshopfa.extra.srch file. Because every collection is different, the *extra.srch file will probably need to be adapted for your collection.  If you try to index/build fabricated regions from elements not used in your finding aids collection, you will see errors like:
</p>
<pre>&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found: &lt;Error&gt;syntax error before: ")&lt;/Error&gt;  
</pre>
<p>when you use the make post command
</p>
<a name="Step_by_Step_Instructions_for_Indexing"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=30" title="Edit section: Step by Step Instructions for Indexing">edit</a>]</span> <span class="mw-headline">Step by Step Instructions for Indexing</span></h3>
<a name="Step_1:_Indexing_the_text"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=31" title="Edit section: Step 1: Indexing the text">edit</a>]</span> <span class="mw-headline"><span id="indexing_step1"><b>Step 1: Indexing the text</b></span></span></h4>
<p>Index all the words in the file of concatenated EADs with the following command:
</p>
<pre>
 cd $DLXSROOT/bin/w/workshopfa
 make singledd
</pre>
<p><i>The make file runs the following commands:</i>
</p>
<pre>
 cp $DLXSROOT/prep/w/workshopfa/workshopfa.blank.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.dd
 /l/local/xpat/bin/xpatbld -m 256m -D $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 cp $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/prep/w/workshopfa/workshopfa.presgml.dd
</pre>
<a name="Step_2:_Indexing_the_the_XML"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=32" title="Edit section: Step 2: Indexing the the XML">edit</a>]</span> <span class="mw-headline"><span id="indexing_step2"><b>Step 2: Indexing the the XML</b></span></span></h4>
<p>Index all the elements and attributes listed in the ead DTD that occur in the file of concatenated EADs by running the following command:
</p><p><br />
</p>
<pre>
 make xml
</pre>
<p><i>The makefile runs the following commands:</i>
</p>
<pre>
 cp $DLXSROOT/prep/w/workshopfa/workshopfa.presgml.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.dd
 /l/local/xpat/bin/xmlrgn -D $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/misc/sgml/xml.dcl
 	$DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
 	$DLXSROOT/obj/w/workshopfa/workshopfa.xml
 
 cp $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.prepost.dd
</pre>
<p><br />
After running this step, if you wish, you can see the indexed regions by issuing the following commands:
</p>
<pre>xpatu $DLXSROOT/w/workshopfa/workshopfa.dd
&gt;&gt; {ddinfo regionnames}
&gt;&gt; quit
</pre>
<p>You can also test out the xpat queries in your workshopfa.extra.srch file.  See <a href="http://localhost/mediawiki/index.php?title=Testing_Fabricated_Regions&amp;action=edit&amp;redlink=1" class="new" title="Testing Fabricated Regions (not yet written)">Testing Fabricated Regions</a>
</p>
<a name="Step_3:_Configuring_fabricated_regions"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=33" title="Edit section: Step 3: Configuring fabricated regions">edit</a>]</span> <span class="mw-headline"><span id="indexing_step3"><b>Step 3: Configuring fabricated regions</b></span></span></h4>
<p>Fabricated regions are set up in the $DLXSROOT/prep/c/collection/collection.extra.srch file.  The sample file $DLXSROOT/prep/s/samplefa/samplefa.extra.srch was designed for use with the Bentley's encoding practices.  If your encoding practices differ from the Bentley's, or if your collection does not have all the elements that the samplefa.extra.srch xpat queries expect, you will need to edit your *.extra.srch file.
</p><p>We recommend a combination of the following:
</p>
<ol><li> Iterative work to insure make post does not report errors
</li><li> Up front analysis
</li><li> Iterative work to insure that searching and rendering work properly with your encoding practices.
</li></ol>
<p>Depending on your knowledge of your encoding practices you may prefer to do "up front analysis" first prior to running "make post".  On the other hand, running "make post" will give you immediate feedback if there are any obvious errors.
</p>
<a name="Run_the_.22make_post.22_and_iterate_until_there_are_no_errors_reported."></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=34" title="Edit section: Run the &quot;make post&quot; and iterate until there are no errors reported.">edit</a>]</span> <span class="mw-headline"><span id="fabregions_post">Run the "make post" and iterate until there are no errors reported.</span></span></h5>
<p>Run the <b>"make post"</b> step and look at the errors reported.  Then modify *.extra.srch and rerun "make post".  Repeat this until <b>"make post"</b> does not report any errors. See <a href="Workshop_working_copy.html#Step_4:_Indexing_fabricated_regions" title="Mounting Finding Aids: Release 14/Workshop working copy">Step 4 Indexing fabricated regions</a> below for information on running "make post."
</p><p>The most common cause of "make post" errors related to fabricated regions result from a fabricated region being defined which includes an element which is not in your collection.  
</p><p>For example if you do not have any &lt;famname&gt; elements in any of the EADs in your collection and you are using the out-of-the-box samplefa.extra.srch, you will see an error message similare to the one below when xpat tries to index the mainauthor region using this rule below.
</p>
<pre>"No information for region "foo"
Error found:
&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found:
</pre>
<pre>
(
     (region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot;)
      within 
       (region &quot;origination&quot; within 
          ( region &quot;did&quot; within 
               (region &quot;archdesc&quot;)
          )
       )
      ); 
{exportfile /l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export;~sync &quot;mainauthor&quot;; 
</pre>
<p>So you could edit the rule to eliminate the "famname" element:
</p>
<pre>
(
     (region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;name&quot;)
      within 
       (region &quot;origination&quot; within 
          ( region &quot;did&quot; within 
               (region &quot;archdesc&quot;)
          )
       )
      ); 
{exportfile /l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export;~sync &quot;mainauthor&quot;; 
</pre>
<p><br />
See <a href="Workshop_working_copy.html#Common_common_causes_of_error_messages_and_solutions_2" title="Mounting Finding Aids: Release 14/Workshop working copy">Indexing Fabricated Regions: Common causes of error messages and solutions</a> for other examples of "make post" error messages and solutions.
</p>
<a name="Analysis_of_your_collection"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=35" title="Edit section: Analysis of your collection">edit</a>]</span> <span class="mw-headline"><span id="fabregions_analysis">Analysis of your collection</span></span></h5>
<p>You may be able to analyze your collection prior to running make post and determine what changes you want to make in the fabricated regions.  If your analysis misses any changes, you can find this out by using the two previous techniques.   
</p>
<ul><li> Once you have run "make xml", but before you run "make post", start up xpatu running against the newly created indexes:
</li></ul>
<pre> xpatu $DLXSROOT/idx/w/workshopfa/workshopfa.dd
</pre>
<p>then run the command 
</p>
<pre> &gt;&gt; {ddinfo regionnames}
</pre>
<p>This will give you a list of all the XML elements, and attributes
</p><p>Alternatively you can  create a file called xpatregions and insert the following text:
</p>
<pre>{ddinfo regionnames}
</pre>
<p>Then run this command 
</p>
<pre>$ xpatu /l1/dev/tburtonw/idx/w/workshopfa/workshopfa.dd &lt; xpatregions &gt; regions.out
</pre>
<p>Then you use the "regions.out" file you just created to sort and examine the list of fabricated regions which occur in your finding aids and compare them to the fabricated region queries in your copy  of samplefa.extra.srch ( which you copied to workshopfa.extra.srch or collection_name.extra.srch)
</p><p><br />
</p>
<a name="Exercise_the_web_user_interface"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=36" title="Edit section: Exercise the web user interface">edit</a>]</span> <span class="mw-headline"><span id="fabregions_ui">Exercise the web user interface</span></span></h5>
<div class="tip">It is best to use the other two techniques until "make post" does not report any errors. At that point you can then look for other possible problems with the searching and display which may be caused by differences between your encoding practices and those of the Bentley.  (The samplefa.extra.srch fabricated regions definitions are based on the Bentley's encoding practices).</div>
<p>Once make post does not report errors, you can follow the rest of the steps to put your collection on the web. Then carefully exercise the web user interface looking for the following symptoms: 
</p>
<ul><li> Searches that don't work properly because they depend on fabricated regions that don't match your encoding practices. 
</li><li> Rendering that does not work properly. An example is that the name/title of the finding aid may not show up if your &lt;unititle&gt; element precedes your &lt;origination&gt; element in the top level &lt;did&gt;. See also <a href="../Troubleshooting_Finding_Aids.html#Title_of_finding_aid_does_not_show_up" title="Troubleshooting Finding Aids">Title of finding aid does not show up</a>.
</li></ul>
<p>For more information on regions used for searching and rendering see 
</p>
<ul><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a>
</li></ul>
<a name="Step_4:_Indexing_fabricated_regions"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=37" title="Edit section: Step 4: Indexing fabricated regions">edit</a>]</span> <span class="mw-headline"><span id="indexing_step4"><b>Step 4: Indexing fabricated regions</b></span></span></h4>
<p>Index the fabricated regions specified in your workshopfa.extra.srch that occur in the file of concatenated EADs with the following command:
</p>
<pre>
 make post
</pre>
<p><i>The makefile runs the following commands:</i>
</p>
<pre>
 cp /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.prepost.dd
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
 touch /l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.init
 /l/local/xpat/bin/xpat -q /l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
 	&lt; /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.srch
 	| /l1/workshop/test02/dlxs/bin/t/text/output.dd.frag.pl
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/
 	&gt; /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.dd
 /l1/workshop/test02/dlxs/bin/t/text/inc.extra.dd.pl
 	/l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.dd
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
</pre>
<a name="Common_common_causes_of_error_messages_and_solutions_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=38" title="Edit section: Common common causes of error messages and solutions">edit</a>]</span> <span class="mw-headline">Common common causes of error messages and solutions</span></h5>
<dl><dt><i>"invalid endpoints"</i>
</dt><dd>If you get an <i>"invalid endpoints"</i> message from "make post", the most likely cause is XML processing instructions or some other corruption. The second "make validate" step should have caught these. 
</dd></dl>
<dl><dt> "No information for region "foo"
</dt></dl>
<pre>Error found:
&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found:
&lt;Error&gt;syntax error before: ")&lt;/Error&gt;
</pre>
<dl><dd>This is usually caused by the absence of a particular region that is listed in the *.extra.srch file but not present in your collection.  For example if you do not have any &lt;famname&gt; elements in any of the EADs in your collection and you are using the out-of-the-box samplefa.extra.srch, you will see the above  error message when xpat tries to index the mainauthor region using this rule:
</dd></dl>
<pre> ((region "persname" + region "corpname" + region "famname" + region "name") within (region "origination" within 
 (  region "did" within (region "archdesc")))); {exportfile "$DLXSROOT/idx/s/samplefa/mainauthor.rgn"}; export;  
 ~sync "mainauthor";
</pre>
<p>The easiest solution is to modify *extra.srch to match the characteristics of your collection. 
</p>
<div class="tip">Tip: An alternative that is useful if you have only a small sample of the EADs you will be mounting and you expect that some of the EADs you will be getting later might have the element that is currently missing from your collection, is to add a "dummy" EAD to your collection.  The "dummy" ead should contains all the elements you will ever expect to use (or that are required by the *.extra.srch file).  The "dummy" EAD should have all elements except the &lt;eadid&gt; empty.</div>
<p><br />
</p><p><br />
</p>
<dl><dt> Syntax error
</dt></dl>
<pre>Error found:
&lt;Error&gt;syntax error before: ")&lt;/Error&gt;
</pre>
<dl><dd>Sometimes xpat will claim there is a syntax error, when in fact some other error occurred just prior to where it thinks there is a syntax error.  For example in the error message for the missing "famname" above, in addition to the "No information for region "famname" error, xpat also reports a syntax error.  In this case once you fix the famname error, the false syntax error will go away.  However, if there are no other errors reported other than syntax errors, then there is probably a real syntax error.  You should always start with the first syntax error reported.  In many cases there are unbalanced parenthesis.  The easiest way to troubleshoot syntax errors is to start an xpatu session and cut and paste xpat queries from your *.extra.search file one at a time on the command line. (See example hereXXX).
</dd></dl>
<div class="tip"> Warning!  If "make post" produces errors, you need to fix them.  Otherwise searching and display of your finding aids may produce inconsistant results and crashes of the cgi script.</div>
<p>See also <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a> 
</p>
<hr />
<a name="Testing_the_index"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=39" title="Edit section: Testing the index">edit</a>]</span> <span class="mw-headline">Testing the index</span></h3>
<p>At this point it is a good idea to do some testing of the newly created index. Strategically, it is good to test this from a directory other than the one you indexed in, to ensure that relative or absolute paths are resolving appropriately.  Invoke xpat with the following command
</p>
<pre>xpatu $DLXSROOT/idx/w/workshopfa/workshopfa.dd
</pre>
<p>For more information about searching, see the XPAT manual.  
</p><p>Try searching for some likely regions. Its a good idea to test some of the fabricated regions. Here are a few sample queries:
</p>
<pre>&gt;&gt; region "ead"
  1: 3 matches

&gt;&gt; region "eadheader"
  2: 3 matches

&gt;&gt; region "mainauthor"
  3: 3 matches

&gt;&gt; region "maintitle"
  4: 3 matches

&gt;&gt; region "admininfo"
  5: 3 matches
</pre>
<p><a href="#top" title="">Top</a>
</p>
<a name="Working_with_Fabricated_Regions_in_Findaid_Class"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=40" title="Edit section: Working with Fabricated Regions in Findaid Class">edit</a>]</span> <span class="mw-headline">Working with Fabricated Regions in Findaid Class</span></h2>
<a name="Fabricated_Regions_Overview"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=41" title="Edit section: Fabricated Regions Overview">edit</a>]</span> <span class="mw-headline">Fabricated Regions Overview</span></h3>
<p>When you run "make xml" , DLXS uses XPAT in combination with xmlrgn and a DTD.  This process indexes the elements and attributes in the DTD as "regions," containers of content rather like fields in a database. These separate regions are built into the regions file (collid.rgn) and are identified in the data dictionary (collid.dd). This is what is happening when you are running "make xml".
</p><p>However, sometimes the things you want to identify collectively aren't so handily identified as elements in the DTD. For example, the Findaid Class search interface can allow the user to search in Names regions. Perhaps for your collection you want Names to include persname, corpname, geoname. By creating an XPAT query that ORs these regions, you can have XPAT index all the regions that satisfy the OR-ed query. For example:
</p>
<pre>(region "name" + region "persname" + region "corpname" + region "geoname" +
region "famname")
</pre>
<p>Once you have a query that produces the results you want, you can add an entry to the *.extra.srch file which (when you run the "make post" command) will run the query, create a file for export, export it, and sync it:
</p>
<pre>{exportfile "$DLXSROOT/idx/c/collid/names.rgn"} export ~sync "names"
</pre>
<a name="Why_Fabricate_Regions.3F"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=42" title="Edit section: Why Fabricate Regions?">edit</a>]</span> <span class="mw-headline">Why Fabricate Regions?</span></h3>
<p>Why fabricate regions? Why not just put these queries in the map file and call them names? While you could, it's probably worth your time to build these succinctly-named and precompiled regions; query errors are more easily identified in the index building than in the CGI, and XPAT searches can be simpler and quicker for terms within the prebuilt regions.
</p><p>The middleware for Findaid Class uses a number of fabricated regions in order to speed up xpat queries and simplify coding and configuration.
</p><p>Findaid Class uses fabricated regions for several purposes
</p>
<ol><li> To share code with Text Class (e.g. region "main")  
</li><li> Fabricated regions for searching  (e.g. region "names")
</li><li> Fabricated regions to produce the Table of Contents and to implement display of EAD sections as focused regions such as the "Title Page" or "Arrangement" ( See <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Working with the table of contents</a> for more information on the use of fabricated regions for the table of contents.)
</li><li> Other regions specifically used in a PI (region "maintitle" is used by the PI &lt;?ITEM_TITLE_XML?&gt; used to display the title of a finding aid at the top of each page)
</li></ol>
<p>The fabricated region "main" is set to refer to <span class="unixcommand">&lt;ead&gt;</span> in FindaidClass with:
</p>
<pre>(region ead); {exportfile "/l1/idx/b/bhlead/main.rgn"}; export; ~sync "main";
</pre>
<p>whereas in TextClass "main" can refer to <span class="unixcommand">&lt;TEXT&gt;</span>. Therfore, both FindaidClass and TextClass can share the Perl code, in a higher level subclass, that creates searches for "main".
</p><p>Other fabricated regions are used for searching such as the "maintitle" and "mainauthor" regions.
</p>
<a name="Fabricated_Regions_in_the_UI"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=43" title="Edit section: Fabricated Regions in the UI">edit</a>]</span> <span class="mw-headline">Fabricated Regions in the UI</span></h3>
<p>All of the search links in the dropdown menu for the basic search (see below) are based on indexes for fabricated regions.  
</p><p><a href="../Image_Basic_search.html" class="image" title="Image:Basic_search.png"><img alt="Image:Basic_search.png" src="../../mediawiki/images/2/2f/Basic_search.png" width="337" height="279" border="0" /></a>
</p><p>These are the default regions used for searching and the names used in the menu:
</p>
<dl><dt>archdesc</dt><dd>Entire Finding Aid
</dd><dt>names</dt><dd>Names
</dd><dt>places</dt><dd>Places
</dd><dt>subjects</dt><dd>Subjects
</dd><dt>callnum</dt><dd>Call Number
</dd><dt>maintitle</dt><dd>Collection Title
</dd><dt>repository</dt><dd>Repository
</dd></dl>
<p>(The relationship between the region and the name in the menu is set in the map file.  See <a href="../Mounting_the_Collection_Online.html#Make_Collection_Map" title="Mounting the Collection Online"> Make Collection Map</a> )
</p><p><br />
The majority of the fabricated regions for Findaid Class are used for the creation and display of the left hand table of contents in the "outline" view. The findaidclass.cfg file contains a hash called&nbsp;%gSectHeadsHash which is normally loaded into FindaidClass.pm's tocheads hash in the FindaidClass::_initialize method. The elements of the hash and the corresponding fabiricated regions are used to create the table of contents and to output the XML for the corresponding section of the EAD when one of the TOC links is clicked on by a user. The fabricated regions are used so XPAT can have binary indexes ready to use for fast retrieval of these EAD sections.  See <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Customizing Findaid Class: Working with the table of contents</a> for more information on the use of fabricated regions for the table of contents.
</p>
<a name="Working_with_extra.srch"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=44" title="Edit section: Working with extra.srch">edit</a>]</span> <span class="mw-headline">Working with extra.srch</span></h3>
<p>Fabricated regions within the Findaid Class can be found in the extra.srch file for the sample collection at <tt>$DLXSROOT/prep/s/samplefa/samplefa.extra.srch</tt>. As with any other elements used in the interface for a given collection, <b>fabricated regions used in the user interface, such as the names of searches available in the dropdown menu of the search box, must also be represented in the collmgr entry and the map file for that collection.</b>
</p><p>Some of the more interesting regions extracted from the samplefa.extra.srch file are listed below.
</p><p>One of these regions is the add. This used to be <span class="unixcommand">&lt;ADD&gt;</span> in the EAD 1.0 DTD, but now, is created based on the ead2002 DTD's <span class="unixcommand">&lt;descgrp&gt;</span> tag which contains a <span class="unixcommand">type</span> attribute of <span class="unixcommand">add</span>.
</p>
<pre>&lt;descgrp type=&quot;add&quot;&gt;</pre>
<p>A number of issues related to varying encoding practices can be resolved by the appropriate edits to the *.extra.srch file. (Although some of them may require changes to other files as well)
</p>
<ul><li> If your &lt;unititle&gt; element precedes your &lt;origination&gt; element in <span class="unixcommand">the top level &lt;did&gt;, you will have to modify the "maintitle" fabricated region query in *.extra.srch </span>
</li><li> If you do not use a &lt;frontmatter&gt; element, you will have to make modifications to various files including modifying *.extra.srch to provide an appropriate "Title Page" region based on the &lt;eadheader&gt;
</li><li> If your encoding practices for &lt;biohist&gt; differ from the Bentley's, you may need to make changes in the &lt;bioghist&gt; fabricated region although changes to other files may be suffient. The changes might include: modifying findaidclass.cfg or creating a subclass of FindaidClass and override FindaidClass:: GetBioghistTocHead, and/or changing the appropriate XSL files.
</li><li> If you want sections of the finding aid that are not completely within a well-defined element such as &lt;relatedmaterial&gt;or &lt;separatedmaterial&gt; to show up in the table of contents, you may have to create a fabricated region using the appropriate xpat query and then modify findaidclass.cfg and make other modifications to the code.
</li></ul>
<hr />
<blockquote>
<pre>
 
 
 
   (region ead); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/main.rgn&quot;}; export; ~sync &quot;main&quot;;
    
     ##
     (((region &quot;&lt;c01&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c02&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c03&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c04&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c05&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c06&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c07&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c08&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c09&quot;..&quot;&lt;/did&gt;&quot;) not incl (&quot;level=file&quot; + &quot;level=item&quot;)) incl &quot;level=&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/c0xhead.rgn&quot;}; export; ~sync &quot;c0xhead&quot;;
        ##
     ((region &quot;&lt;origination&quot;..&quot;&lt;/unittitle&gt;&quot;) within ((region did within region archdesc) not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/maintitle.rgn&quot;}; export; ~sync &quot;maintitle&quot;;
     ##
        
     ((region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot;) within (region &quot;origination&quot; within ( region &quot;did&quot; within (region &quot;archdesc&quot;)))); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export; ~sync &quot;mainauthor&quot;;
     ##
    
     (region &quot;abstract&quot; within ((region did within region archdesc) not within region &quot;c01&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/mainabstract.rgn&quot;}; export; ~sync &quot;mainabstract&quot;;
        ##
        ((region unitdate incl &quot;encodinganalog=245$f&quot;) within ((region did within region archdesc) not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/colldate.rgn&quot;}; export; ~sync &quot;colldate&quot;;
     ##
     
     (region dsc); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/contentslist.rgn&quot;}; export; ~sync &quot;contentslist&quot;;
     ##
      ########## admininfo ########
     admininfot = (region &quot;descgrp-T&quot; incl (region &quot;A-type&quot; incl &quot;admin&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/admininfo-t.rgn&quot;}; export; ~sync &quot;admininfo-t&quot;;
     ##
     ## ########## add ######
     addt = (region &quot;descgrp-T&quot; incl (region &quot;A-type&quot; incl &quot;add&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/add-t.rgn&quot;}; export; ~sync &quot;add-t&quot;;
   ## ########## frontmatter/titlepage ########
   frontmattert = region &quot;frontmatter-T&quot;; {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/frontmatter-t.rgn&quot;}; export; ~sync &quot;frontmatter-t&quot;;
     ##
     # frontmatter itself not needed as fabricated region since it exists
     # as a regular xml region
     ##
   ## ########## bioghist ########
     bioghist = ((region &quot;bioghist&quot; within region &quot;archdesc&quot;) not within region &quot;dsc&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/bioghist.rgn&quot;}; export; ~sync &quot;bioghist&quot;;
     
   ##bioghisthead = ((region &quot;&lt;bioghist&quot; .. &quot;&lt;/head&gt;&quot; within region &quot;archdesc&quot;) not within region &quot;dsc&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/bioghisthead.rgn&quot;}; export; ~sync &quot;bioghisthead&quot;;
     ##
   ((region did within region archdesc) not within region dsc); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/summaryinfo.rgn&quot;}; export; ~sync &quot;summaryinfo&quot;;;
     ##
   ##
   #############################
   (region &quot;subject&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot; + region &quot;persname&quot; + region &quot;geogname&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/subjects.rgn&quot;}; export; ~sync &quot;subjects&quot;;
   (region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot; + region &quot;persname&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/names.rgn&quot;}; export; ~sync &quot;names&quot;;
   
    
   #(region &quot;odd-T&quot; ^ (region odd not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/odd-t.rgn&quot;}; export; ~sync &quot;odd-t&quot;;  
 </pre>
</blockquote>
<p>See <a href="http://localhost/mediawiki/index.php?title=Samplefa.extra.srch.txt&amp;action=edit&amp;redlink=1" class="new" title="Samplefa.extra.srch.txt (not yet written)">samplefa.extra.srch</a> for all of the fabricated regions used with the samplefa collection.
</p>
<a name="Fabricated_regions_required_in_Findaid_Class"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=45" title="Edit section: Fabricated regions required in Findaid Class">edit</a>]</span> <span class="mw-headline">Fabricated regions required in Findaid Class</span></h3>
<ul><li> main
</li><li> maintitle
</li><li> mainauthor
</li><li> mainabstract
</li><li> colltitle
</li><li> colldate
</li><li> callnum
</li><li> contentslist
</li><li> contentslist-t
</li><li> admininfo
</li><li> admininfo
</li><li> admininfo-t
</li><li> frontmatter-t
</li><li> bioghist-t
</li><li> arrangement-t
</li><li> controlaccess-t
</li><li> controlaccess
</li><li> scopecontent-t
</li><li> summaryinfo-t
</li><li> summaryinfo
</li></ul>
<a name="Fabricated_regions_commonly_found_in_Findaid_Class"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=46" title="Edit section: Fabricated regions commonly found in Findaid Class">edit</a>]</span> <span class="mw-headline">Fabricated regions commonly found in Findaid Class</span></h3>
<ul><li> subjects
</li><li> names
</li></ul>
<p><a href="#top" title="">Top</a>
</p>
<a name="Customizing_Findaid_Class"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=47" title="Edit section: Customizing Findaid Class">edit</a>]</span> <span class="mw-headline">Customizing Findaid Class</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Customizing Findaid Class
</p>
<a name="Working_with_the_table_of_contents"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=48" title="Edit section: Working with the table of contents">edit</a>]</span> <span class="mw-headline">Working with the table of contents</span></h3>
<p>The table of contents on the left-hand side of the finding aid display is based on fabricated regions set up in *.extra.srch and configured either in a configuration file or in a subclass of FindaidClass.pm
</p><p>If a subclass is not being used to override the FindaidClass::_initialize method, the configuration file will be used.  It is:
</p>
<pre>$DLXSROOT/cgi/f/findaidclass/findaidclass.cfg 
</pre>
<p>The configuration file sets up a hash called&nbsp;%gSectHeadsHash. The relevant section of the findaidclass.cfg file is:
</p>
<pre># **********************************************************************
# Hash of section heads that XPAT should search for.  A reference to
# this hash is added as member data keyed by 'tocheads' to the
# FindaidClass object at initialization time. Comment out those that
# are missing in your finding aids.
# **********************************************************************
%gSectHeadsHash = (
                  'bioghist-t'      =&gt;  {
                                         'collection' =&gt; qq{Biography},
                                         'recordgrp' =&gt; qq{History},
                                        },
                  'controlaccess-t' =&gt; qq{Subject Terms},
                  'frontmatter-t'   =&gt; qq{Title Page},
                  'arrangement-t'   =&gt; qq{Arrangement},
                  'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                  'summaryinfo-t'   =&gt; qq{Summary Information},
                  'contentslist-t'  =&gt; qq{Contents List},
                  'admininfo-t'     =&gt; qq{Access and Use},
                  'add-t'           =&gt; qq{Additional Descriptive Data},
                 );
</pre>
<p><br />
The&nbsp;%gSectHeadsHash is normally loaded read from the configuration file and loaded into a hash called tocheads in the FindaidClass::_initialize method when the FindaidClass object is created.  If you wish to change the table of contents on a collection-specific basis, you can override the FindaidClass::_initialize method in a collection-specific subclass.
</p><p>For an example of using a subclass to override the default table of contents see:
$DLXSROOT/cgi/f/findaid/FindaidClass/<a href="../SamplefaFC.html" title="SamplefaFC.pm">SamplefaFC.pm</a>
</p><p><br />
</p><p>Note that the default setting in the Collection Manager for the samplefa collection is to use this subclass:
</p><p><a href="../Image_Samplefa_collmgr_subclass.html" class="image" title="image of CollMgr setting for subclass of Findaid Class"><img alt="image of CollMgr setting for subclass of Findaid Class" src="../../mediawiki/images/7/7e/Samplefa_collmgr_subclass.png" width="499" height="45" border="0" /></a>
</p><p><br />
</p><p>The diagram below shows the fabricated region and the corresponding EAD element tags for the out-of-the-box table of contents
</p><p><a href="../Image_Tochead2.html" class="image" title="Image:Tochead2.jpg"><img alt="Image:Tochead2.jpg" src="../../mediawiki/images/6/69/Tochead2.jpg" width="817" height="584" border="0" /></a>
</p>
<a name="Changing_the_labels_in_the_table_of_contents"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=49" title="Edit section: Changing the labels in the table of contents">edit</a>]</span> <span class="mw-headline">Changing the labels in the table of contents</span></h4>
<p>If you want to change the labels for all of your Findaid Class collections, you can change the strings in the&nbsp;%gSectHeadsHash hash in $DLXSROOT/cgi/f/findaid/findaidclass.cfg.  If you want to change the labels on a collection by collection basis, you will probably want to subclass and override the FindaidClass::_initialize method as is done in the sample file:  $DLXSROOT/cgi/f/findaid/FindaidClass/<a href="../SamplefaFC.html" title="SamplefaFC.pm">SamplefaFC.pm</a>
</p><p>In addition to changing the labels in the hash, you will probably also need to change the corresponding sections of the XSL for the "view entire text" view. To do this you should create a text.components.xsl file in your collection-specific directory $DLXSROOT/web/m/mycoll.  The  first statement in that file should be an import for the f/findaid/text.components.xsl (See xxx).   
</p><p>Copy the template for filtering the entire ead from $DLXSROOT/web/f/findaid/text.comonents.xsl
</p><p>That template starts with:
</p>
<pre> &lt;xsl:template match="ead" mode="main"&gt;
</pre>
<p>You will see a number of sections that put some text in a class="tophead":
</p>
<pre>
  &lt;xsl:if test=&quot;archdesc/controlaccess&quot;&gt;
      &lt;div class=&quot;tophead&quot;&gt;
        &lt;xsl:text&gt;Subject Terms&lt;/xsl:text&gt;
      &lt;/div&gt;
      &lt;blockquote&gt;
        &lt;xsl:apply-templates select=&quot;archdesc/controlaccess&quot;/&gt;
      &lt;/blockquote&gt;
    &lt;/xsl:if&gt;
</pre>
<p>These are the parts you will need to modify to match the changes you made to the TOCheads hash.
</p>
<a name="Adding_sections_to_the_table_of_contents"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=50" title="Edit section: Adding sections to the table of contents">edit</a>]</span> <span class="mw-headline">Adding sections to the table of contents</span></h4>
<p>We will use the sections/elements Related Material and Separated Material,&lt;relatedmaterial&gt; and &lt;separatedmaterial&gt; as an example.
</p>
<a name="Step_1.__Add_the_appropriate_xpat_region_definitions_to_your_extra.srch_file"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=51" title="Edit section: Step 1.  Add the appropriate xpat region definitions to your extra.srch file">edit</a>]</span> <span class="mw-headline">Step 1.  Add the appropriate xpat region definitions to your extra.srch file</span></h5>
<pre># Separated and related material
# separated material
(region "separatedmaterial-T" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demofa/sepmaterial-t.rgn"}; export; ~sync "sepmaterial-t";
(region "separatedmaterial" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demofa/sepmaterial.rgn"}; export; ~sync "sepmaterial";
#
# related material
(region "relatedmaterial-T" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demofa/relmaterial-t.rgn"}; export; ~sync "relmaterial-t";
(region "relatedmaterial" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demofa/relmaterial.rgn"}; export; ~sync "relmaterial";
</pre>
<a name="Step_2.__Modify_the_TOC_headers_hash"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=52" title="Edit section: Step 2.  Modify the TOC headers hash">edit</a>]</span> <span class="mw-headline">Step 2.  Modify the TOC headers hash</span></h5>
<p>You can either <a href="Workshop_working_copy.html#Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg_config_file." title="Mounting Finding Aids: Release 14/Workshop working copy">2A modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg config file</a> if you want to change this for all your collections
or <a href="Workshop_working_copy.html#Step_2.B._Create_a_subclass" title="Mounting Finding Aids: Release 14/Workshop working copy">2.B.create a subclass</a>, if this change only applies to one of your collections.
</p>
<a name="Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg__config_file."></a><h6><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=53" title="Edit section: Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.">edit</a>]</span> <span class="mw-headline">Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.</span></h6>
<p>Add the two regions and the text labels you want to the&nbsp;%gSectHeadsHash in 
$DLXSROOT/cgi/f/findaidclass/findaidclass.cfg 
</p>
<pre>%gSectHeadsHash = (
                  'bioghist-t'      =&gt;  {
                                         'collection' =&gt; qq{Biography},
                                         'recordgrp' =&gt; qq{History},
                                        },
                  'controlaccess-t' =&gt; qq{Subject Terms},
                  'frontmatter-t'   =&gt; qq{Title Page},
                  'arrangement-t'   =&gt; qq{Arrangement},
                  'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                  'summaryinfo-t'   =&gt; qq{Summary Information},
                  'contentslist-t'  =&gt; qq{Contents List},
                  'admininfo-t'     =&gt; qq{Access and Use},
                  'add-t'           =&gt; qq{Additional Descriptive Data},
                  # add the two lines below:
                  'sepmaterial-t'           =&gt; qq{Separated Material},
                  'relmaterial-t'           =&gt; qq{Related Material},
                 );
</pre>
<p><br />
</p>
<a name="Step_2.B.__Create_a_subclass"></a><h6><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=54" title="Edit section: Step 2.B.  Create a subclass">edit</a>]</span> <span class="mw-headline">Step 2.B.  Create a subclass</span></h6>
<p><span>(only if you don't do step 2.A.)</span>
</p><p>Step 2.B.1. Create the subclass
</p><p>The easiest way to do this is to copy the example subclass in 
$DLXSROOT/cgi/f/findaid/FindaidClass/SamplefaFC.pm
</p><p>Copy this file to 
$DLXSROOT/cgi/f/findaid/FindaidClass/MyCollNameFC.pm  (in the version below we have used DemofaFC.pm
</p><p><br />
Change the package name to match the name of the module.
change package SamplefaFC to package DemofaFC;
</p><p>Add the sections you want to sub _intitialize
</p>
<pre>sub _initialize
{
   my $self = shift;
   my ( $collid, $cio, $optionalArgsHashRef ) = @_;
   $self-&gt;SUPER::_initialize( @_ );
   # Not necessary to subclass this item unless there are other outline
   # heads that are desired
   $self-&gt;SetSelfKeyInfo( 'tocheads' =&gt;
                          {
                           'bioghist-t'      =&gt;  {
                                                  'collection' =&gt; qq{Biography},
                                                  'recordgrp' =&gt; qq{History},
                                                 },
                           'controlaccess-t' =&gt; qq{Subject Terms},
                           'frontmatter-t'   =&gt; qq{Title Page},
                           'arrangement-t'   =&gt; qq{Arrangement},
                           'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                           'summaryinfo-t'   =&gt; qq{Summary Information},
                           'contentslist-t'  =&gt; qq{Contents List},
                           'admininfo-t'     =&gt; qq{Access and Use},
 #                          'add-t'           =&gt; qq{Additional Descriptive Data},
 # here are the two lines to be added
                           'sepmaterial-t'           =&gt; qq{Separated Material},
                           'relmaterial-t'           =&gt; qq{Related Material},
                          }
                        );
}
</pre>
<p><br />
</p><p><br />
</p><p>Step 2.B.2.  Edit the Collmgr entry to point to the new subclass
</p>
<a name="Step_3._Add_appropriate_XSL_to_render_the_sections"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=55" title="Edit section: Step 3. Add appropriate XSL to render the sections">edit</a>]</span> <span class="mw-headline">Step 3. Add appropriate XSL to render the sections </span></h5>
<p>See also <a href="../User_Interface_Customization.html#XSL_Stylesheet" title="User Interface Customization">User_Interface_Customization#XSL_Stylesheet</a> for more information on this step.
</p><p>Create a web directory for your collection and two empty files called text.components.xsl and text.xsl
</p>
<pre> mkdir $DLXSROOT/web/m/mycoll
 cd $DLXSROOT/web/m/mycoll
 echo "" &gt;text.components.xsl
 echo "" &gt;text.xsl
</pre>
<p>Add the basic xsl template and add an import statement to import the class level xsl file.
Example for $DLXSROOT/web/m/mycoll/text.components.xsl:
</p>
<pre>
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                version=&quot;1.0&quot;&gt;

  &lt;!-- import/include (should be first child of stylesheet element --&gt;
  &lt;!-- DLXS convention: for import, path is always relative to DLXSROOT/web --&gt;
  &lt;xsl:import href=&quot;../../f/findaid/text.components.xsl&quot;/&gt;

   
   &lt;/xsl:stylesheet&gt;

</pre>
<p>For $DLXSROOT/web/m/mycoll/text.xsl, use the same text as above, except change the name of the imported file from "f/findaid/text.components.xsl" to "f/findaid/text.xsl"
</p><p>For text.xsl you need to copy the template for       &lt;xsl:template match="RegionContent"&gt; from f/findaid/text.xsl.
</p><p>Add sections for relmaterial and sepmaterial  (Note that if you named your region searches differently in your extra.srch you will have to change the lines to match accordingly.)
</p>
<pre>
      &lt;xsl:template match=&quot;RegionContent&quot;&gt;
        &lt;xsl:choose&gt;
          &lt;!-- This is a copy of the template by the same name in  
               $DLXSROOT/webf/findaid/text.xsl 
               We are just adding a few lines for two new sections
               --&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'relmaterial'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;relatedmaterial&quot;/&gt;
          &lt;/xsl:when&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'sepmaterial'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;separatedmaterial&quot;/&gt;
          &lt;/xsl:when&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'summaryinfo'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;summaryinfo&quot;/&gt;
          &lt;/xsl:when&gt;
          ....
     &lt;/xsl:template&gt;
</pre>
<p><br />
</p><p>For text.components.xsl, there are two steps.
</p><p>1) Create templates for the sections (in this case &lt;relatedmaterial&gt; and &lt;separatedmaterial&gt; ). 
</p><p>Here we have added some text "Debugging: XXX" and a simple "xsl:apply-templates".  You may need to make more changes, but this is a good start.  (Alternatively, you can use &lt;xsl:copy-of select="."&gt; instead of apply-templates for debugging purposes and that should echo the raw xml to your html page.)
</p><p>2) Copy the entire main ead processing template from $DLXSROOT/web/f/findaid/text.components.xsl 
</p><p>3) Add appropriate templates for your new TOC sections to the main ead processing template.
</p><p><br />
</p>
<pre>
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                version=&quot;1.0&quot;&gt;

  &lt;xsl:import href=&quot;../../f/findaid/text.components.xsl&quot;/&gt;

  &lt;xsl:template match=&quot;relatedmaterial&quot;&gt;
    &lt;xsl:text&gt;Debugging: Related Material &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match=&quot;separatedmaterial&quot;&gt;
    &lt;xsl:text&gt;Debugging: Separated Material &lt;/xsl:text&gt;
      &lt;xsl:apply-templates/&gt;
  &lt;/xsl:template&gt;

&lt;!-- main ead processing template goes here--&gt;


 &lt;/xsl:stylesheet&gt;
</pre>
<a name="Changing_the_Bioghist_labels_to_use_the_appropriate_.3Chead.3E_elements"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=56" title="Edit section: Changing the Bioghist labels to use the appropriate &amp;lt;head&amp;gt; elements">edit</a>]</span> <span class="mw-headline">Changing the Bioghist labels to use the appropriate &lt;head&gt; elements</span></h3>
<p>This section may be unnecessary if we make this the default FindaidClass behavior and move the Bentley-Specific behavior to a subclass.
</p><p>2 Options
</p><p>1) Fixed label for all bioghists regardless of archesc level or head
2) use first head element in bioghist
</p><p>For option 1 you can change the label in the toc heads but also need to overide FindaidClass since it will try to replace the label!
Also need to subclass the templates for handling bioghist in text.components.xsl
Both in the general match=bioghist (where you don't want the &lt;head&gt; twice)
and in the whole ead section where the FindaidClass Bentley logic is duplicated in the xsl
i.e. xsl:when archdesc/[@level='recordgrp']...
</p><p>The DLXS release 14 code needs to be written so non UM users don't have to jump through hoops to use the &lt;head&gt; element to label bioghist.
</p>
<a name="Mounting_the_Collection_Online"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=57" title="Edit section: Mounting the Collection Online">edit</a>]</span> <span class="mw-headline">Mounting the Collection Online</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Mounting the Collection Online
</p><p>These are the final steps in deploying an Findaid Class collection online. Here the <b>Collection Manager</b> will be used to create and edit a <b>Collection Database</b> entry for <b>workshopfa</b> . The <b>Collection Manager</b> will also be used to check the <b>Group Database</b>. Finally, we need to work with the collection map and the set up the collection's web directory.
</p><p><br />
</p>
<a name="Create_and_edit_an_entry_in_the_Collection_Database_for_your_collection_with_CollMgr"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=58" title="Edit section: Create and edit an entry in the Collection Database for your collection with CollMgr">edit</a>]</span> <span class="mw-headline"> Create and edit an entry in the Collection Database for your collection with CollMgr </span></h3>
<p>Each collection has a record in the collection database that holds collection specific configurations for the middleware. CollMgr (Collection Manager) is a web based interface to the collection database that provides functionality for editing each collection's record. Collections can be checked-out for editing, checked-in for testing, and released to production. In general, a new collection needs to have a CollMgr record created from scratch before the middleware can be used. 
</p><p>Step 1.  Create a workshopfa Collmgr entry by copying from samplefa.
</p><p><b>A.  Login to Collmgr.</b>  The URL should be: 
</p>
<pre>http://path_to_cgi/cgi/c/collmgr/collmgr 
</pre>
<p>The collmgr page is usually set up to use apache basic authorization.  The username and password should have been set up when you set up your virtual host in apache. (<a href="../Sample_apache_virtual_host.html" title="Sample apache virtual host">sample apache virtual host</a>
)
</p><p><b>B. Select Manage Collections:Findaid Class:</b>
</p><p><a href="../Image_Collmgr1.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/1/19/Collmgr1.png" width="706" height="180" border="0" /></a> 
<a href="../Image_Collmgr2.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/4/42/Collmgr2.png" width="173" height="245" border="0" /></a>
</p><p><b>C.  Select samplefa and click on "copy a collection" </b>(Note: In the image below workshopfa already exists, but in your clean install it will not exist)
</p><p><a href="../Image_Collmgr3.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/a/ad/Collmgr3.png" width="767" height="449" border="0" /></a> 
</p><p><b>D. Enter your collection id</b> (workshopfa)
<a href="../Image_Collmgr4.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/4/41/Collmgr4.png" width="658" height="220" border="0" /></a> 
</p><p><b>E. Change all occurances of "samplefa" to "workshopfa"</b>  For example in the section below the webdir should be changed from "s/samplefa" to "w/workshopfa" (And you need to copy and rename the appropriate files from $DLXSROOT/web/s/samplefa to $DLXSROOT/web/w/workshopfa)
</p><p><b>WARNING! If you forget to change one of the entries it can lead to very confusing results.</b> For example if you forget to change the "dd" file entry from "/idx/s/samplefa/samplefa.dd" to /idx/w/workshopfa/workshopfa.dd", the middleware will try to search the samplefa collection but all the rest of the configuration information will point to workshopfa, which will result in erratic behavior and potentially confusing error messages.
</p><p><b>F. Change the entry for the subclassmodule from "/FindaidClass/SamplefaFC" to "FindaidClass".</b>  This means that this collection will use the default FindaidClass.pm instead of the SampleFC subclass.
(Unless you want to subclass Findaid Class in which case you would replace "SamplefaFC with the name of your collection-specific subclass)
</p><p><a href="../Image_Collmgr6.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/e/ee/Collmgr6.png" width="466" height="73" border="0" /></a> 
</p><p><br />
<b>G. Set the containerdepth field to the depth of containers in your collection</b>
</p><p><a href="../Image_Collmgr5.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/a/a1/Collmgr5.png" width="464" height="49" border="0" /></a> 
</p><p>For example if you have levels c01 to c05 set the containerdepth to 5.  You can use the xpat command {ddinfo regionnames} to look at your data and look for the highest c level to determine what number to put here.
</p>
<pre>xpatu $DLXSROOT/idx/s/samplefa/samplefa.dd
?&gt;&gt; {ddinfo regionnames}
</pre>
<p>If you have containerdepth  set to a number that is higher than what is in your data, xpat will try to search for the missing c0x level elements and will produce errors.  This can occur whenever xpat tries to query the 'c0xheads" fabricated region.  For example we set the continer depth to 7 for the samplefa collection (the samplefa collection only has c01-c06) and then got the following error message when we tried to view a kwic (search terms in context) view for the Post Family Papers in our web browser: 
</p>
<pre>Message: Query error in samplefa, samplefa.dd, query=pr.region.c0xhead 
(region "c0xhead" ^ ( region "c07" incl *detailslicesearch ));, 
Error=No information for region c07 in the data dictionary. syntax error before: ))
</pre>
<p>You will also probably want to edit: 
</p>
<ul><li>fields related to the dynamic browse page (See <a href="#Create_a_browse_page" title="">Create a browse page</a>)
</li><li>fields related to searching and sorting in the user interface:  regionsearch, termsearch, sortfields (Note that these need to match the entries in your <a href="#Make_Collection_Map" title="">map file</a>
</li></ul>
<p><i>More Documentation</i>
</p>
<ul><li> <a href="../Collection_Manager_Field_Descriptions.html" title="Collection Manager Field Descriptions">Collection Manager Field Descriptions</a>
</li></ul>
<a name="Review_the_Groups_Database_Entry_with_CollMgr"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=59" title="Edit section: Review the Groups Database Entry with CollMgr">edit</a>]</span> <span class="mw-headline"> Review the Groups Database Entry with CollMgr </span></h3>
<p>Another function of CollMgr allows the grouping of collections for cross-collection searching. Any number of collection groups may be created for Findaid Class. Findaid Class supports a group with the groupid "all". It is not a requirement that all collections be in this group, though that's the basic idea. Groups are created and modified using CollMgr.
</p>
<a name="Make_Collection_Map"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=60" title="Edit section: Make Collection Map">edit</a>]</span> <span class="mw-headline"> Make Collection Map </span></h3>
<p>Collection mapper files exist to identify the regions and operators used by the middleware when interacting with the search forms. Each collection will need one, but most collections can use a fairly standard map file, such as the one in the <b>samplefa</b> collection. The map files for all Findaid Class collections are stored in $DLXSROOT/misc/f/findaid/maps
</p><p>You can find an example map file for the sample finding aids collection at DLXSROOT/misc/f/findaid/maps/samplefa.map. Rather than modifying this file, you should copy it so that you always have a blank copy to which to refer.
</p><p>You can use the following commands to copy the samplefa.map file to use as a basis for your collection:
</p>
<pre> cd $DLXSROOT/misc/f/findaid/maps
 cp samplefa.map workshopfa.map
</pre>
<p><br />
Map files contain mapped items where one term or name for the item is mapped to another term or name. For example, a term used by an HTML form to refer to a searchable region (e.g., "entire finding aid") can be mapped to an XPAT searchable region (e.g., EAD). For more general background on map files, see <a href="../Working_with_Map_Files.html" title="Working with Map Files">Working with Map Files</a>
</p><p><br />
Currently, the format of the map files is XML and each collection map file conforms to a simple DTD (we have considered implementation of other possible ways of mapping terms, such as a database where one could map from one column's data to another). The middleware reads the map file into a TerminologyMapper object after which the CGI program can at any time request of the object the mappings for terms. Each mapped item and its various terms are contained within a &lt;MAPPING&gt; element.
</p><p>Each mapping element in a map file consists of the following:
</p>
<dl><dt>label
</dt><dd> This element determines what will display in the user's browser when constructing searches. It must match the value used in the collmgr. (See step 2.)
</dd></dl>
<dl><dt>synthetic
</dt><dd> This element contains the variable name as it is used in the cgi.
</dd></dl>
<dl><dt>native
</dt><dd> The "native" element provides an appropriate XPAT search that the system will use to discover the appropriate content. The search may be simple (e.g., region EADID) or complex (e.g., ((region DID within region ARCHDESC) not within region DSC)) 
</dd></dl>
<dl><dt>nativeregionname
</dt><dd> The element name itself, as it is indexed, without terms used in the XPAT search.
</dd></dl>
<p>Map files take language that is used in the forms and translates it into language for the cgi and for XPAT. For example, if you want your users to be able to search within names, you need to add a mapping for how you want headings and categories to appear in the search interface (case is important, as is pluralization!), how the cgi variable is set (usually in all caps, and not stepping on an existing variable), and how XPAT will identify and retrieve this natively (in XPAT search language).
The first part of the map file is operator mapping, for the form, the cgi, and XPAT, and the second part is for region mapping. You might note that some of the fields that are defined in the map file correspond to some of the fabricated regions.
Note: The larger the map file, the slower your site will run, so you don’t necessarily want to map everything, such as variations of singular and plural fields.
</p>
<a name="More_Documentation"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=61" title="Edit section: More Documentation">edit</a>]</span> <span class="mw-headline"> <i>More Documentation</i> </span></h3>
<ul><li> <a href="../Working_with_Map_Files.html" title="Working with Map Files">Working with Map Files</a>
</li></ul>
<hr />
<a name="Set_Up_the_Collection.27s_Web_Directory"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=62" title="Edit section: Set Up the Collection's Web Directory">edit</a>]</span> <span class="mw-headline"> Set Up the Collection's Web Directory </span></h3>
<p>Each collection may have a <span class="unixcommand">web</span> directory with custom Cascading Style Sheets, interface templates, graphics, and javascript. The default is for a collection to use the web templates at<span class="unixcommand"> $DLXSROOT/web/f/findaid</span>. Of course, collection specific templates and other files can be placed in a collection specific web directory, and it is necessary if you have any customization at all. <i>DLXS Middleware uses [../ui/index.html#fallback fallback] to find HTML related templates, chunks, graphics, js and css files.</i>
</p><p>For a minimal collection, you will want two files: index.html and <span class="unixcommand">FindaidClass-specific.css</span>.
</p>
<pre>mkdir -p $DLXSROOT/web/w/workshopfa
cp $DLXSROOT/web/s/samplefa/index.html $DLXSROOT/web/w/workshopfa/index.html
cp $DLXSROOT/web/s/samplefa/findaidclass-specific.css $DLXSROOT/web/w/workshopfa/findaidclass-specific.css
</pre>
<div class="tip">DLXS_TIP: You will need to change the collection name and paths from samplefa to workshopfa etc..</div>
<p>You might want to change the look radically, if your HTML skills are up to it.
</p><p>Note that the browse link on the index.html page is hard-coded to go to the samplefa hard-coded browse.html page. You may want to change this to point to a dynamic browse page (see below). The url for the dynamic browse page is ".../cgi/f/findaid/findaid-idx?c=workshopfa;page=browse".
</p><p>If you want to use a hard-coded browse page, you could copy the $DLXSROOT/web/s/samplefa/browse.html page to $DLXSROOT/web/w/workshopfa/browse.html and edit the link in $DLXSROOT/web/w/workshopfa/index.html accordingly.
</p><p>If you would prefer a dynamic home page, instead of the static index.html, you can copy and modify the home.xml and home.xsl files from $DLXSROOT/web/f/findaid/. Note that they are currently set up to be the home page for all finding aids collections, so you will have to do some considerable editing. However they contain a number of PIs that you may find useful. In order to have these pages actually be used by DLXS, they have to be present in your $DLXSROOT/web/w/workshopfa/ directory and <b>there can't be an index.html page in that directory.</b> The easiest thing to do, if you have an existing index.html page is to rename it to "index.html.foobar" or something. <br />
</p>
<a name="Create_a_browse_page"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=63" title="Edit section: Create a browse page">edit</a>]</span> <span class="mw-headline"> Create a browse page </span></h3>
<p>See the documentation: <a href="../Setting_up_Dynamic_Browsing.html" title="Setting up Dynamic Browsing">Setting up Dynamic Browsing</a>
</p>
<a name="Try_It_Out"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=64" title="Edit section: Try It Out">edit</a>]</span> <span class="mw-headline"> Try It Out </span></h3>
<p>http://$DLXSROOT/cgi/f/findaid/findaid-idx?c=workshopfa
</p><p><a href="#top" title="">Top</a>
</p>
<a name="Troubleshooting_Finding_Aids"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=65" title="Edit section: Troubleshooting Finding Aids">edit</a>]</span> <span class="mw-headline">Troubleshooting Finding Aids</span></h2>
<a name="General_Techniques"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=66" title="Edit section: General Techniques">edit</a>]</span> <span class="mw-headline">General Techniques</span></h3>
<a name="Common_Problems_and_Solutions"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=67" title="Edit section: Common Problems and Solutions">edit</a>]</span> <span class="mw-headline">Common Problems and Solutions</span></h4>
<a name="Title_of_Finding_Aid_does_not_show_up"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=68" title="Edit section: Title of Finding Aid does not show up">edit</a>]</span> <span class="mw-headline">Title of Finding Aid does not show up</span></h5>
<p>This is usually caused by the &lt;origination&gt; preceding the &lt;unittitle&gt; in the top level &lt;did&gt; element of your EAD
</p><p>In the *.extra.srch file
</p><p><br />
comment out the following line:
</p><p><i>(note that the region definitions are all on one line, but have been wrapped so they will be readable in the wiki)</i>
</p><p><br />
</p>
<pre>##
((region "&lt;origination".."&lt;/unittitle&gt;") 
within ((region did within region archdesc)
not within region dsc));
{exportfile "/l1/release/13/idx/s/samplefa/maintitle.rgn"}; 
 export; ~sync "maintitle";
##
</pre>
<p>copy the line but reverse the order of unittitle and origination
</p>
<pre>##
((region "&lt;unittitle".."&lt;/origination&gt;") 
within ((region did within region archdesc)
not within region dsc));
{exportfile "/l1/release/13/idx/s/samplefa/maintitle.rgn"}; 
export; ~sync "maintitle";
##
</pre>
<p><br />
</p>
<ul><li> make post errors
<ul><li> x
</li><li> y
</li></ul>
</li></ul>
<p>See also 
</p>
<ul><li> <a href="#Customizing_Findaid_Class" title=""> Customizing Findaid Class</a>
</li><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class </a>
</li></ul>
<p><br />
</p><p><br />
</p>
<a name="Linking_from_Finding_Aids_Using_ID_Resolver"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=69" title="Edit section: Linking from Finding Aids Using ID Resolver">edit</a>]</span> <span class="mw-headline"><a href="../Linking_from_Finding_Aids_Using_ID_Resolver.html" title="Linking from Finding Aids Using ID Resolver">Linking from Finding Aids Using ID Resolver</a></span></h2>
<a name="Workshop_Materials"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=70" title="Edit section: Workshop Materials">edit</a>]</span> <span class="mw-headline"><a href="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" class="external text" title="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" rel="nofollow">Workshop Materials</a></span></h2>
<a name="Working_with_the_User_Interface"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=71" title="Edit section: Working with the User Interface">edit</a>]</span> <span class="mw-headline">Working with the User Interface</span></h2>
<p>General user interface customizations, such as changing rendering style (CSS) or making changes to the XSL are covered in <a href="../Customizing_the_User_Interface.html" title="Customizing the User Interface">Customizing the User Interface</a>.  Specific user-interface issues related to Findaid Class are discussed in the following sections:
</p>
<ul><li> <a href="../Customizing_Findaid_Class.html" title="Customizing Findaid Class">Customizing Findaid Class</a>
<ul><li> <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Working with the table of contents</a>
</li></ul>
</li><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a> 
</li><li> <a href="../Troubleshooting_Finding_Aids.html#Common_Problems_and_Solutions" title="Troubleshooting Finding Aids">Common Problems and Solutions</a>
<ul><li> <a href="../Troubleshooting_Finding_Aids.html#Title_of_Finding_Aid_does_not_show_up" title="Troubleshooting Finding Aids">Title of Finding Aid does not show up</a>
</li></ul>
</li></ul>
<a name="Findaid_Class_Graphics_Files"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=72" title="Edit section: Findaid Class Graphics Files">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Graphics_Files.html" title="Findaid Class Graphics Files">Findaid Class Graphics Files</a></span></h3>
<p>Are there findaid class specific graphics files? The existing html docs actually point to a ../t/text/ directory and it appears that the graphics are generic and not at all specific to findaid class.
</p>
<a name="Findaid_Class_Processing_Instructions"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=73" title="Edit section: Findaid Class Processing Instructions">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Processing_Instructions.html" title="Findaid Class Processing Instructions">Findaid Class Processing Instructions</a></span></h3>
<p>These are some current processing instructions for Finding Aids Class, but the DLXS group will not maintain this section.
</p><p><a href="#top" title="">Top</a>
</p>
<a name="Finding_Aids_Workshop_Quick_Reference_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=74" title="Edit section: Finding Aids Workshop Quick Reference">edit</a>]</span> <span class="mw-headline"><a href="../Finding_Aids_Workshop_Quick_Reference.html" title="Finding Aids Workshop Quick Reference">Finding Aids Workshop Quick Reference</a></span></h3>
<p>Old (2007)workshop materials are located at <a href="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" class="external free" title="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" rel="nofollow">http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html</a>
</p>
<a name="Overview_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=75" title="Edit section: Overview">edit</a>]</span> <span class="mw-headline">Overview</span></h2>
<p>The Finding Aids Class is in many ways similar in behavior to Text Class. Access minimally includes full text searching across collections or within a particular collection of Finding Aids, viewing Finding Aids in a variety of display formats, and creation of personal collections ("bookbag") of Finding Aids.
</p><p>To mount a Finding Aids Collection, you will need to complete the following steps:
</p>
<ol><li> <a href="../Preparing_Data_and_Directories.html" title="Preparing Data and Directories">Prepare your data and set up a directory structure</a>
</li><li> <a href="../Finding_Aids_Data_Preparation.html#Validating_and_Normalizing_Your_Data" title="Finding Aids Data Preparation"> Validate and normalize your data</a> 
</li><li> <a href="../Building_the_Index.html" title="Building the Index">Build the Index</a>
</li><li> <a href="../Mounting_the_Collection_Online.html" title="Mounting the Collection Online">Mount the collection online</a>
</li></ol>
<a name="Findaid_Class_Behaviors_Overview_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=76" title="Edit section: Findaid Class Behaviors Overview">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Behaviors_Overview.html" title="Findaid Class Behaviors Overview">Findaid Class Behaviors Overview</a></span></h3>
<p>This section describes the basic Findaid Class behaviors.
</p>
<a name="Examples_of_Findaid_Class_Implementations_and_Practices_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=77" title="Edit section: Examples of Findaid Class Implementations and Practices">edit</a>]</span> <span class="mw-headline">Examples of Findaid Class Implementations and Practices</span></h3>
<p>This section contains links to public implementations of DLXS Findaid Class as well as documentation on workflow and implementation issues.  If you are a member of DLXS and have a collection or resource you would like to add, or wish to add more information about your collection, please edit this section.
</p>
<dl><dt><a href="http://bentley.umich.edu/EAD/index.php" class="external text" title="http://bentley.umich.edu/EAD/index.php" rel="nofollow">University of Michigan, Bentley Historical Library Finding Aids</a>
</dt><dd> Out-of-the-box DLXS 13 implementation.  
</dd><dt><a href="http://bentley.umich.edu/EAD/eadproject.php" class="external text" title="http://bentley.umich.edu/EAD/eadproject.php" rel="nofollow">Overview of Bentley's workflow process for Finding Aids </a>
</dt><dd>See also the links in <a href="#Practical_EAD_Encoding_Issues" title=""> Practical EAD Encoding Issues</a> for background on the Bentley EAD workflow and encoding practices
</dd></dl>
<dl><dt><a href="http://dlc.lib.utk.edu/f/fa/" class="external text" title="http://dlc.lib.utk.edu/f/fa/" rel="nofollow">Unversity of Tennesee Special Collections Libraries</a>
</dt><dd> DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="http://digital.library.pitt.edu/ead/" class="external text" title="http://digital.library.pitt.edu/ead/" rel="nofollow">University of Pittsburgh, Historic Pittsburgh Finding Aids</a>
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd><dt><a href="http://digital.library.pitt.edu/ead/aboutead.html" class="external text" title="http://digital.library.pitt.edu/ead/aboutead.html" rel="nofollow">Background on Pittsburgh Finding Aids workflow</a>
</dt><dd>
</dd></dl>
<dl><dt><a href="http://digicoll.library.wisc.edu/wiarchives" class="external text" title="http://digicoll.library.wisc.edu/wiarchives" rel="nofollow">University of Wisconsin, Archival Resources in Wisconsin: Descriptive Finding Aids</a> 
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="http://discover.lib.umn.edu/findaid" class="external text" title="http://discover.lib.umn.edu/findaid" rel="nofollow">University of Minnesota Libraries, Online Finding Aids</a> 
</dt><dd>DLXS Findaid Class version&nbsp;?
</dd></dl>
<dl><dt><a href="https://wiki.lib.umn.edu/Staff/FindingAidsInEAD/" class="external text" title="https://wiki.lib.umn.edu/Staff/FindingAidsInEAD/" rel="nofollow">EAD Implementation at the University of Minnesota</a>
</dt><dd>
</dd></dl>
<dl><dt><a href="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=utf8a;c=utf8a;tpl=browse.tpl" class="external text" title="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=utf8a;c=utf8a;tpl=browse.tpl" rel="nofollow">Getty Research Institute Special Collections Finding Aids</a>
</dt><dd> Heavily customized DLXS11a.  <a href="http://library.pub.getty.edu:8100/DLXS06.html" class="external text" title="http://library.pub.getty.edu:8100/DLXS06.html" rel="nofollow">Background on Getty customization and user interface changes to DLXS</a>
</dd></dl>
<dl><dt><a href="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=iastaff;c=iastaff;tpl=browse.tpl" class="external text" title="http://archives.getty.edu:8082/cgi/f/findaid/findaid-idx?cc=iastaff;c=iastaff;tpl=browse.tpl" rel="nofollow">J. Paul Getty Trust Institutional Archives Finding Aids</a>
</dt><dd>Heavily customized DLXS11a.
</dd></dl>
<a name="Working_with_the_EAD_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=78" title="Edit section: Working with the EAD">edit</a>]</span> <span class="mw-headline">Working with the EAD</span></h2>
<a name="EAD_2002_DTD_Overview_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=79" title="Edit section: EAD 2002 DTD Overview">edit</a>]</span> <span class="mw-headline">EAD 2002 DTD Overview</span></h3>
<p>These instructions assume that you have already encoded your finding aids files in the XML-based <a href="http://www.loc.gov/ead/" class="external text" title="http://www.loc.gov/ead/" rel="nofollow">EAD 2002 DTD</a>. If you have finding aids encoded using the older EAD 1.0 standard or are using the SGML version of EAD2002, you will need to convert your files to the XML version of EAD2002.   When converting from SGML to XML a number of character set issues may arise. See 
<a href="../Data_Conversion_and_Preparation.html#Unicode.2C_XML.2C_and_Normalization" title="Data Conversion and Preparation"> Data Conversion and Preparation: Unicode,XML, and Normalization</a>
</p><p>Resources for converting from EAD 1.0 to EAD2002 and/or from SGML EAD to XML EAD are available from:
</p>
<ul><li> The Society of American Archivists EAD Tools page: <a href="http://www.archivists.org/saagroups/ead/tools.html" class="external free" title="http://www.archivists.org/saagroups/ead/tools.html" rel="nofollow">http://www.archivists.org/saagroups/ead/tools.html</a>
</li><li> Library of Congress EAD conversion tools: <a href="http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm" class="external free" title="http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm" rel="nofollow">http://lcweb2.loc.gov/music/eadmusic/eadconv12/ead2002_r.htm</a>
</li></ul>
<p>Other good sources of information about EAD encoding practices and practical issues involved with EADs are:
</p>
<ul><li> Library of Congress EAD page <a href="http://www.loc.gov/ead/" class="external free" title="http://www.loc.gov/ead/" rel="nofollow">http://www.loc.gov/ead/</a> (This is the home of the EAD standard
</li><li> EAD2002 tag library <a href="http://www.loc.gov/ead/tglib/index.html" class="external free" title="http://www.loc.gov/ead/tglib/index.html" rel="nofollow">http://www.loc.gov/ead/tglib/index.html</a>
</li><li> The Society of American Archivists EAD Help page: <a href="http://www.archivists.org/saagroups/ead/" class="external free" title="http://www.archivists.org/saagroups/ead/" rel="nofollow">http://www.archivists.org/saagroups/ead/</a>
</li><li> Various EAD Best Practice Guidelines listed on the Society of American Archivists EAD essentials page:  <a href="http://www.archivists.org/saagroups/ead/essentials.html" class="external free" title="http://www.archivists.org/saagroups/ead/essentials.html" rel="nofollow">http://www.archivists.org/saagroups/ead/essentials.html</a> (the links to BPGs are at the bottom of the page)
</li><li> The EAD listserv <a href="http://listserv.loc.gov/listarch/ead.html" class="external free" title="http://listserv.loc.gov/listarch/ead.html" rel="nofollow">http://listserv.loc.gov/listarch/ead.html</a>
</li></ul>
<p>Sources of information about more general issues such as user studies can be found in:
</p><p><a href="http://www.library.uiuc.edu/archives/features/workpap.php" class="external free" title="http://www.library.uiuc.edu/archives/features/workpap.php" rel="nofollow">http://www.library.uiuc.edu/archives/features/workpap.php</a>
</p>
<a name="Practical_EAD_Encoding_Issues_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=80" title="Edit section: Practical EAD Encoding Issues">edit</a>]</span> <span class="mw-headline">Practical EAD Encoding Issues</span></h3>
<p>The EAD standard was designed as a loose standard in order to accommodate the large variety in local practices for paper finding aids and make it easy for archives to convert from paper to electronic form.  As a result, conformance with the EAD standard still allows a great deal of variety in encoding practices.
</p><p>The DLXS software is primarily designed as a system for mounting University of Michigan collections.  In the case of finding aids, the software has been designed to accommodate the encoding practices of the Bentley Historical Library. The more similar your data and setup is to the Bentley’s, the easier is will be to integrate your finding aids collection with DLXS.  If your practices differ significantly from the Bentley’s, you will probably need to do some preprocessing of your files and/or make changes to DLXS.  
</p><p>More information on the Bentley's encoding practices and workflow:
</p>
<ul><li> Overview of Bentley's workflow process for Finding Aids <a href="http://bentley.umich.edu/EAD/eadproject.php" class="external free" title="http://bentley.umich.edu/EAD/eadproject.php" rel="nofollow">http://bentley.umich.edu/EAD/eadproject.php</a>
</li><li> Description of Bentley Finding Aids and their presentation on the web <a href="http://bentley.umich.edu/EAD/system.php" class="external free" title="http://bentley.umich.edu/EAD/system.php" rel="nofollow">http://bentley.umich.edu/EAD/system.php</a>
</li><li> Bentley MS Word EAD templates and macros <a href="http://bentley.umich.edu/EAD/bhlfiles.php" class="external free" title="http://bentley.umich.edu/EAD/bhlfiles.php" rel="nofollow">http://bentley.umich.edu/EAD/bhlfiles.php</a>
</li><li> Description of EAD tags used in Bentley EADs <a href="http://bentley.umich.edu/EAD/bhltags.php" class="external free" title="http://bentley.umich.edu/EAD/bhltags.php" rel="nofollow">http://bentley.umich.edu/EAD/bhltags.php</a>
</li></ul>
<p><br />
</p><p><br />
</p>
<a name="Types_of_changes_to_accomodate_differing_encoding_practices_and.2For_interface_changes_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=81" title="Edit section: Types of changes to accomodate differing encoding practices and/or interface changes">edit</a>]</span> <span class="mw-headline">Types of changes to accomodate differing encoding practices and/or interface changes</span></h4>
<ul><li> Custom preprocessing
</li><li> Add dummy EAD to data
</li><li> Modify prep scripts (Makefile, preparedocs.pl, validateeach.csh)
</li><li> Modify *inp files (DOCTYPE declarations and entities)
</li><li> Modify fabricated regions (*.extra.srch)
</li><li> Modify CollMgr entries
</li><li> Modify findaidclass.cfg (change table of contents sections)
</li><li> Subclass FindaidClass.pm
</li><li> Modify XSL
</li><li> Modify XML templates
</li><li> Modify CSS
</li></ul>
<a name="Specific_Encoding_Issues_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=82" title="Edit section: Specific Encoding Issues">edit</a>]</span> <span class="mw-headline">Specific Encoding Issues</span></h4>
<p>There are a number of encoding issues that may affect the data preparation, indexing, searching, and rendering of your finding aids. Some of them are:
</p>
<ul><li> Preprocessing and Data Prep issues
<ul><li> <span class="redtext">&lt;eadid&gt; should be less than about 20 characters in length</span>
</li><li> <a href="../Attribute_ids_must_be_unique_within_the_entire_collection.html" title="Attribute ids must be unique within the entire collection">Attribute ids must be unique within the entire collection </a>
</li><li> If you use attribute ids and corresponding targets within your EADs preparedocs.pl may need to be modified.
</li><li> <a href="../Character_Encoding_issues.html" title="Character Encoding issues">Character Encoding issues</a>
</li><li> UTF-8 Byte Order Marks (BOM) should be removed from EADs prior to concatenation
</li><li> XML processing instructions should be removed from EADs prior to concatenation
</li><li> Multiline DOCTYPE declarations are not properly handled the data prep scripts in release 13 and earlier (without August 24, 2007 patch).
</li><li> If your DOCTYPE declaration contains entities, you need to modify the appropriate *dcl files accordingly. See $DLXSROOT/prep/s/samplefa/samplefa.ead2002.entity.example.dcl for an example )
</li><li> Out-of-the-box &lt;dao&gt; handling may need to be modified for your needs
</li></ul>
</li><li> Fabricated region issues  (some of these involve XSL as well)
<ul><li> If your &lt;unititle&gt; element precedes your &lt;origination&gt; element in <span class="unixcommand">the top level &lt;did&gt;, you will have to modify the maintitle fabricated region query in *.extra.srch </span> See <a href="Workshop_working_copy.html#Title_of_Finding_Aid_does_not_show_up" title="Mounting Finding Aids: Release 14/Workshop working copy"> Troubleshooting:Title of Finding Aid does not show up</a>  
</li><li> If you do not use a &lt;frontmatter&gt; element, you will either have to either a) create and populate frontmatter elements in your EADs manually, or b) run your EADs through some preprocessing XSL to create and populate frontmatter elements, or c) you will have to create a fabricated region  to provide an appropriate "Title Page" region based on the &lt;eadheader&gt; and you may also need to change the XSL and/or subclass FindaidClass to change the code that handles the Title Page region.
</li></ul>
</li></ul>
<ul><li> Table of Contents and Focus Region issues
<ul><li> If you do not use a &lt;frontmatter&gt; element you may have to make the changes mentioned above to get the title page to show in the table of contents and when the user clicks on the "Title Page" link in the table of contents
</li><li> If your encoding practices for &lt;biohist&gt; differ from the Bentley's, you may need to make changes in findaidclass.cfg or create a subclass of FindaidClass and override FindaidClass:: GetBioghistTocHead, and/or change the appropriate XSL files.
</li><li> If you want &lt;relatedmaterial&gt; and/or &lt;separatedmaterial&gt; to show up in the table of contents (TOC) on the left hand side of the Finding Aids, you may have to modify findaidclass.cfg and make other modifications to the code. This also applies if there are other sections of the finding aid not listed in the out-of-the-box findaidclass.cfg&nbsp;%gSectHeadsHash. 
</li><li> See also <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Customizing Findaid Class: Working with the table of contents</a>
</li></ul>
</li></ul>
<ul><li> XSL issues
<ul><li> If you have encoded &lt;unitdate&gt;s as siblings of &lt;unittitle&gt;s, you may have to modify the appropriate XSL templates.
</li><li> If you want the middleware to use the &lt;head&gt; element for labeling sections instead of the default hard-coded values in findaidclass.cfg, you may need to change fabricated regions and/or make changes to the XSL and/or possibly modify findaidclass.cfg or subclass FindaidClass.
</li></ul>
</li></ul>
<a name="Preparing_Data_and_Directories_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=83" title="Edit section: Preparing Data and Directories">edit</a>]</span> <span class="mw-headline">Preparing Data and Directories</span></h2>
<a name="Set_Up_Directories_and_Files_for_Data_Preparation_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=84" title="Edit section: Set Up Directories and Files for Data Preparation">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for Data Preparation</span></h3>
<p>You will need to set up a directory structure  where you plan to store your EAD2002 XML source files, your object files (used by xpat for indexing), index files (including region index files)and other information such as data dictionaries, and files you use to prepare your data.  
</p><p>The convention used by DLXS is to use subdirectories named with the first letter of the collection id and the collection name:$DLXSROOT/xxx/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile. See the <a href="../Directory_Structure.html" title="Directory Structure">DLPS Directory Conventions</a> section  and <a href="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" class="external text" title="http://www.dlxs.org/training/workshop200707/overview/dirstructure.html" rel="nofollow">Workshop discussion of Directory Conventions</a>for more information.
</p><p>When deciding on your collection id consider that it needs to be unique across all classes to enable cross-collection searching.  So you don't want both a text class collection with a collid of "my_coll" and a finding aid class collection with a collection id of "my_coll".  You will also probably want to make your collection ids rather short and make sure they don't contain any special characters, since they will also be used for sub-directory names.
</p><p>The Makefile we provide along with most of the data preparation scripts supplied with DLXS assume the directory structure described below. We recommend you follow these conventions.
</p>
<ul><li> Specialized scripts for collection-specific data preparation or preprocessing  are stored in $DLXSROOT/bin/{c}/{coll}/ where $DLXSROOT is the "tree" where you install all DLXS components, {c} is the first letter of the name of the collection you are indexing, and {coll} is the collection ID of the collection you are indexing. For example, if your collection ID is "bhlead" and your DLXSROOT is "/l1", you will place the Makefile in /l1/bin/b/bhlead/ , e.g., /l1/bin/b/bhlead/Makefile.  The Makefile and preparedocs.pl which can be customized for a specific collection are stored in this directory. See the DLPS Directory Conventions section for more information.
</li><li> General processing utilities that can be applied to any collection for Findaid Class data prep are stored in $DLXSROOT/bin/f/findaid.
</li><li> Raw Finding aids should be stored in $DLXSROOT/prep/{c}/{coll}/data/. 
</li><li> Doctype declarations, data dictionary and fabricated region templates, and other files for preparing your data should be in $DLXSROOT/prep/{c}/{coll}/. Unlike the contents of other directories, everything in prep should be expendable after indexing. The Makefile stores temporary/intermediate files here as well.
</li><li> After running all the targets in the Makefile, the finalized, concatenated XML file for your finding aids collection will be created in $DLXSROOT/obj/{c}/{coll}/ , e.g., /l1/obj/b/bhlead/bhlead.xml.
</li><li> After	running all the targets in the Makefile, the index, region and data dictionary files will be stored in $DLXSROOT/idx/{c}/{coll}/ , e.g., /l1/idx/b/bhlead/bhlead.idx. These will be updated as the index related targets in the Makefile are run. See the XPAT documentation for more on these types of files.
</li></ul>
<a name="Fixing_paths_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=85" title="Edit section: Fixing paths">edit</a>]</span> <span class="mw-headline">Fixing paths</span></h4>
<p>The installation script should have changed all instances of /l1/ to your $DLXSROOT and all bang prompts "#!/l/local/bin/perl" to your location of perl.  However, you may wish to check the following scripts:
</p>
<ul><li>	$DLXSROOT/bin/f/findaid/output.dd.frag.pl
</li><li>	$DLXSROOT/bin/f/findaid/inc.extra.dd.pl
</li><li>	$DLXSROOT/bin/f/findaid/fixdoctype.pl
</li><li>	$DLXSROOT/bin/s/samplefa/preparedocs.pl 
</li></ul>
<p>You also might want to check that the path to the shell executable is correct in
</p>
<ul><li>	$DLXSROOT/bin/f/findaid/validateeach.sh
</li></ul>
<p>If you use the Makefile in  $DLXSROOT/bin/s/samplefa  you should check that the paths in the Makefile are correct for the locations of xpat, oxs, and osgmlnorm as installed on your system.  These are the Make varibles that should be checked:
</p>
<ul><li> XPATBINDIR
</li><li> OSX
</li><li> OSGMLNORM
</li></ul>
<a name="Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=86" title="Edit section: Step by step instructions for setting up Directories for Data Preparation">edit</a>]</span> <span class="mw-headline">Step by step instructions for setting up Directories for Data Preparation</span></h4>
<p>You can use the scripts and files from the sample finding aids collection "samplefa" as a basis for creating a new collection. 
</p>
<div class="tip">DLXS_TIP  
<ul><li><b>What is "/w/workshopfa"?</b>  
</li><li><b>How do I use the examples for my own collections?</b>
</li></ul>
<p>The instructions and examples in this section are designed for use at the DLXS workshop <a href="http://www.dlxs.org/training/workshops.html" class="external free" title="http://www.dlxs.org/training/workshops.html" rel="nofollow">http://www.dlxs.org/training/workshops.html</a>
</p><p>If you are not at the workshop, and want to use these instructions on your own collections, in the instructions that follow you would use /{c}/{coll} instead of /w/workshopfa where {c} is the first letter of your collection id and  {coll} is your collection id.  So for example if your collection id was mycoll instead of 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p>you would do 
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/m/mycoll/mycoll.extra.srch
</pre>
</div>
<p>This documentation will make use of the concept of the $DLXSROOT, which is the place at which your DLXS directory structure starts. We generally use /l1/.
</p><p>To check your <span class="unixcommand">$DLXSROOT</span>, type the following command at the command prompt:
</p>
<pre>echo $DLXSROOT
</pre>
<p>The <span class="unixcommand">prep</span> directory under <span class="unixcommand">$DLXSROOT</span> is the space for you to take your encoded finding aids and "package them up" for use with the DLXS middleware. Create your basic directory <span class="unixcommand">$DLXSROOT/prep/w/workshopfa</span> and its <span class="unixcommand">data</span> subdirectory with the following command:
</p>
<pre>mkdir -p $DLXSROOT/prep/w/workshopfa/data
</pre>
<p>Move into the <span class="unixcommand">prep</span> directory with the following command:
</p>
<pre>cd $DLXSROOT/prep/w/workshopfa
</pre>
<p>This will be your staging area for all the things you will be doing to your EADs, and ultimately to your collection. At present, all it contains is the <span class="unixcommand">data</span> subdirectory you created a moment ago. Unlike the contents of other collection-specific directories, everything in <span class="unixcommand">prep</span> should be ultimately expendable in the production environment.
</p><p>Copy the necessary files into your <span class="unixcommand">data</span> directory with the following commands:
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/data/*.xml $DLXSROOT/prep/w/workshopfa/data/.
</pre>
<p>We'll also need a few files to get us started working. They will need to be copied over as well, and also have paths adapted and collection identifiers changed. Follow these commands:
</p><p><br />
</p>
<pre>cp $DLXSROOT/prep/s/samplefa/samplefa.ead2002.dcl $DLXSROOT/prep/w/workshopfa/workshopfa.ead2002.dcl
cp $DLXSROOT/prep/s/samplefa/samplefa.concat.ead.dcl $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl
mkdir -p $DLXSROOT/obj/w/workshopfa
mkdir -p $DLXSROOT/bin/w/workshopfa
cp $DLXSROOT/bin/s/samplefa/preparedocs.pl $DLXSROOT/bin/w/workshopfa/preparedocs.pl
cp $DLXSROOT/bin/s/samplefa/Makefile $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>Make sure you check and edit if necessary the perl bang prompt and the paths to your shell and directories in these files:
</p>
<pre>   * $DLXSROOT/bin/f/findaid/stripdoctype.pl
   * $DLXSROOT/bin/f/findaid/fixdoctype.pl
   * $DLXSROOT/bin/f/findaid/validateeach.sh
   * $DLXSROOT/bin/w/workshopfa/preparedocs.pl
</pre>
<pre>   * $DLXSROOT/bin/w/workshopfa/Makefile
</pre>
<p>With the ready-to-go ead2002 encoded finding aids files in the <span class="unixcommand">data</span> directory, we are ready to begin the preparation process. This will include:
</p>
<ol><li> Validating the files individually against the EAD 2002 DTD
</li><li> Concatenating the files into one larger XML file
</li><li> Validating the concatenated file against the <i>dlxsead2002</i> DTD
</li><li> "Normalizing" the concatenated file.
</li><li> Validating the normalized concatenated file against the <i>dlxsead2002</i> DTD
</li></ol>
<p>These steps are generally handled via the <span class="unixcommand">Makefile</span> in <span class="unixcommand">$DLXSROOT/bin/s/samplefa</span> which we have copied to $DLXSROOT/bin/w/workshopfa.  <a href="../Release14_Makefile.html" title="Release14 Makefile">Example Makefile</a>.
</p>
<div class="tip">DLXS_TIP:
<p>Make sure you changed your copy of the Makefile to reflect /w/workshopfa instead of /s/samplefa and that your $DLXSROOT is set correctly in the Makefile. You will want to change lines 1-3 accordingly
</p>
<pre>   1  DLXSROOT = /l1
   2  NAMEPREFIX = samplefa
   3  FIRSTLETTERSUBDIR = s
</pre>
</div>
<div class="note"> Tip: Be sure not to add any space after the workshopfa or w. The Makefile ignores space immediately before and after the equals sign but treats all other space as part of the string. If you accidentally put a space after the FIRSTLETTERSUBDIR = s , you will get an error like "[validateeach] Error 127" or " Can't open $DLXSROOT/prep/w*.xml: No such file or directory at $DLXSROOT/bin/f/findaid/fixdoctype.pl line 25."
<p>If you look closely at the first line of what the Makefile reported to standard output (see below) you will 
see that the Makefile will get confused about file paths and instead of running the command:
</p><p><br />
</p>
<pre>$DLXSROOT/bin/f/findaid/validateeach.sh  
-d $DLXSROOT/prep/w/workshopfa/data/
-x $DLXSROOT/misc/sgml/xml.dcl 
-t $DLXSROOT/prep/w/workshopfa/workshopfa.ead2002.dcl 
</pre>
<p>It will complain that the file paths don't make sense:
</p>
<pre>$DLXSROOT/bin/f/findaid/validateeach.sh  
-d $DLXSROOT/prep/w /workshopfa/data/ 
-x $DLXSROOT/misc/sgml/xml.dcl 
-t $DLXSROOT/prep/w /workshopfa/workshopfa .ead2002.dcl 
working on $DLXSROOT/prep/w*.xml
Can't open $DLXSROOT/prep/w*.xml: No such file or directory at $DLXSROOT/bin/f/findaid/fixdoctype.pl line 25.
</pre>
<p>It looks for xml files in  $DLXSROOT/prep/w instead of $DLXSROOT/prep/w/workshopfa/data and exits.
</p>
</div>
<p><br />
</p>
<div class="note">
<p>Further note on editing the Makefile: If you modify or write your own Make targets, you need to make sure that a real "tab" starts each command line rather than spaces. The easiest way to check for these kinds of errors is to use "cat -vet Makefile" to show all spaces, tabs and newlines
</p>
</div>
<p>The installation program should have changed the locations of the various binaries in the Makefile to match your answers in the installation process.  However, its a good idea to check to make sure that  the locations of the various binaries to have been changed to match your installation. 
</p>
<ul><li> Change XPATBINDIR = /l/local/bin/ to the location of the <span class="unixcommand">xpat</span> binary in your installation
</li><li> Change the location of the <span class="unixcommand">osx</span> binary from
</li></ul>
<pre>OSX = /l/local/bin/osx
to the location in your installation
</pre>
<ul><li> Change the location of the <span class="unixcommand">osgmlnorm</span> binary from
</li></ul>
<pre>OSGMLNORM = /l/local/bin/osgmlnorm
to the location in your installation
</pre>
<div class="tip"> Tip: oxs and osgmlnorm are installed as part of the OpenSP package. If you are using linux, make sure that the OpenSP package for your version of linux is installed and make sure the paths above are changed to match your installation. If you are using Solaris you will have to install (and possibly compile) OpenSP. You may also need to make sure the $LD_LIBRARY_PATH environment variable is set so that the OpenSP programs can find the required libraries. For troubleshooting such problems the unix <b>ldd</b> utility is invaluble. See also links to OpenSP package on the tools page: <a href="../Useful_Tools.html" title="Useful Tools">Useful Tools</a>
</div>
<hr />
<a name="Set_Up_Directories_and_Files_for_XPAT_Indexing_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=87" title="Edit section: Set Up Directories and Files for XPAT Indexing">edit</a>]</span> <span class="mw-headline">Set Up Directories and Files for XPAT Indexing</span></h3>
<pre>If you are not following these instructions at the DLXS workshop, please substitute /{c}/{coll} where {c} is the first letter of your collection id 
and {coll}is your collection id  for any instance of /w/workshopfa 
and substitute {coll} wherever you see "workshopfa" in the following instructions.
</pre>
<p>First, we need to create the rest of the directories in the <b>workshopfa</b> environment with the following commands:
</p>
<pre>mkdir -p $DLXSROOT/idx/w/workshopfa
</pre>
<p>The <span class="unixcommand">bin</span> directory we created when we prepared directories for data preparation holds any scripts or tools used for the collection specifically; <span class="unixcommand">obj</span> ( created earlier) holds the "object" or XML file for the collection, and <span class="unixcommand">idx</span> holds the XPAT indexes. Now we need to finish populating the directories.
</p>
<pre>
 cp $DLXSROOT/prep/s/samplefa/samplefa.blank.dd  $DLXSROOT/prep/w/workshopfa/workshopfa.blank.dd
 cp $DLXSROOT/prep/s/samplefa/samplefa.extra.srch $DLXSROOT/prep/w/workshopfa/workshopfa.extra.srch
</pre>
<p><br />
<b>Both of these files need to be edited </b>to reflect the new collection name and the paths to your particular directories. Failure to change even one line in one file can result in puzzling errors, because the scripts <i>are</i> working, just not necessarily in the directories you are looking at.
</p>
<pre>cd $DLXSROOT/prep/w/workshopfa
</pre>
<p>After editing the files, you can check to make sure you changed all the "samplefa" strings with the following command:
</p>
<pre>grep -l "samplefa" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p>You also need to check that "/l1/"  has been replacedby whatever $DLXSROOT is on your server. If you don't have an /l1 directory on your server (which is very likely if you are not here using a DLPS machine) you can check with:
</p>
<pre>grep -l "l1" <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/</span>*
</pre>
<p><a href="#top" title="">Top</a>
</p>
<a name="Finding_Aids_Data_Preparation_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=88" title="Edit section: Finding Aids Data Preparation">edit</a>]</span> <span class="mw-headline">Finding Aids Data Preparation</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Finding Aids Data Preparation
</p><p><br />
</p>
<a name="Overview_of_Data_Preparation_and_Indexing_Steps_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=89" title="Edit section: Overview of Data Preparation and Indexing Steps">edit</a>]</span> <span class="mw-headline">Overview of Data Preparation and Indexing Steps</span></h3>
<p><b>Data Preparation</b> 
</p>
<ol><li> Validate the files individually against the EAD <i>2002</i> DTD<br /><b>make validateeach</b><br />
</li><li> Concatenate the files into one larger XML file<br /><b>make prepdocs</b><br />
</li><li> Validate the concatenated file against the <i>dlxsead2002</i> DTD:<br /><b>make validate</b><br />
</li><li> Normalize the concatenated file.<br /><b>make norm</b><br />
</li><li> Validate the normalized concatenated file against the <i>dlxsead2002</i> DTD <br /><b>make validate</b><br />
</li></ol>
<p>The end result of these steps is a file containing the concatenated EADs wrapped in a &lt;COLL&gt; element which validates against the dlxsead2002 and is ready for indexing:
</p>
<pre>&lt;COLL&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;

</pre>
<p><b>WARNING!</b>    If there are extra characters or some other problem with the part of the program that strips out the xml declaration and the doctype declaration the file will end up like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;
</pre>
<p>In this case you will get "character data not allowed" or similar errors during the make validate step. You can troubleshoot by looking at the concatenated file and/or checking your original EADs.
</p><p><b>Indexing</b>
</p>
<ol><li> <b>make singledd</b> indexes all the words in the concatenated file. 
</li><li> <b>make xml</b> indexes the XML structure by reading the DTD. Validates as it indexes.
</li><li> <b>make post</b> builds and indexes fabricated regions based on the XPAT queries stored in the workshopfa.extra.srch file.
</li></ol>
<a name="Preprocessing_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=90" title="Edit section: Preprocessing">edit</a>]</span> <span class="mw-headline">Preprocessing</span></h3>
<a name="Validating_and_Normalizing_Your_Data_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=91" title="Edit section: Validating and Normalizing Your Data">edit</a>]</span> <span class="mw-headline">Validating and Normalizing Your Data</span></h3>
<a name="Step_1:_Validating_the_files_individually_against_the_EAD_2002_DTD_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=92" title="Edit section: Step 1: Validating the files individually against the EAD 2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step1"><b>Step 1: Validating the files individually against the EAD 2002 DTD</b></span> </span></h4>
<pre>cd $DLXSROOT/bin/w/workshopfa
make validateeach


</pre>
<p>The Makefile runs the following command:
</p>
<pre>% $DLXSROOT/bin/f/finadaid/validateeach.sh
</pre>
<p><br />
What's happening: The makefile is running the bourne-shell script <a href="../Validateeach.sh.html" title="Validateeach.sh.r14">validateeach.sh</a> in the $DLXSROOT/bin/f/findaid directory. The script processes each *.xml file in the data directory.  For each file, it creates a temporary file without the public DOCTYPE declaration, and then runs <span class="unixcommand">onsgmls</span> on each of the resulting XML files in the <span class="unixcommand">data</span> subdirectory to make sure they conform with the EAD 2002 DTD. If validation errors occur, error files will be in the <span class="unixcommand">data</span> subdirectory with the same name as the finding aids file but with an extension of <span class="unixcommand">.err</span>. If there are validation errors, fix the problems in the source XML files and re-run.
</p><p>Check the error files by running the following commands
</p>
<pre> ls -l $DLXSROOT/prep/w/workshopfa/data/*err
</pre>
<p>if there are any *err files, you can look at them with the following command: 
</p>
<pre> less  $DLXSROOT/prep/w/workshopfa/data/*err
</pre>
<a name="Common_error_messages_and_solutions:_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=93" title="Edit section: Common error messages and solutions:">edit</a>]</span> <span class="mw-headline">Common error messages and solutions:</span></h5>
<dl><dt>onsgmls:  Command not found
</dt><dd>The location of the onsgmls binary is not in your $PATH.  
</dd></dl>
<dl><dt>entityref errors such as "general entity 'foobar' not defined" 
</dt><dd>If you use entityrefs in your EADs, you may see errors relating to problems resolving entities. <a href="../Example_entityref_errors.html" title="Example entityref errors">Example entityref errors</a>. The solution is to add the entityref declarations to the doctype declaration in these two files:
</dd></dl>
<ul><li><dl><dt>$DLXSROOT/prep/s/samplefa/samplefa.ead2002.dcl
</dt></dl>
</li></ul>
<dl><dd> This is the doctype declaration used by the validateeach.sh script that points to the EAD2002 DTD.
</dd></dl>
<ul><li><dl><dt>$DLXSROOT/prep/s/samplefa/samplefa.concat.ead.dcl
</dt></dl>
</li></ul>
<dl><dd> This is the doctype declaration that points to the dlxs2002 dtd.  The dlxs2002 dtd essentially the dlxs2002 dtd with modifications to provide for multiple eads within one file.  It is used by the "make validate" target of the Makefile to validate the concatenated file containing all of your EADs.
</dd></dl>
<ul><li>See  $DLXSROOT/prep/s/samplefa/samplefa.ead2002.entity.example.dcl for an example of adding entityrefs to your docytype declaration files.
</li></ul>
<a name="Step_2:_Concatentating_the_files_into_one_larger_XML_file_.28and_running_some_preprocessing_commands.29_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=94" title="Edit section: Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands)">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step2"><b>Step 2: Concatentating the files into one larger XML file (and running some preprocessing commands) </b></span> </span></h4>
<pre>cd $DLXSROOT/bin/w/workshopfa
make prepdocs
</pre>
<p>The Makefile runs the following command:
</p>
<pre>$DLXSROOT/bin/w/workshopfa/preparedocs.pl 
  $DLXSROOT/prep/w/workshopfa/data  
  $DLXSROOT/obj/w/workshopfa/workshopfa.xml 
  $DLXSROOT/prep/w/workshopfa/logfile.txt
</pre>
<p>This runs the preparedocs.pl script on all the files in the specified data directory and writes the output to the workshopfa.xml file in the appropriate /obj subdirectory. It also outputs a logfile to the /prep directory:
</p><p>The Perl script does two sets of things:
</p>
<ol><li> Concatenates all the files
</li><li> Runs a number of preprocessing steps on all the files
</li></ol>
<p><b>Concatenating the files </b>
</p><p>The script finds all XML files in the <span class="unixcommand">data</span> subdirectory,and then strips off the XML declaration and doctype declaration from each file before concatenating them together. It also wraps the concatenated EADs in a &lt;COLL&gt; tag . The end result looks like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;

</pre>
<p><b>WARNING!</b>    If are extra characters or some other problem with the part of the program that strips out the xml declaration and the docytype declearation the file will end up like:
</p><p><br /> 
</p>
<pre>&lt;COLL&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;1&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;2&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br /><b>baddata</b>&lt;ead&gt;&lt;eadheader&gt;&lt;eadid&gt;3&lt;/eadid&gt;...&lt;/eadheader&gt;... content&lt;/ead&gt;<br />&lt;/COLL&gt;
</pre>
<p>This will cause the document to be invalid since the dlxsead2002.dtd does not allow anything between the closing tag of one &lt;/ead&gt; and the opening tag of the next one &lt;ead&gt;
</p><p>Some of the possible causes of such a problem are:
</p>
<ul><li> UTF-8 Byte Order Marks at the beginning of the file
</li><li> DOCTYPE declaration on more than one line
</li><li> XML processing instructions
</li></ul>
<p><b>Preprocessing steps</b>
</p><p>The perl program also does some preprocessing on all the files. Some of these steps are customized to the needs of the Bentley. 
</p><p>The preprocessing steps are:
</p>
<ul><li> finds all id attributes and prepends a number to them
</li><li> removes XML declaration
</li><li> removes DOCTYPE declaration
</li><li> removes XML processing instructions
</li><li> removes the utf8 Byte Order Mark
</li></ul>
<p>Bentley specific processing:
</p>
<ul><li> adds a prefix string "dao-bhl" to all DAO links 
</li><li> removes empty <span class="unixcommand">persname</span>, <span class="unixcommand">corpname</span>, and <span class="unixcommand">famname</span> elements
</li></ul>
<div class="tip">DLXS_TIP:You should look at the perl code and determine if you need to modify it so it is appropriate for your encoding practices. You probably will want to comment out the Bentley specific processing</div>
<p>The output of the combined concatenation and preprocessing steps will be the one collection named xml file which is deposited into the obj subdirectory.
</p><p>If your collections need to be transformed in any way, or if you do not want the transformations to take place (the DAO changes, for example), you can edit preparedocs.pl file to effect the changes. Some changes you may want to make include:
</p>
<ul><li> Changing the algorithm used to make id attibute unique. For example if your encoding practices use id attributes and targets, the out-of-the-box algorithm will remove the relationship between the attributes and targets. One possible modification might be to modify the algorithm to prepend the eadid or filename to all id and target attributes. (See the commented out code in preparedocs.pl for an example of how to do this)
</li><li> Modifying the program to read a list of files or list of eadids so that the files are concatenated in a particular order. The default sort order for search results is in occurance order, which translates to the order in which the eads are concatenated. If you write a script which looks at the eads for some element that you want to sort by and then outputs a list of filenames sorted by that order, you could then pass that file to a modified preparedocs.pl so it would concatenate the files in the order listed.
</li></ul>
<hr />
<a name="Step_3:_Validating_the_concatenated_file_against_the_dlxsead2002_DTD_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=95" title="Edit section: Step 3: Validating the concatenated file against the dlxsead2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step3"><b>Step 3: Validating the concatenated file against the dlxsead2002 DTD</b></span> </span></h4>
<pre>make validate
</pre>
<p>The Makefile runs the following command:
</p>
<pre>onsgmls -wxml -s -f $DLXSROOT/prep/w/workshopfa/workshopfa.errors 
$DLXSROOT/misc/sgml/xml.dcl   
$DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
$DLXSROOT/obj/w/workshopfa/workshopfa.xml
</pre>
<p>This runs the onsgmls command against the concatenated file using the dlxs2002dtd, and writes any errors to the workshopfa.errors file in the appropriate subdirectory in $DLXSROOT/prep/c/collection.. 
<a href="../Validate.html" title="Validate.R14">More details</a>
Note that we are running this using <span class="unixcommand"><b>workshopfa.concat.ead.dcl</b></span> not <span class="unixcommand"><b>workshopfa.ead2002.dcl</b></span>. The <b>workshopfa.concat.ead.dcl</b> file points to <b>$DLXSROOT/misc/sgml/dlxsead2002.ead</b> which is the <i>dlxsead2002</i> DTD. The <i>dlxsead2002</i> DTD is exactly the same as the <i>EAD2002</i> DTD, but adds a wrapping element, <span class="unixcommand">&lt;COLL&gt;</span>, to be able to combine more than one <span class="unixcommand">ead</span> element, more than one finding aid, into one file. It is, of course, a good idea to validate the file now before going further.
</p><p><br />
Run the following command
</p>
<pre> ls -l $DLXSROOT/prep/w/workshopfa/workshopfa.errors
</pre>
<p>If there is a workshopfa.errors file then run the following command to look at the errors reported
</p>
<pre> less $DLXSROOT/prep/w/workshopfa/workshopfa.errors
</pre>
<p><br />
</p>
<a name="Common_common_causes_of_error_messages_and_solutions_3"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=96" title="Edit section: Common common causes of error messages and solutions">edit</a>]</span> <span class="mw-headline">Common common causes of error messages and solutions</span></h5>
<dl><dt>make: onsgmls: Command not found
</dt><dd>OSGMLNORM variable in Makefile does not point to correct location of onsgmls for your installation or openSP is not installed.
</dd></dl>
<dl><dt>If there were no errors when you ran "make validateeach" but you are now seeing errors
</dt><dd>there was very likely a problem with the preparedocs.pl processing.
</dd></dl>
<ul><li> The DOCTYPE declaration did not get completely removed. (Scripts prior to Release 13 August 24 patch, don't always remove multiline DOCTYPE declarations)
</li><li> There was a UTF-8 Byte Order Mark at the begginning of one or more of the concatenated files
</li></ul>
<dl><dt>onsgmls</dt><dd>/l1/dev/tburtonw/misc/sgml/xml.dcl:1:W: SGML declaration was not implied
</dd><dd>The above error can be ignored.
</dd></dl>
<div class="tip">Warning: If you see any other errors <b>STOP!</b> You need to determine the cause of the problem, fix it, and rerun the steps until there are no errors from make validate. If you continue with the next steps in the process with an invalid xml document, the errors will compound and it will be very difficult to trace the cause of the problem. </div>
<a name="Step_4:_Normalizing_the_concatenated_file_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=97" title="Edit section: Step 4: Normalizing the concatenated file">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step4"><b>Step 4: Normalizing the concatenated file</b></span> </span></h4>
<pre>make norm
</pre>
<p>The Makefile runs a series of copy statements and two main commands:
</p><p><br /> 
</p>
<pre>1.)   /l/local/bin/osgmlnorm -f $DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors 
      $DLXSROOT/misc/sgml/xml.dcl 
      $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
      $DLXSROOT/obj/w/workshopfa/workshopfa.xml.prenorm &gt; $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm
</pre>
<p><br />
</p>
<pre>2.)  /l/local/bin/osx -E0 -bUTF-8 -xlower -xempty -xno-nl-in-tag 
     -f $DLXSROOT/prep/w/workshopfa/workshopfa.osx.errors 
     $DLXSROOT/misc/sgml/xml.dcl 
     $DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
     $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm &gt; $DLXSROOT/obj/w/workshopfa/workshopfa.xml.postnorm.osx 
</pre>
<p>These commands ensure that your collection data is normalized. What this means is that any attributes are put in the order in which they were defined in the DTD. Even though your collection data is XML and attribute order should be irrelevant (according to the XML specification), due to a bug in one of the supporting libraries used by xmlrgn (part of the indexing software), attributes must appear in the order that they are defined in the DTD. If you have "out-of-order" attributes and don't run make norm, you will get <i>"invalid endpoints"</i> errors during the make post step.
</p>
<div class="tip">Tip: Step one, which normalizes the document writes its errors to <span class="unixcommand">$DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors</span>. Be sure to check this file.</div>
<pre>less $DLXSROOT/prep/w/workshopfa/workshopfa.osgmlnorm.errors
</pre>
<p>Step 2, which runs osx to convert the normalized document back into XML produces lots of error messages which are written to $DLXSROOT/prep/w/workshopfa/workshopfa.osx.errors. These will also result in the following message on standard output:
</p>
<pre> make: [norm] Error 1 (ignored)
</pre>
<p>These errors are caused because we are using an XML DTD (the EAD 2002 DTD) and osx is using it to validate against the SGML document created by the osgmlnorm step. 
<span class="redtext">These are the only errors which may generally be ignored.</span> 
However, if the next recommended step, which is to run "make validate" again reveals an invalid document, you may want to rerun osx and look at the errors for clues. (Only do this if you are sure that the problem is not being caused by XML processing instructions in the documents as explained below)
</p>
<a name="Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=98" title="Edit section: Step 5: Validating the normalized file against the dlxsead2002 DTD">edit</a>]</span> <span class="mw-headline"> <span id="dataprep_step5"><b>Step 5: Validating the normalized file against the dlxsead2002 DTD</b></span> </span></h4>
<pre>make validate2
</pre>
<p>Check the resulting error file:
</p>
<pre>less $DLXSROOT/prep/w/workshopfa/workshopfa.errors2
</pre>
<p>We run this step again to make sure that the normalization process did not produce an invalid document. This is necessary because under some circumstances the "make norm" step can result in invalid XML. One known cause of this is the presense of XML processing instructions. For example: <b>"&lt;?Pub Caret1?&gt;"</b>. Although XML processing instructions are supposed to be ignored by any XML application that does not understand them, the problem is that when we use sgmlnorm and osx, which are SGML tools, they end up munging the output XML. The preparedocs.pl script used in the "make prepdocs" step should have removed any XML processing instructions.  
</p>
<div class="tip">Tip: If this second make validate step fails, but the "make validate" step before "make norm" succeeded, there is some kind of a problem with the normalization process.  You may want to start over by running "make clean" and then going through steps 1-4 again.  If that doesn't solve the problem you may want to check your EADs to make sure they do not have XML processing instructions and if they don't, you will then need to look at the error messages from the second make validate.</div>
<a name="Building_the_Index_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=99" title="Edit section: Building the Index">edit</a>]</span> <span class="mw-headline">Building the Index</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Building the Index
</p>
<a name="Indexing_Overview_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=100" title="Edit section: Indexing Overview">edit</a>]</span> <span class="mw-headline">Indexing Overview</span></h3>
<p>Indexing is relatively straightforward once you have followed the steps to set up data and directories and prepared and normalized your data as described in 
</p>
<ul><li><a href="Workshop_working_copy.html#Step_by_step_instructions_for_setting_up_Directories_for_Data_Preparation" title="Mounting Finding Aids: Release 14/Workshop working copy">Step by step instructions for setting up Directories for Data Preparation</a>,
</li><li><a href="Workshop_working_copy.html#Set_Up_Directories_and_Files_for_XPAT_Indexing" title="Mounting Finding Aids: Release 14/Workshop working copy">Set Up Directories and Files for XPAT Indexing</a>,
</li><li><a href="../Finding_Aids_Data_Preparation.html#Validating_and_Normalizing_Your_Data" title="Finding Aids Data Preparation">Validating and Normalizing Your Data</a>, 
</li></ul>
<p>To create an index for use with the Findaid Class interface, you will need to index the words in the collection, then index the XML (the structural metadata, if you will), and then finally "fabricate" regions based on a combination of elements (for example, defining what the "main entry" is, without adding a &lt;MAINENTRY&gt; tag around the appropriate &lt;AUTHOR&gt; or &lt;TITLE&gt; element). 
</p><p>The main work in the indexing step is making sure that the fabricated regions in the workshopfa.extra.srch file match the characteristics of your collection.  
</p>
<div class="tip"> Tip:  If the final "make validate" step in <a href="../Finding_Aids_Data_Preparation.html#Step_5:_Validating_the_normalized_file_against_the_dlxsead2002_DTD" title="Finding Aids Data Preparation">Validating the normalized file against the dlxsead2002 DTD</a> produced errors, you will need to fix the problem before running the indexing steps.  Attempting to index an invalid document will lead to indexing problems and/or corrupt indexes.</div>
<p>The <span class="unixcommand">Makefile</span> in the <span class="unixcommand">$DLXSROOT/bin/w/workshopfa</span> directory contains the commands necessary to build the index, and can be executed easily.
</p>
<pre>cd $DLXSROOT/bin/w/workshopfa
</pre>
<p>The following commands can be used to make the index:
</p><p><b>make singledd</b> indexes words in the EADs that have been concatenated into one large file for a collection. 
</p><p><b>make xml</b> indexes the XML structure by reading the DTD. It validates as it indexes.  
</p><p><b>make post</b> builds and indexes fabricated regions based on the XPAT queries stored in the workshopfa.extra.srch file. Because every collection is different, the *extra.srch file will probably need to be adapted for your collection.  If you try to index/build fabricated regions from elements not used in your finding aids collection, you will see errors like:
</p>
<pre>&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found: &lt;Error&gt;syntax error before: ")&lt;/Error&gt;  
</pre>
<p>when you use the make post command
</p>
<a name="Step_by_Step_Instructions_for_Indexing_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=101" title="Edit section: Step by Step Instructions for Indexing">edit</a>]</span> <span class="mw-headline">Step by Step Instructions for Indexing</span></h3>
<a name="Step_1:_Indexing_the_text_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=102" title="Edit section: Step 1: Indexing the text">edit</a>]</span> <span class="mw-headline"><span id="indexing_step1"><b>Step 1: Indexing the text</b></span></span></h4>
<p>Index all the words in the file of concatenated EADs with the following command:
</p>
<pre>
 cd $DLXSROOT/bin/w/workshopfa
 make singledd
</pre>
<p><i>The make file runs the following commands:</i>
</p>
<pre>
 cp $DLXSROOT/prep/w/workshopfa/workshopfa.blank.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.dd
 /l/local/xpat/bin/xpatbld -m 256m -D $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 cp $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/prep/w/workshopfa/workshopfa.presgml.dd
</pre>
<a name="Step_2:_Indexing_the_the_XML_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=103" title="Edit section: Step 2: Indexing the the XML">edit</a>]</span> <span class="mw-headline"><span id="indexing_step2"><b>Step 2: Indexing the the XML</b></span></span></h4>
<p>Index all the elements and attributes listed in the ead DTD that occur in the file of concatenated EADs by running the following command:
</p><p><br />
</p>
<pre>
 make xml
</pre>
<p><i>The makefile runs the following commands:</i>
</p>
<pre>
 cp $DLXSROOT/prep/w/workshopfa/workshopfa.presgml.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.dd
 /l/local/xpat/bin/xmlrgn -D $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/misc/sgml/xml.dcl
 	$DLXSROOT/prep/w/workshopfa/workshopfa.concat.ead.dcl 
 	$DLXSROOT/obj/w/workshopfa/workshopfa.xml
 
 cp $DLXSROOT/idx/w/workshopfa/workshopfa.dd
 	$DLXSROOT/idx/w/workshopfa/workshopfa.prepost.dd
</pre>
<p><br />
After running this step, if you wish, you can see the indexed regions by issuing the following commands:
</p>
<pre>xpatu $DLXSROOT/w/workshopfa/workshopfa.dd
&gt;&gt; {ddinfo regionnames}
&gt;&gt; quit
</pre>
<p>You can also test out the xpat queries in your workshopfa.extra.srch file.  See <a href="http://localhost/mediawiki/index.php?title=Testing_Fabricated_Regions&amp;action=edit&amp;redlink=1" class="new" title="Testing Fabricated Regions (not yet written)">Testing Fabricated Regions</a>
</p>
<a name="Step_3:_Configuring_fabricated_regions_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=104" title="Edit section: Step 3: Configuring fabricated regions">edit</a>]</span> <span class="mw-headline"><span id="indexing_step3"><b>Step 3: Configuring fabricated regions</b></span></span></h4>
<p>Fabricated regions are set up in the $DLXSROOT/prep/c/collection/collection.extra.srch file.  The sample file $DLXSROOT/prep/s/samplefa/samplefa.extra.srch was designed for use with the Bentley's encoding practices.  If your encoding practices differ from the Bentley's, or if your collection does not have all the elements that the samplefa.extra.srch xpat queries expect, you will need to edit your *.extra.srch file.
</p><p>We recommend a combination of the following:
</p>
<ol><li> Iterative work to insure make post does not report errors
</li><li> Up front analysis
</li><li> Iterative work to insure that searching and rendering work properly with your encoding practices.
</li></ol>
<p>Depending on your knowledge of your encoding practices you may prefer to do "up front analysis" first prior to running "make post".  On the other hand, running "make post" will give you immediate feedback if there are any obvious errors.
</p>
<a name="Run_the_.22make_post.22_and_iterate_until_there_are_no_errors_reported._2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=105" title="Edit section: Run the &quot;make post&quot; and iterate until there are no errors reported.">edit</a>]</span> <span class="mw-headline"><span id="fabregions_post">Run the "make post" and iterate until there are no errors reported.</span></span></h5>
<p>Run the <b>"make post"</b> step and look at the errors reported.  Then modify *.extra.srch and rerun "make post".  Repeat this until <b>"make post"</b> does not report any errors. See <a href="Workshop_working_copy.html#Step_4:_Indexing_fabricated_regions" title="Mounting Finding Aids: Release 14/Workshop working copy">Step 4 Indexing fabricated regions</a> below for information on running "make post."
</p><p>The most common cause of "make post" errors related to fabricated regions result from a fabricated region being defined which includes an element which is not in your collection.  
</p><p>For example if you do not have any &lt;famname&gt; elements in any of the EADs in your collection and you are using the out-of-the-box samplefa.extra.srch, you will see an error message similare to the one below when xpat tries to index the mainauthor region using this rule below.
</p>
<pre>"No information for region "foo"
Error found:
&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found:
</pre>
<pre>
(
     (region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot;)
      within 
       (region &quot;origination&quot; within 
          ( region &quot;did&quot; within 
               (region &quot;archdesc&quot;)
          )
       )
      ); 
{exportfile /l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export;~sync &quot;mainauthor&quot;; 
</pre>
<p>So you could edit the rule to eliminate the "famname" element:
</p>
<pre>
(
     (region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;name&quot;)
      within 
       (region &quot;origination&quot; within 
          ( region &quot;did&quot; within 
               (region &quot;archdesc&quot;)
          )
       )
      ); 
{exportfile /l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export;~sync &quot;mainauthor&quot;; 
</pre>
<p><br />
See <a href="Workshop_working_copy.html#Common_common_causes_of_error_messages_and_solutions_2" title="Mounting Finding Aids: Release 14/Workshop working copy">Indexing Fabricated Regions: Common causes of error messages and solutions</a> for other examples of "make post" error messages and solutions.
</p>
<a name="Analysis_of_your_collection_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=106" title="Edit section: Analysis of your collection">edit</a>]</span> <span class="mw-headline"><span id="fabregions_analysis">Analysis of your collection</span></span></h5>
<p>You may be able to analyze your collection prior to running make post and determine what changes you want to make in the fabricated regions.  If your analysis misses any changes, you can find this out by using the two previous techniques.   
</p>
<ul><li> Once you have run "make xml", but before you run "make post", start up xpatu running against the newly created indexes:
</li></ul>
<pre> xpatu $DLXSROOT/idx/w/workshopfa/workshopfa.dd
</pre>
<p>then run the command 
</p>
<pre> &gt;&gt; {ddinfo regionnames}
</pre>
<p>This will give you a list of all the XML elements, and attributes
</p><p>Alternatively you can  create a file called xpatregions and insert the following text:
</p>
<pre>{ddinfo regionnames}
</pre>
<p>Then run this command 
</p>
<pre>$ xpatu /l1/dev/tburtonw/idx/w/workshopfa/workshopfa.dd &lt; xpatregions &gt; regions.out
</pre>
<p>Then you use the "regions.out" file you just created to sort and examine the list of fabricated regions which occur in your finding aids and compare them to the fabricated region queries in your copy  of samplefa.extra.srch ( which you copied to workshopfa.extra.srch or collection_name.extra.srch)
</p><p><br />
</p>
<a name="Exercise_the_web_user_interface_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=107" title="Edit section: Exercise the web user interface">edit</a>]</span> <span class="mw-headline"><span id="fabregions_ui">Exercise the web user interface</span></span></h5>
<div class="tip">It is best to use the other two techniques until "make post" does not report any errors. At that point you can then look for other possible problems with the searching and display which may be caused by differences between your encoding practices and those of the Bentley.  (The samplefa.extra.srch fabricated regions definitions are based on the Bentley's encoding practices).</div>
<p>Once make post does not report errors, you can follow the rest of the steps to put your collection on the web. Then carefully exercise the web user interface looking for the following symptoms: 
</p>
<ul><li> Searches that don't work properly because they depend on fabricated regions that don't match your encoding practices. 
</li><li> Rendering that does not work properly. An example is that the name/title of the finding aid may not show up if your &lt;unititle&gt; element precedes your &lt;origination&gt; element in the top level &lt;did&gt;. See also <a href="../Troubleshooting_Finding_Aids.html#Title_of_finding_aid_does_not_show_up" title="Troubleshooting Finding Aids">Title of finding aid does not show up</a>.
</li></ul>
<p>For more information on regions used for searching and rendering see 
</p>
<ul><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a>
</li></ul>
<a name="Step_4:_Indexing_fabricated_regions_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=108" title="Edit section: Step 4: Indexing fabricated regions">edit</a>]</span> <span class="mw-headline"><span id="indexing_step4"><b>Step 4: Indexing fabricated regions</b></span></span></h4>
<p>Index the fabricated regions specified in your workshopfa.extra.srch that occur in the file of concatenated EADs with the following command:
</p>
<pre>
 make post
</pre>
<p><i>The makefile runs the following commands:</i>
</p>
<pre>
 cp /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.prepost.dd
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
 touch /l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.init
 /l/local/xpat/bin/xpat -q /l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
 	&lt; /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.srch
 	| /l1/workshop/test02/dlxs/bin/t/text/output.dd.frag.pl
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/
 	&gt; /l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.dd
 /l1/workshop/test02/dlxs/bin/t/text/inc.extra.dd.pl
 	/l1/workshop/test02/dlxs/prep/w/workshopfa/workshopfa.extra.dd
 	/l1/workshop/test02/dlxs/idx/w/workshopfa/workshopfa.dd
</pre>
<a name="Common_common_causes_of_error_messages_and_solutions_4"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=109" title="Edit section: Common common causes of error messages and solutions">edit</a>]</span> <span class="mw-headline">Common common causes of error messages and solutions</span></h5>
<dl><dt><i>"invalid endpoints"</i>
</dt><dd>If you get an <i>"invalid endpoints"</i> message from "make post", the most likely cause is XML processing instructions or some other corruption. The second "make validate" step should have caught these. 
</dd></dl>
<dl><dt> "No information for region "foo"
</dt></dl>
<pre>Error found:
&lt;Error&gt;No information for region famname in the data dictionary.&lt;/Error&gt;
Error found:
&lt;Error&gt;syntax error before: ")&lt;/Error&gt;
</pre>
<dl><dd>This is usually caused by the absence of a particular region that is listed in the *.extra.srch file but not present in your collection.  For example if you do not have any &lt;famname&gt; elements in any of the EADs in your collection and you are using the out-of-the-box samplefa.extra.srch, you will see the above  error message when xpat tries to index the mainauthor region using this rule:
</dd></dl>
<pre> ((region "persname" + region "corpname" + region "famname" + region "name") within (region "origination" within 
 (  region "did" within (region "archdesc")))); {exportfile "$DLXSROOT/idx/s/samplefa/mainauthor.rgn"}; export;  
 ~sync "mainauthor";
</pre>
<p>The easiest solution is to modify *extra.srch to match the characteristics of your collection. 
</p>
<div class="tip">Tip: An alternative that is useful if you have only a small sample of the EADs you will be mounting and you expect that some of the EADs you will be getting later might have the element that is currently missing from your collection, is to add a "dummy" EAD to your collection.  The "dummy" ead should contains all the elements you will ever expect to use (or that are required by the *.extra.srch file).  The "dummy" EAD should have all elements except the &lt;eadid&gt; empty.</div>
<p><br />
</p><p><br />
</p>
<dl><dt> Syntax error
</dt></dl>
<pre>Error found:
&lt;Error&gt;syntax error before: ")&lt;/Error&gt;
</pre>
<dl><dd>Sometimes xpat will claim there is a syntax error, when in fact some other error occurred just prior to where it thinks there is a syntax error.  For example in the error message for the missing "famname" above, in addition to the "No information for region "famname" error, xpat also reports a syntax error.  In this case once you fix the famname error, the false syntax error will go away.  However, if there are no other errors reported other than syntax errors, then there is probably a real syntax error.  You should always start with the first syntax error reported.  In many cases there are unbalanced parenthesis.  The easiest way to troubleshoot syntax errors is to start an xpatu session and cut and paste xpat queries from your *.extra.search file one at a time on the command line. (See example hereXXX).
</dd></dl>
<div class="tip"> Warning!  If "make post" produces errors, you need to fix them.  Otherwise searching and display of your finding aids may produce inconsistant results and crashes of the cgi script.</div>
<p>See also <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a> 
</p>
<hr />
<a name="Testing_the_index_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=110" title="Edit section: Testing the index">edit</a>]</span> <span class="mw-headline">Testing the index</span></h3>
<p>At this point it is a good idea to do some testing of the newly created index. Strategically, it is good to test this from a directory other than the one you indexed in, to ensure that relative or absolute paths are resolving appropriately.  Invoke xpat with the following command
</p>
<pre>xpatu $DLXSROOT/idx/w/workshopfa/workshopfa.dd
</pre>
<p>For more information about searching, see the XPAT manual.  
</p><p>Try searching for some likely regions. Its a good idea to test some of the fabricated regions. Here are a few sample queries:
</p>
<pre>&gt;&gt; region "ead"
  1: 3 matches

&gt;&gt; region "eadheader"
  2: 3 matches

&gt;&gt; region "mainauthor"
  3: 3 matches

&gt;&gt; region "maintitle"
  4: 3 matches

&gt;&gt; region "admininfo"
  5: 3 matches
</pre>
<p><a href="#top" title="">Top</a>
</p>
<a name="Working_with_Fabricated_Regions_in_Findaid_Class_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=111" title="Edit section: Working with Fabricated Regions in Findaid Class">edit</a>]</span> <span class="mw-headline">Working with Fabricated Regions in Findaid Class</span></h2>
<a name="Fabricated_Regions_Overview_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=112" title="Edit section: Fabricated Regions Overview">edit</a>]</span> <span class="mw-headline">Fabricated Regions Overview</span></h3>
<p>When you run "make xml" , DLXS uses XPAT in combination with xmlrgn and a DTD.  This process indexes the elements and attributes in the DTD as "regions," containers of content rather like fields in a database. These separate regions are built into the regions file (collid.rgn) and are identified in the data dictionary (collid.dd). This is what is happening when you are running "make xml".
</p><p>However, sometimes the things you want to identify collectively aren't so handily identified as elements in the DTD. For example, the Findaid Class search interface can allow the user to search in Names regions. Perhaps for your collection you want Names to include persname, corpname, geoname. By creating an XPAT query that ORs these regions, you can have XPAT index all the regions that satisfy the OR-ed query. For example:
</p>
<pre>(region "name" + region "persname" + region "corpname" + region "geoname" +
region "famname")
</pre>
<p>Once you have a query that produces the results you want, you can add an entry to the *.extra.srch file which (when you run the "make post" command) will run the query, create a file for export, export it, and sync it:
</p>
<pre>{exportfile "$DLXSROOT/idx/c/collid/names.rgn"} export ~sync "names"
</pre>
<a name="Why_Fabricate_Regions.3F_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=113" title="Edit section: Why Fabricate Regions?">edit</a>]</span> <span class="mw-headline">Why Fabricate Regions?</span></h3>
<p>Why fabricate regions? Why not just put these queries in the map file and call them names? While you could, it's probably worth your time to build these succinctly-named and precompiled regions; query errors are more easily identified in the index building than in the CGI, and XPAT searches can be simpler and quicker for terms within the prebuilt regions.
</p><p>The middleware for Findaid Class uses a number of fabricated regions in order to speed up xpat queries and simplify coding and configuration.
</p><p>Findaid Class uses fabricated regions for several purposes
</p>
<ol><li> To share code with Text Class (e.g. region "main")  
</li><li> Fabricated regions for searching  (e.g. region "names")
</li><li> Fabricated regions to produce the Table of Contents and to implement display of EAD sections as focused regions such as the "Title Page" or "Arrangement" ( See <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Working with the table of contents</a> for more information on the use of fabricated regions for the table of contents.)
</li><li> Other regions specifically used in a PI (region "maintitle" is used by the PI &lt;?ITEM_TITLE_XML?&gt; used to display the title of a finding aid at the top of each page)
</li></ol>
<p>The fabricated region "main" is set to refer to <span class="unixcommand">&lt;ead&gt;</span> in FindaidClass with:
</p>
<pre>(region ead); {exportfile "/l1/idx/b/bhlead/main.rgn"}; export; ~sync "main";
</pre>
<p>whereas in TextClass "main" can refer to <span class="unixcommand">&lt;TEXT&gt;</span>. Therfore, both FindaidClass and TextClass can share the Perl code, in a higher level subclass, that creates searches for "main".
</p><p>Other fabricated regions are used for searching such as the "maintitle" and "mainauthor" regions.
</p>
<a name="Fabricated_Regions_in_the_UI_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=114" title="Edit section: Fabricated Regions in the UI">edit</a>]</span> <span class="mw-headline">Fabricated Regions in the UI</span></h3>
<p>All of the search links in the dropdown menu for the basic search (see below) are based on indexes for fabricated regions.  
</p><p><a href="../Image_Basic_search.html" class="image" title="Image:Basic_search.png"><img alt="Image:Basic_search.png" src="../../mediawiki/images/2/2f/Basic_search.png" width="337" height="279" border="0" /></a>
</p><p>These are the default regions used for searching and the names used in the menu:
</p>
<dl><dt>archdesc</dt><dd>Entire Finding Aid
</dd><dt>names</dt><dd>Names
</dd><dt>places</dt><dd>Places
</dd><dt>subjects</dt><dd>Subjects
</dd><dt>callnum</dt><dd>Call Number
</dd><dt>maintitle</dt><dd>Collection Title
</dd><dt>repository</dt><dd>Repository
</dd></dl>
<p>(The relationship between the region and the name in the menu is set in the map file.  See <a href="../Mounting_the_Collection_Online.html#Make_Collection_Map" title="Mounting the Collection Online"> Make Collection Map</a> )
</p><p><br />
The majority of the fabricated regions for Findaid Class are used for the creation and display of the left hand table of contents in the "outline" view. The findaidclass.cfg file contains a hash called&nbsp;%gSectHeadsHash which is normally loaded into FindaidClass.pm's tocheads hash in the FindaidClass::_initialize method. The elements of the hash and the corresponding fabiricated regions are used to create the table of contents and to output the XML for the corresponding section of the EAD when one of the TOC links is clicked on by a user. The fabricated regions are used so XPAT can have binary indexes ready to use for fast retrieval of these EAD sections.  See <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Customizing Findaid Class: Working with the table of contents</a> for more information on the use of fabricated regions for the table of contents.
</p>
<a name="Working_with_extra.srch_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=115" title="Edit section: Working with extra.srch">edit</a>]</span> <span class="mw-headline">Working with extra.srch</span></h3>
<p>Fabricated regions within the Findaid Class can be found in the extra.srch file for the sample collection at <tt>$DLXSROOT/prep/s/samplefa/samplefa.extra.srch</tt>. As with any other elements used in the interface for a given collection, <b>fabricated regions used in the user interface, such as the names of searches available in the dropdown menu of the search box, must also be represented in the collmgr entry and the map file for that collection.</b>
</p><p>Some of the more interesting regions extracted from the samplefa.extra.srch file are listed below.
</p><p>One of these regions is the add. This used to be <span class="unixcommand">&lt;ADD&gt;</span> in the EAD 1.0 DTD, but now, is created based on the ead2002 DTD's <span class="unixcommand">&lt;descgrp&gt;</span> tag which contains a <span class="unixcommand">type</span> attribute of <span class="unixcommand">add</span>.
</p>
<pre>&lt;descgrp type=&quot;add&quot;&gt;</pre>
<p>A number of issues related to varying encoding practices can be resolved by the appropriate edits to the *.extra.srch file. (Although some of them may require changes to other files as well)
</p>
<ul><li> If your &lt;unititle&gt; element precedes your &lt;origination&gt; element in <span class="unixcommand">the top level &lt;did&gt;, you will have to modify the "maintitle" fabricated region query in *.extra.srch </span>
</li><li> If you do not use a &lt;frontmatter&gt; element, you will have to make modifications to various files including modifying *.extra.srch to provide an appropriate "Title Page" region based on the &lt;eadheader&gt;
</li><li> If your encoding practices for &lt;biohist&gt; differ from the Bentley's, you may need to make changes in the &lt;bioghist&gt; fabricated region although changes to other files may be suffient. The changes might include: modifying findaidclass.cfg or creating a subclass of FindaidClass and override FindaidClass:: GetBioghistTocHead, and/or changing the appropriate XSL files.
</li><li> If you want sections of the finding aid that are not completely within a well-defined element such as &lt;relatedmaterial&gt;or &lt;separatedmaterial&gt; to show up in the table of contents, you may have to create a fabricated region using the appropriate xpat query and then modify findaidclass.cfg and make other modifications to the code.
</li></ul>
<hr />
<blockquote>
<pre>
 
 
 
   (region ead); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/main.rgn&quot;}; export; ~sync &quot;main&quot;;
    
     ##
     (((region &quot;&lt;c01&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c02&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c03&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c04&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c05&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c06&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c07&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c08&quot;..&quot;&lt;/did&gt;&quot; + region &quot;&lt;c09&quot;..&quot;&lt;/did&gt;&quot;) not incl (&quot;level=file&quot; + &quot;level=item&quot;)) incl &quot;level=&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/c0xhead.rgn&quot;}; export; ~sync &quot;c0xhead&quot;;
        ##
     ((region &quot;&lt;origination&quot;..&quot;&lt;/unittitle&gt;&quot;) within ((region did within region archdesc) not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/maintitle.rgn&quot;}; export; ~sync &quot;maintitle&quot;;
     ##
        
     ((region &quot;persname&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot;) within (region &quot;origination&quot; within ( region &quot;did&quot; within (region &quot;archdesc&quot;)))); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/mainauthor.rgn&quot;}; export; ~sync &quot;mainauthor&quot;;
     ##
    
     (region &quot;abstract&quot; within ((region did within region archdesc) not within region &quot;c01&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/mainabstract.rgn&quot;}; export; ~sync &quot;mainabstract&quot;;
        ##
        ((region unitdate incl &quot;encodinganalog=245$f&quot;) within ((region did within region archdesc) not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/colldate.rgn&quot;}; export; ~sync &quot;colldate&quot;;
     ##
     
     (region dsc); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/contentslist.rgn&quot;}; export; ~sync &quot;contentslist&quot;;
     ##
      ########## admininfo ########
     admininfot = (region &quot;descgrp-T&quot; incl (region &quot;A-type&quot; incl &quot;admin&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/admininfo-t.rgn&quot;}; export; ~sync &quot;admininfo-t&quot;;
     ##
     ## ########## add ######
     addt = (region &quot;descgrp-T&quot; incl (region &quot;A-type&quot; incl &quot;add&quot;)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/add-t.rgn&quot;}; export; ~sync &quot;add-t&quot;;
   ## ########## frontmatter/titlepage ########
   frontmattert = region &quot;frontmatter-T&quot;; {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/frontmatter-t.rgn&quot;}; export; ~sync &quot;frontmatter-t&quot;;
     ##
     # frontmatter itself not needed as fabricated region since it exists
     # as a regular xml region
     ##
   ## ########## bioghist ########
     bioghist = ((region &quot;bioghist&quot; within region &quot;archdesc&quot;) not within region &quot;dsc&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/bioghist.rgn&quot;}; export; ~sync &quot;bioghist&quot;;
     
   ##bioghisthead = ((region &quot;&lt;bioghist&quot; .. &quot;&lt;/head&gt;&quot; within region &quot;archdesc&quot;) not within region &quot;dsc&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/bioghisthead.rgn&quot;}; export; ~sync &quot;bioghisthead&quot;;
     ##
   ((region did within region archdesc) not within region dsc); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/summaryinfo.rgn&quot;}; export; ~sync &quot;summaryinfo&quot;;;
     ##
   ##
   #############################
   (region &quot;subject&quot; + region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot; + region &quot;persname&quot; + region &quot;geogname&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/subjects.rgn&quot;}; export; ~sync &quot;subjects&quot;;
   (region &quot;corpname&quot; + region &quot;famname&quot; + region &quot;name&quot; + region &quot;persname&quot;); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/names.rgn&quot;}; export; ~sync &quot;names&quot;;
   
    
   #(region &quot;odd-T&quot; ^ (region odd not within region dsc)); {exportfile &quot;/l1/workshop/user11/dlxs/idx/s/samplefa/odd-t.rgn&quot;}; export; ~sync &quot;odd-t&quot;;  
 </pre>
</blockquote>
<p>See <a href="http://localhost/mediawiki/index.php?title=Samplefa.extra.srch.txt&amp;action=edit&amp;redlink=1" class="new" title="Samplefa.extra.srch.txt (not yet written)">samplefa.extra.srch</a> for all of the fabricated regions used with the samplefa collection.
</p>
<a name="Fabricated_regions_required_in_Findaid_Class_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=116" title="Edit section: Fabricated regions required in Findaid Class">edit</a>]</span> <span class="mw-headline">Fabricated regions required in Findaid Class</span></h3>
<ul><li> main
</li><li> maintitle
</li><li> mainauthor
</li><li> mainabstract
</li><li> colltitle
</li><li> colldate
</li><li> callnum
</li><li> contentslist
</li><li> contentslist-t
</li><li> admininfo
</li><li> admininfo
</li><li> admininfo-t
</li><li> frontmatter-t
</li><li> bioghist-t
</li><li> arrangement-t
</li><li> controlaccess-t
</li><li> controlaccess
</li><li> scopecontent-t
</li><li> summaryinfo-t
</li><li> summaryinfo
</li></ul>
<a name="Fabricated_regions_commonly_found_in_Findaid_Class_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=117" title="Edit section: Fabricated regions commonly found in Findaid Class">edit</a>]</span> <span class="mw-headline">Fabricated regions commonly found in Findaid Class</span></h3>
<ul><li> subjects
</li><li> names
</li></ul>
<p><a href="#top" title="">Top</a>
</p>
<a name="Customizing_Findaid_Class_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=118" title="Edit section: Customizing Findaid Class">edit</a>]</span> <span class="mw-headline">Customizing Findaid Class</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Customizing Findaid Class
</p>
<a name="Working_with_the_table_of_contents_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=119" title="Edit section: Working with the table of contents">edit</a>]</span> <span class="mw-headline">Working with the table of contents</span></h3>
<p>The table of contents on the left-hand side of the finding aid display is based on fabricated regions set up in *.extra.srch and configured either in a configuration file or in a subclass of FindaidClass.pm
</p><p>If a subclass is not being used to override the FindaidClass::_initialize method, the configuration file will be used.  It is:
</p>
<pre>$DLXSROOT/cgi/f/findaidclass/findaidclass.cfg 
</pre>
<p>The configuration file sets up a hash called&nbsp;%gSectHeadsHash. The relevant section of the findaidclass.cfg file is:
</p>
<pre># **********************************************************************
# Hash of section heads that XPAT should search for.  A reference to
# this hash is added as member data keyed by 'tocheads' to the
# FindaidClass object at initialization time. Comment out those that
# are missing in your finding aids.
# **********************************************************************
%gSectHeadsHash = (
                  'bioghist-t'      =&gt;  {
                                         'collection' =&gt; qq{Biography},
                                         'recordgrp' =&gt; qq{History},
                                        },
                  'controlaccess-t' =&gt; qq{Subject Terms},
                  'frontmatter-t'   =&gt; qq{Title Page},
                  'arrangement-t'   =&gt; qq{Arrangement},
                  'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                  'summaryinfo-t'   =&gt; qq{Summary Information},
                  'contentslist-t'  =&gt; qq{Contents List},
                  'admininfo-t'     =&gt; qq{Access and Use},
                  'add-t'           =&gt; qq{Additional Descriptive Data},
                 );
</pre>
<p><br />
The&nbsp;%gSectHeadsHash is normally loaded read from the configuration file and loaded into a hash called tocheads in the FindaidClass::_initialize method when the FindaidClass object is created.  If you wish to change the table of contents on a collection-specific basis, you can override the FindaidClass::_initialize method in a collection-specific subclass.
</p><p>For an example of using a subclass to override the default table of contents see:
$DLXSROOT/cgi/f/findaid/FindaidClass/<a href="../SamplefaFC.html" title="SamplefaFC.pm">SamplefaFC.pm</a>
</p><p><br />
</p><p>Note that the default setting in the Collection Manager for the samplefa collection is to use this subclass:
</p><p><a href="../Image_Samplefa_collmgr_subclass.html" class="image" title="image of CollMgr setting for subclass of Findaid Class"><img alt="image of CollMgr setting for subclass of Findaid Class" src="../../mediawiki/images/7/7e/Samplefa_collmgr_subclass.png" width="499" height="45" border="0" /></a>
</p><p><br />
</p><p>The diagram below shows the fabricated region and the corresponding EAD element tags for the out-of-the-box table of contents
</p><p><a href="../Image_Tochead2.html" class="image" title="Image:Tochead2.jpg"><img alt="Image:Tochead2.jpg" src="../../mediawiki/images/6/69/Tochead2.jpg" width="817" height="584" border="0" /></a>
</p>
<a name="Changing_the_labels_in_the_table_of_contents_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=120" title="Edit section: Changing the labels in the table of contents">edit</a>]</span> <span class="mw-headline">Changing the labels in the table of contents</span></h4>
<p>If you want to change the labels for all of your Findaid Class collections, you can change the strings in the&nbsp;%gSectHeadsHash hash in $DLXSROOT/cgi/f/findaid/findaidclass.cfg.  If you want to change the labels on a collection by collection basis, you will probably want to subclass and override the FindaidClass::_initialize method as is done in the sample file:  $DLXSROOT/cgi/f/findaid/FindaidClass/<a href="../SamplefaFC.html" title="SamplefaFC.pm">SamplefaFC.pm</a>
</p>
<a name="Adding_sections_to_the_table_of_contents_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=121" title="Edit section: Adding sections to the table of contents">edit</a>]</span> <span class="mw-headline">Adding sections to the table of contents</span></h4>
<p>We will use the sections/elements Related Material and Separated Material,&lt;relatedmaterial&gt; and &lt;separatedmaterial&gt; as an example.
</p>
<a name="Step_1.__Add_the_appropriate_xpat_region_definitions_to_your_extra.srch_file_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=122" title="Edit section: Step 1.  Add the appropriate xpat region definitions to your extra.srch file">edit</a>]</span> <span class="mw-headline">Step 1.  Add the appropriate xpat region definitions to your extra.srch file</span></h5>
<pre># Separated and related material
# separated material
(region "separatedmaterial-T" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demo/sepmaterial-t.rgn"}; export; ~sync "sepmaterial-t";
(region "separatedmaterial" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demo/sepmaterial.rgn"}; export; ~sync "sepmaterial";
#
# related material
(region "relatedmaterial-T" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demo/relmaterial-t.rgn"}; export; ~sync "relmaterial-t";
(region "relatedmaterial" not within region "descgrp"); {exportfile "$DLXSROOT/idx/d/demo/relmaterial.rgn"}; export; ~sync "relmaterial";
</pre>
<a name="Step_2.__Modify_the_TOC_headers_hash_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=123" title="Edit section: Step 2.  Modify the TOC headers hash">edit</a>]</span> <span class="mw-headline">Step 2.  Modify the TOC headers hash</span></h5>
<p>You can either <a href="Workshop_working_copy.html#Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg_config_file." title="Mounting Finding Aids: Release 14/Workshop working copy">2A modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg config file</a> if you want to change this for all your collections
or <a href="Workshop_working_copy.html#Step_2.B._Create_a_subclass" title="Mounting Finding Aids: Release 14/Workshop working copy">2.B.create a subclass</a>, if this change only applies to one of your collections.
</p>
<a name="Step_2.A._Modify_the_.24DLXSROOT.2Fcgi.2Ff.2Ffindaidclass.2Ffindaidclass.cfg__config_file._2"></a><h6><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=124" title="Edit section: Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.">edit</a>]</span> <span class="mw-headline">Step 2.A. Modify the $DLXSROOT/cgi/f/findaidclass/findaidclass.cfg  config file.</span></h6>
<p>Add the two regions and the text labels you want to the&nbsp;%gSectHeadsHash in 
$DLXSROOT/cgi/f/findaidclass/findaidclass.cfg 
</p>
<pre>%gSectHeadsHash = (
                  'bioghist-t'      =&gt;  {
                                         'collection' =&gt; qq{Biography},
                                         'recordgrp' =&gt; qq{History},
                                        },
                  'controlaccess-t' =&gt; qq{Subject Terms},
                  'frontmatter-t'   =&gt; qq{Title Page},
                  'arrangement-t'   =&gt; qq{Arrangement},
                  'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                  'summaryinfo-t'   =&gt; qq{Summary Information},
                  'contentslist-t'  =&gt; qq{Contents List},
                  'admininfo-t'     =&gt; qq{Access and Use},
                  'add-t'           =&gt; qq{Additional Descriptive Data},
                  # add the two lines below:
                  'sepmaterial-t'           =&gt; qq{Separated Material},
                  'relmaterial-t'           =&gt; qq{Related Material},
                 );
</pre>
<p><br />
</p>
<a name="Step_2.B.__Create_a_subclass_2"></a><h6><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=125" title="Edit section: Step 2.B.  Create a subclass">edit</a>]</span> <span class="mw-headline">Step 2.B.  Create a subclass</span></h6>
<p><span>(only if you don't do step 2.A.)</span>
</p><p>Step 2.B.1. Create the subclass
</p><p>The easiest way to do this is to copy the example subclass in 
$DLXSROOT/cgi/f/findaid/FindaidClass/SamplefaFC.pm
</p><p>Copy this file to 
$DLXSROOT/cgi/f/findaid/FindaidClass/MyCollNameFC.pm  (in the version below we have used DemoFC.pm
</p><p><br />
Change the package name to match the name of the module.
change package SamplefaFC to package DemoFC;
</p><p>Add the sections you want to sub _intitialize
</p>
<pre>sub _initialize
{
   my $self = shift;
   my ( $collid, $cio, $optionalArgsHashRef ) = @_;
   $self-&gt;SUPER::_initialize( @_ );
   # Not necessary to subclass this item unless there are other outline
   # heads that are desired
   $self-&gt;SetSelfKeyInfo( 'tocheads' =&gt;
                          {
                           'bioghist-t'      =&gt;  {
                                                  'collection' =&gt; qq{Biography},
                                                  'recordgrp' =&gt; qq{History},
                                                 },
                           'controlaccess-t' =&gt; qq{Subject Terms},
                           'frontmatter-t'   =&gt; qq{Title Page},
                           'arrangement-t'   =&gt; qq{Arrangement},
                           'scopecontent-t'  =&gt; qq{Collection Scope and Content Note},
                           'summaryinfo-t'   =&gt; qq{Summary Information},
                           'contentslist-t'  =&gt; qq{Contents List},
                           'admininfo-t'     =&gt; qq{Access and Use},
 #                          'add-t'           =&gt; qq{Additional Descriptive Data},
 # here are the two lines to be added
                           'sepmaterial-t'           =&gt; qq{Separated Material},
                           'relmaterial-t'           =&gt; qq{Related Material},
                          }
                        );
}
</pre>
<p><br />
</p><p><br />
</p><p>Step 2.B.2.  Edit the Collmgr entry to point to the new subclass
</p>
<a name="Step_3._Add_appropriate_XSL_to_render_the_sections_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=126" title="Edit section: Step 3. Add appropriate XSL to render the sections">edit</a>]</span> <span class="mw-headline">Step 3. Add appropriate XSL to render the sections </span></h5>
<p>See also <a href="../User_Interface_Customization.html#XSL_Stylesheet" title="User Interface Customization">User_Interface_Customization#XSL_Stylesheet</a> for more information on this step.
</p><p>Create a web directory for your collection and two empty files called text.components.xsl and text.xsl
</p>
<pre> mkdir $DLXSROOT/web/m/mycoll
 cd $DLXSROOT/web/m/mycoll
 echo "" &gt;text.components.xsl
 echo "" &gt;text.xsl
</pre>
<p>Add the basic xsl template and add an import statement to import the class level xsl file.
Example for $DLXSROOT/web/m/mycoll/text.components.xsl:
</p>
<pre>
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                version=&quot;1.0&quot;&gt;

  &lt;!-- import/include (should be first child of stylesheet element --&gt;
  &lt;!-- DLXS convention: for import, path is always relative to DLXSROOT/web --&gt;
  &lt;xsl:import href=&quot;../../f/findaid/text.components.xsl&quot;/&gt;

   
   &lt;/xsl:stylesheet&gt;

</pre>
<p>For $DLXSROOT/web/m/mycoll/text.xsl, use the same text as above, except change the name of the imported file from "f/findaid/text.components.xsl" to "f/findaid/text.xsl"
</p><p>For text.xsl you need to copy the template for       &lt;xsl:template match="RegionContent"&gt; from f/findaid/text.xsl.
</p><p>Add sections for relmaterial and sepmaterial  (Note that if you named your region searches differently in your extra.srch you will have to change the lines to match accordingly.)
</p>
<pre>
      &lt;xsl:template match=&quot;RegionContent&quot;&gt;
        &lt;xsl:choose&gt;
          &lt;!-- This is a copy of the template by the same name in  
               $DLXSROOT/webf/findaid/text.xsl 
               We are just adding a few lines for two new sections
               --&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'relmaterial'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;relatedmaterial&quot;/&gt;
          &lt;/xsl:when&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'sepmaterial'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;separatedmaterial&quot;/&gt;
          &lt;/xsl:when&gt;

          &lt;xsl:when test=&quot;$FocusRegion = 'summaryinfo'&quot;&gt;
            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;summaryinfo&quot;/&gt;
          &lt;/xsl:when&gt;
          ....
     &lt;/xsl:template&gt;
</pre>
<p><br />
</p><p>For <b>text.components.xsl</b>, 
1) create templates for the sections (in this case &lt;relatedmaterial&gt; and &lt;separatedmaterial&gt;). Here we have added some text "Debugging: XXX" and a simple "xsl:apply-templates".  You may need to make more changes, but this is a good start.  (Alternatively, you can use &lt;xsl:copy-of select="."&gt; instead of apply-templates for debugging purposes and that should echo the raw xml to your html page.)
</p><p>2) Copy the template for foo bar baz
</p>
<pre>
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
  &lt;xsl:stylesheet xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;
                version=&quot;1.0&quot;&gt;

  &lt;xsl:import href=&quot;../../f/findaid/text.components.xsl&quot;/&gt;

  &lt;xsl:template match=&quot;relatedmaterial&quot;&gt;
    &lt;xsl:text&gt;Debugging: Related Material &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match=&quot;separatedmaterial&quot;&gt;
    &lt;xsl:text&gt;Debugging: Separated Material &lt;/xsl:text&gt;
      &lt;xsl:apply-templates/&gt;
  &lt;/xsl:template&gt;



 &lt;/xsl:stylesheet&gt;
</pre>
<a name="Changing_the_Bioghist_labels_to_use_the_appropriate_.3Chead.3E_elements_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=127" title="Edit section: Changing the Bioghist labels to use the appropriate &amp;lt;head&amp;gt; elements">edit</a>]</span> <span class="mw-headline">Changing the Bioghist labels to use the appropriate &lt;head&gt; elements</span></h3>
<p><a href="#top" title="">Top</a>
</p>
<a name="Mounting_the_Collection_Online_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=128" title="Edit section: Mounting the Collection Online">edit</a>]</span> <span class="mw-headline">Mounting the Collection Online</span></h2>
<p><a href="../DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="../Mounting_Collections__Class-specific_Steps.html" title="Mounting Collections: Class-specific Steps">Mounting Collections: Class-specific Steps</a> &gt; <a href="../Mounting_a_Finding_Aids_Collection.html" title="Mounting a Finding Aids Collection">Mounting a Finding Aids Collection</a> &gt; Mounting the Collection Online
</p><p>These are the final steps in deploying an Findaid Class collection online. Here the <b>Collection Manager</b> will be used to create and edit a <b>Collection Database</b> entry for <b>workshopfa</b> . The <b>Collection Manager</b> will also be used to check the <b>Group Database</b>. Finally, we need to work with the collection map and the set up the collection's web directory.
</p><p><br />
</p>
<a name="Create_and_edit_an_entry_in_the_Collection_Database_for_your_collection_with_CollMgr_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=129" title="Edit section: Create and edit an entry in the Collection Database for your collection with CollMgr">edit</a>]</span> <span class="mw-headline"> Create and edit an entry in the Collection Database for your collection with CollMgr </span></h3>
<p>Each collection has a record in the collection database that holds collection specific configurations for the middleware. CollMgr (Collection Manager) is a web based interface to the collection database that provides functionality for editing each collection's record. Collections can be checked-out for editing, checked-in for testing, and released to production. In general, a new collection needs to have a CollMgr record created from scratch before the middleware can be used. 
</p><p>Step 1.  Create a workshopfa Collmgr entry by copying from samplefa.
</p><p><b>A.  Login to Collmgr.</b>  The URL should be: 
</p>
<pre>http://path_to_cgi/cgi/c/collmgr/collmgr 
</pre>
<p>The collmgr page is usually set up to use apache basic authorization.  The username and password should have been set up when you set up your virtual host in apache. (<a href="../Sample_apache_virtual_host.html" title="Sample apache virtual host">sample apache virtual host</a>
)
</p><p><b>B. Select Manage Collections:Findaid Class:</b>
</p><p><a href="../Image_Collmgr1.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/1/19/Collmgr1.png" width="706" height="180" border="0" /></a> 
<a href="../Image_Collmgr2.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/4/42/Collmgr2.png" width="173" height="245" border="0" /></a>
</p><p><b>C.  Select samplefa and click on "copy a collection" </b>(Note: In the image below workshopfa already exists, but in your clean install it will not exist)
</p><p><a href="../Image_Collmgr3.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/a/ad/Collmgr3.png" width="767" height="449" border="0" /></a> 
</p><p><b>D. Enter your collection id</b> (workshopfa)
<a href="../Image_Collmgr4.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/4/41/Collmgr4.png" width="658" height="220" border="0" /></a> 
</p><p><b>E. Change all occurances of "samplefa" to "workshopfa"</b>  For example in the section below the webdir should be changed from "s/samplefa" to "w/workshopfa" (And you need to copy and rename the appropriate files from $DLXSROOT/web/s/samplefa to $DLXSROOT/web/w/workshopfa)
</p><p><b>WARNING! If you forget to change one of the entries it can lead to very confusing results.</b> For example if you forget to change the "dd" file entry from "/idx/s/samplefa/samplefa.dd" to /idx/w/workshopfa/workshopfa.dd", the middleware will try to search the samplefa collection but all the rest of the configuration information will point to workshopfa, which will result in erratic behavior and potentially confusing error messages.
</p><p><b>F. Change the entry for the subclassmodule from "/FindaidClass/SamplefaFC" to "FindaidClass".</b>  This means that this collection will use the default FindaidClass.pm instead of the SampleFC subclass.
(Unless you want to subclass Findaid Class in which case you would replace "SamplefaFC with the name of your collection-specific subclass)
</p><p><a href="../Image_Collmgr6.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/e/ee/Collmgr6.png" width="466" height="73" border="0" /></a> 
</p><p><br />
<b>G. Set the containerdepth field to the depth of containers in your collection</b>
</p><p><a href="../Image_Collmgr5.html" class="image" title="alt text"><img alt="alt text" src="../../mediawiki/images/a/a1/Collmgr5.png" width="464" height="49" border="0" /></a> 
</p><p>For example if you have levels c01 to c05 set the containerdepth to 5.  You can use the xpat command {ddinfo regionnames} to look at your data and look for the highest c level to determine what number to put here.
</p>
<pre>xpatu $DLXSROOT/idx/s/samplefa/samplefa.dd
?&gt;&gt; {ddinfo regionnames}
</pre>
<p>If you have containerdepth  set to a number that is higher than what is in your data, xpat will try to search for the missing c0x level elements and will produce errors.  This can occur whenever xpat tries to query the 'c0xheads" fabricated region.  For example we set the continer depth to 7 for the samplefa collection (the samplefa collection only has c01-c06) and then got the following error message when we tried to view a kwic (search terms in context) view for the Post Family Papers in our web browser: 
</p>
<pre>Message: Query error in samplefa, samplefa.dd, query=pr.region.c0xhead 
(region "c0xhead" ^ ( region "c07" incl *detailslicesearch ));, 
Error=No information for region c07 in the data dictionary. syntax error before: ))
</pre>
<p>You will also probably want to edit: 
</p>
<ul><li>fields related to the dynamic browse page (See <a href="#Create_a_browse_page" title="">Create a browse page</a>)
</li><li>fields related to searching and sorting in the user interface:  regionsearch, termsearch, sortfields (Note that these need to match the entries in your <a href="#Make_Collection_Map" title="">map file</a>
</li></ul>
<p><i>More Documentation</i>
</p>
<ul><li> <a href="../Collection_Manager_Field_Descriptions.html" title="Collection Manager Field Descriptions">Collection Manager Field Descriptions</a>
</li></ul>
<a name="Review_the_Groups_Database_Entry_with_CollMgr_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=130" title="Edit section: Review the Groups Database Entry with CollMgr">edit</a>]</span> <span class="mw-headline"> Review the Groups Database Entry with CollMgr </span></h3>
<p>Another function of CollMgr allows the grouping of collections for cross-collection searching. Any number of collection groups may be created for Findaid Class. Findaid Class supports a group with the groupid "all". It is not a requirement that all collections be in this group, though that's the basic idea. Groups are created and modified using CollMgr.
</p>
<a name="Make_Collection_Map_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=131" title="Edit section: Make Collection Map">edit</a>]</span> <span class="mw-headline"> Make Collection Map </span></h3>
<p>Collection mapper files exist to identify the regions and operators used by the middleware when interacting with the search forms. Each collection will need one, but most collections can use a fairly standard map file, such as the one in the <b>samplefa</b> collection. The map files for all Findaid Class collections are stored in $DLXSROOT/misc/f/findaid/maps
</p><p>You can find an example map file for the sample finding aids collection at DLXSROOT/misc/f/findaid/maps/samplefa.map. Rather than modifying this file, you should copy it so that you always have a blank copy to which to refer.
</p><p>You can use the following commands to copy the samplefa.map file to use as a basis for your collection:
</p>
<pre> cd $DLXSROOT/misc/f/findaid/maps
 cp samplefa.map workshopfa.map
</pre>
<p><br />
Map files contain mapped items where one term or name for the item is mapped to another term or name. For example, a term used by an HTML form to refer to a searchable region (e.g., "entire finding aid") can be mapped to an XPAT searchable region (e.g., EAD). For more general background on map files, see <a href="../Working_with_Map_Files.html" title="Working with Map Files">Working with Map Files</a>
</p><p><br />
Currently, the format of the map files is XML and each collection map file conforms to a simple DTD (we have considered implementation of other possible ways of mapping terms, such as a database where one could map from one column's data to another). The middleware reads the map file into a TerminologyMapper object after which the CGI program can at any time request of the object the mappings for terms. Each mapped item and its various terms are contained within a &lt;MAPPING&gt; element.
</p><p>Each mapping element in a map file consists of the following:
</p>
<dl><dt>label
</dt><dd> This element determines what will display in the user's browser when constructing searches. It must match the value used in the collmgr. (See step 2.)
</dd></dl>
<dl><dt>synthetic
</dt><dd> This element contains the variable name as it is used in the cgi.
</dd></dl>
<dl><dt>native
</dt><dd> The "native" element provides an appropriate XPAT search that the system will use to discover the appropriate content. The search may be simple (e.g., region EADID) or complex (e.g., ((region DID within region ARCHDESC) not within region DSC)) 
</dd></dl>
<dl><dt>nativeregionname
</dt><dd> The element name itself, as it is indexed, without terms used in the XPAT search.
</dd></dl>
<p>Map files take language that is used in the forms and translates it into language for the cgi and for XPAT. For example, if you want your users to be able to search within names, you need to add a mapping for how you want headings and categories to appear in the search interface (case is important, as is pluralization!), how the cgi variable is set (usually in all caps, and not stepping on an existing variable), and how XPAT will identify and retrieve this natively (in XPAT search language).
The first part of the map file is operator mapping, for the form, the cgi, and XPAT, and the second part is for region mapping. You might note that some of the fields that are defined in the map file correspond to some of the fabricated regions.
Note: The larger the map file, the slower your site will run, so you don’t necessarily want to map everything, such as variations of singular and plural fields.
</p>
<a name="More_Documentation_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=132" title="Edit section: More Documentation">edit</a>]</span> <span class="mw-headline"> <i>More Documentation</i> </span></h3>
<ul><li> <a href="../Working_with_Map_Files.html" title="Working with Map Files">Working with Map Files</a>
</li></ul>
<hr />
<a name="Set_Up_the_Collection.27s_Web_Directory_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=133" title="Edit section: Set Up the Collection's Web Directory">edit</a>]</span> <span class="mw-headline"> Set Up the Collection's Web Directory </span></h3>
<p>Each collection may have a <span class="unixcommand">web</span> directory with custom Cascading Style Sheets, interface templates, graphics, and javascript. The default is for a collection to use the web templates at<span class="unixcommand"> $DLXSROOT/web/f/findaid</span>. Of course, collection specific templates and other files can be placed in a collection specific web directory, and it is necessary if you have any customization at all. <i>DLXS Middleware uses [../ui/index.html#fallback fallback] to find HTML related templates, chunks, graphics, js and css files.</i>
</p><p>For a minimal collection, you will want two files: index.html and <span class="unixcommand">FindaidClass-specific.css</span>.
</p>
<pre>mkdir -p $DLXSROOT/web/w/workshopfa
cp $DLXSROOT/web/s/samplefa/index.html $DLXSROOT/web/w/workshopfa/index.html
cp $DLXSROOT/web/s/samplefa/findaidclass-specific.css $DLXSROOT/web/w/workshopfa/findaidclass-specific.css
</pre>
<div class="tip">DLXS_TIP: You will need to change the collection name and paths from samplefa to workshopfa etc..</div>
<p>You might want to change the look radically, if your HTML skills are up to it.
</p><p>Note that the browse link on the index.html page is hard-coded to go to the samplefa hard-coded browse.html page. You may want to change this to point to a dynamic browse page (see below). The url for the dynamic browse page is ".../cgi/f/findaid/findaid-idx?c=workshopfa;page=browse".
</p><p>If you want to use a hard-coded browse page, you could copy the $DLXSROOT/web/s/samplefa/browse.html page to $DLXSROOT/web/w/workshopfa/browse.html and edit the link in $DLXSROOT/web/w/workshopfa/index.html accordingly.
</p><p>If you would prefer a dynamic home page, instead of the static index.html, you can copy and modify the home.xml and home.xsl files from $DLXSROOT/web/f/findaid/. Note that they are currently set up to be the home page for all finding aids collections, so you will have to do some considerable editing. However they contain a number of PIs that you may find useful. In order to have these pages actually be used by DLXS, they have to be present in your $DLXSROOT/web/w/workshopfa/ directory and <b>there can't be an index.html page in that directory.</b> The easiest thing to do, if you have an existing index.html page is to rename it to "index.html.foobar" or something. <br />
</p>
<a name="Create_a_browse_page_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=134" title="Edit section: Create a browse page">edit</a>]</span> <span class="mw-headline"> Create a browse page </span></h3>
<p>See the documentation: <a href="../Setting_up_Dynamic_Browsing.html" title="Setting up Dynamic Browsing">Setting up Dynamic Browsing</a>
</p>
<a name="Try_It_Out_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=135" title="Edit section: Try It Out">edit</a>]</span> <span class="mw-headline"> Try It Out </span></h3>
<p>http://$DLXSROOT/cgi/f/findaid/findaid-idx?c=workshopfa
</p><p><a href="#top" title="">Top</a>
</p>
<a name="Troubleshooting_Finding_Aids_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=136" title="Edit section: Troubleshooting Finding Aids">edit</a>]</span> <span class="mw-headline">Troubleshooting Finding Aids</span></h2>
<a name="General_Techniques_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=137" title="Edit section: General Techniques">edit</a>]</span> <span class="mw-headline">General Techniques</span></h3>
<a name="Common_Problems_and_Solutions_2"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=138" title="Edit section: Common Problems and Solutions">edit</a>]</span> <span class="mw-headline">Common Problems and Solutions</span></h4>
<a name="Title_of_Finding_Aid_does_not_show_up_2"></a><h5><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=139" title="Edit section: Title of Finding Aid does not show up">edit</a>]</span> <span class="mw-headline">Title of Finding Aid does not show up</span></h5>
<p>This is usually caused by the &lt;origination&gt; preceding the &lt;unittitle&gt; in the top level &lt;did&gt; element of your EAD
</p><p>In the *.extra.srch file
</p><p><br />
comment out the following line:
</p><p><i>(note that the region definitions are all on one line, but have been wrapped so they will be readable in the wiki)</i>
</p><p><br />
</p>
<pre>##
((region "&lt;origination".."&lt;/unittitle&gt;") 
within ((region did within region archdesc)
not within region dsc));
{exportfile "/l1/release/13/idx/s/samplefa/maintitle.rgn"}; 
 export; ~sync "maintitle";
##
</pre>
<p>copy the line but reverse the order of unittitle and origination
</p>
<pre>##
((region "&lt;unittitle".."&lt;/origination&gt;") 
within ((region did within region archdesc)
not within region dsc));
{exportfile "/l1/release/13/idx/s/samplefa/maintitle.rgn"}; 
export; ~sync "maintitle";
##
</pre>
<p><br />
</p>
<ul><li> make post errors
<ul><li> x
</li><li> y
</li></ul>
</li></ul>
<p>See also 
</p>
<ul><li> <a href="#Customizing_Findaid_Class" title=""> Customizing Findaid Class</a>
</li><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class </a>
</li></ul>
<p><br />
</p><p><br />
</p>
<a name="Linking_from_Finding_Aids_Using_ID_Resolver_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=140" title="Edit section: Linking from Finding Aids Using ID Resolver">edit</a>]</span> <span class="mw-headline"><a href="../Linking_from_Finding_Aids_Using_ID_Resolver.html" title="Linking from Finding Aids Using ID Resolver">Linking from Finding Aids Using ID Resolver</a></span></h2>
<a name="Workshop_Materials_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=141" title="Edit section: Workshop Materials">edit</a>]</span> <span class="mw-headline"><a href="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" class="external text" title="http://www.dlxs.org/training/workshop200707/findaidclass/fcoutline.html" rel="nofollow">Workshop Materials</a></span></h2>
<a name="Working_with_the_User_Interface_2"></a><h2><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=142" title="Edit section: Working with the User Interface">edit</a>]</span> <span class="mw-headline">Working with the User Interface</span></h2>
<p>General user interface customizations, such as changing rendering style (CSS) or making changes to the XSL are covered in <a href="../Customizing_the_User_Interface.html" title="Customizing the User Interface">Customizing the User Interface</a>.  Specific user-interface issues related to Findaid Class are discussed in the following sections:
</p>
<ul><li> <a href="../Customizing_Findaid_Class.html" title="Customizing Findaid Class">Customizing Findaid Class</a>
<ul><li> <a href="../Customizing_Findaid_Class.html#Working_with_the_table_of_contents" title="Customizing Findaid Class">Working with the table of contents</a>
</li></ul>
</li><li> <a href="../Working_with_Fabricated_Regions_in_Findaid_Class.html" title="Working with Fabricated Regions in Findaid Class">Working with Fabricated Regions in Findaid Class</a> 
</li><li> <a href="../Troubleshooting_Finding_Aids.html#Common_Problems_and_Solutions" title="Troubleshooting Finding Aids">Common Problems and Solutions</a>
<ul><li> <a href="../Troubleshooting_Finding_Aids.html#Title_of_Finding_Aid_does_not_show_up" title="Troubleshooting Finding Aids">Title of Finding Aid does not show up</a>
</li></ul>
</li></ul>
<a name="Findaid_Class_Graphics_Files_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=143" title="Edit section: Findaid Class Graphics Files">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Graphics_Files.html" title="Findaid Class Graphics Files">Findaid Class Graphics Files</a></span></h3>
<p>Are there findaid class specific graphics files? The existing html docs actually point to a ../t/text/ directory and it appears that the graphics are generic and not at all specific to findaid class.
</p>
<a name="Findaid_Class_Processing_Instructions_2"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit&amp;section=144" title="Edit section: Findaid Class Processing Instructions">edit</a>]</span> <span class="mw-headline"><a href="../Findaid_Class_Processing_Instructions.html" title="Findaid Class Processing Instructions">Findaid Class Processing Instructions</a></span></h3>
<p>These are some current processing instructions for Finding Aids Class, but the DLXS group will not maintain this section.
</p><p><a href="#top" title="">Top</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 508/1000000
Post-expand include size: 430/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki_dlxsdocs_15:pcache:idhash:315-0!1!0!!en!2 and timestamp 20250202211649 -->
<div class="printfooter">
Retrieved from "<a href="Workshop_working_copy.html">http://localhost/wiki/Mounting_Finding_Aids:_Release_14/Workshop_working_copy</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Workshop_working_copy.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://localhost/mediawiki/index.php?title=Talk:Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="../User_172.20.0.html" title="The user page for the ip you&#039;re editing as [.]" accesskey="." class="new">172.20.0.1</a></li>
				<li id="pt-anontalk"><a href="../User_talk_172.20.0.html" title="Discussion about edits from this ip address [n]" accesskey="n" class="new">Talk for this IP</a></li>
				<li id="pt-anonlogin"><a href="http://localhost/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Mounting_Finding_Aids:_Release_14/Workshop_working_copy" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../../dlxs15/uploads/DLXS_logo2.gif);" href="../Main_Page.html" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="../Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a href="../DLXS_Documentation_Community_Portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="../DLXS_Documentation_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="../Mounting_a_Bib_Class_Collection.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="../Help_Contents.html" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://localhost/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search DLXS Documentation [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/Mounting_Finding_Aids__Release_14/Workshop_working_copy.html" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/Mounting_Finding_Aids__Release_14/Workshop_working_copy.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="../Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://localhost/mediawiki/index.php?title=Mounting_Finding_Aids:_Release_14/Workshop_working_copy&amp;oldid=2393" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 23 July 2008, at 13:38.</li>
				<li id="viewcount">This page has been accessed 20,357 times.</li>
				<li id="privacy"><a href="../DLXS_Documentation_Privacy_policy.html" title="DLXS Documentation:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="../DLXS_Documentation_About.html" title="DLXS Documentation:About">About DLXS Documentation</a></li>
				<li id="disclaimer"><a href="../DLXS_Documentation_General_disclaimer.html" title="DLXS Documentation:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.117 secs. --></body>
<!-- Mirrored from localhost/wiki/Mounting_Finding_Aids:_Release_14/Workshop_working_copy by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:34:25 GMT -->
</html>
