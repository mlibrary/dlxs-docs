<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from localhost/wiki/Working_with_XML_%26_XSLT by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:27:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.13.5" />
		<meta name="keywords" content="Working with XML &amp; XSLT,DLXS Wiki,Data Conversion and Preparation,XML/XSLT Frequently Asked Questions" />
		<link rel="shortcut icon" href="http://localhost/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="http://localhost/mediawiki/opensearch_desc.php" title="DLXS Documentation (en)" />
		<link rel="alternate" type="application/rss+xml" title="DLXS Documentation RSS Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="DLXS Documentation Atom Feed" href="http://localhost/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Working with XML &amp; XSLT - DLXS Documentation</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "../mediawiki/skins/common/sharedfa7c.css?164";
			@import "../mediawiki/skins/monobook/mainfa7c.css?164";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="../mediawiki/skins/common/commonPrintfa7c.css?164" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE50Fixes.css?164";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/mediawiki/skins/monobook/IE55Fixes.css?164";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/mediawiki/skins/monobook/IE60Fixes.css?164";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/mediawiki/skins/monobook/IE70Fixes.css?164";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/mediawiki/skins/common/IEFixes.js?164"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/mediawiki/skins";
var wgArticlePath = "/wiki/$1";
var wgScriptPath = "/mediawiki";
var wgScript = "http://localhost/mediawiki/index.php";
var wgVariantArticlePath = false;
var wgActionPaths = [];
var wgServer = "http://localhost/";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Working_with_XML_\x26_XSLT";
var wgTitle = "Working with XML \x26 XSLT";
var wgAction = "view";
var wgArticleId = "13";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "2650";
var wgVersion = "1.13.5";
var wgEnableAPI = true;
var wgEnableWriteAPI = false;
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
/*]]>*/</script>
                
		<script type="text/javascript" src="../mediawiki/skins/common/wikibitsfa7c.js?164"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="../mediawiki/skins/common/ajaxfa7c.js?164"></script>
		<script type="text/javascript" src="http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;action=raw&amp;ctype=text/css&amp;smaxage=18000";
@import "http://localhost/mediawiki/index.php?title=-&amp;action=raw&amp;gen=css&amp;maxage=18000&amp;useskin=monobook";
/*]]>*/</style>
	</head>
<body class="mediawiki ns-0 ltr page-Working_with_XML_XSLT">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading">Working with XML &amp; XSLT</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From DLXS Documentation</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<p><a href="DLXS_Wiki.html" title="DLXS Wiki">Main Page</a> &gt; <a href="Data_Conversion_and_Preparation.html" title="Data Conversion and Preparation">Data Conversion and Preparation</a> &gt; Working with XML &amp; XSLT
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#General_Principles_and_Rules_of_Thumb"><span class="tocnumber">1</span> <span class="toctext">General Principles and Rules of Thumb</span></a></li>
<li class="toclevel-1"><a href="#Some_notes_about_internal_changes"><span class="tocnumber">2</span> <span class="toctext">Some notes about internal changes</span></a></li>
<li class="toclevel-1"><a href="#Working_with_XML_and_XSL_in_DLXS"><span class="tocnumber">3</span> <span class="toctext">Working with XML and XSL in DLXS</span></a></li>
<li class="toclevel-1"><a href="#Data_migration_issues"><span class="tocnumber">4</span> <span class="toctext">Data migration issues</span></a>
<ul>
<li class="toclevel-2"><a href="#collmgr_entries"><span class="tocnumber">4.1</span> <span class="toctext">collmgr entries</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Implications_for_users"><span class="tocnumber">5</span> <span class="toctext">Implications for users</span></a></li>
<li class="toclevel-1"><a href="#XML.2FXSLT_Frequently_Asked_Questions"><span class="tocnumber">6</span> <span class="toctext">XML/XSLT Frequently Asked Questions</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="General_Principles_and_Rules_of_Thumb"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=1" title="Edit section: General Principles and Rules of Thumb">edit</a>]</span> <span class="mw-headline">General Principles and Rules of Thumb</span></h3>
<p>In re-architecting the DLXS system to use XML and XSL, UM established certain principles. These guide the writing of code, the creation of XML, and the writing of XSL in most cases. We have only broken the rules when there are good reasons to do so. Here is a list of some of the rules we created and their respective rationales:
</p>
<table border="1" cellpadding="20" cellspacing="0">
<tr>
<th>Principle
</th><th>Rationale
</th></tr>
<tr>
<td>PIs are wrapped in the XML files with an XML element</td><td>The XSL templates, at least at the highest levels of the XML tree, can expect tags that are explicit in the XML file.
</td></tr>
<tr>
<td>XSL files to be used are listed in the XML file rather than using the more conventional &lt;?xml-stylesheet&nbsp;?&gt; PI</td><td>The building of a virtual stylesheet from the listed XSL files, allows those XSL files to be arrived at through fallback
</td></tr>
<tr>
<td>All URLs to be used by the CGI are built by the CGI</td><td>The XSL stylesheets should not have to "know" anything about what URL parameters are needed for the CGI to work
</td></tr>
<tr>
<td>Cookie rather than URL parameter holds session IDs</td><td>This allows for dynamic browsing (no longer need .tpl files to be built for browsing); allows one session even if a user switches from one class to another; cookie can be deleted with browser is quit; etc
</td></tr>
<tr>
<td>Filtering of XML data is done by the XSL stylesheets</td><td>Separation of content and display, of perl code and user interface
</td></tr></table>
<p>Most of the principles are really about division of labor between the different subsystems of DLXS.
</p><p>There are rare exceptions to some of these principles. For example, data that comes from XPat is not always well-formed and needs to be "massaged" into well-formed-ness. Here are several instances where this occurs:
</p>
<ul><li>Query "hits", aka keywords in context (KWICs) are snippets of text that come from the data. In earlier releases of DLXS, KWICs had all tags removed before being displayed. In Release 12a, while we still strip off beginning and ending "half tags" (where an open or close tag is incomplete because of where the snippet starts or ends, we now run the snippet through <b>DlpsUtils::Twigify</b> which will balance all existing tags and therefore result in a well-formed "twig" of XML. This allows for the situation where collection-specific mark up, left in tact as much as possible is handled downstream by a collection-specific XSL stylesheet.
</li></ul>
<ul><li>In Text Class, when nested DIVs are collected from XPat, divheads are retrieved. In many cases, divheads need to be twigified as well. Moreover, they and their child DIVs' heads and KWICs need to be properly wrapped with closing DIV tags so that it is well-formed XML and so that the XSL templates can match them all properly. The proper nesting of DIVs and divheads and so forth is done in the CGI. Other than nesting, the CGI no longer does any filtering on DIVs or divheads.
</li></ul>
<ul><li>When Text Class data retrieved from XPat contains PB or FIGURE tags, or when in Findaid Class, daos are retrieved, some CGI manipulation is necessary. For example, an href for a Finding Aid's dao may need to be resolved by the CGI. That href then needs to be communicated to the XSL for proper link-building. In Findaid Class, the dao element is modified in its href attribute, so that the XSL can build a proper link.
</li></ul>
<a name="Some_notes_about_internal_changes"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=2" title="Edit section: Some notes about internal changes">edit</a>]</span> <span class="mw-headline">Some notes about internal changes</span></h3>
<p>Quite a lot of changes in the middleware and supporting systems were necessary in the move to XML. Some examples:
</p>
<ul><li>the XPat.pm module now does some conversion, if necessary, to results retrieved from XPat-indexed data in case the data stored is SGML and not XML. In order for the rest of the middleware to properly handle the data, it must be XML. So, SGML singleton tags are converted to XML singleton tags (with a trailing /).
</li></ul>
<ul><li>the dlxs database in MySQL has been changed so that data is stored UTF-8-encoded and retrieved as UTF-8
</li></ul>
<ul><li>a file in $DLXSROOT/misc/sgml called entitiesdoctype.chnk is delivered. It is a DOCTYPE declaration that can optionally be "chunked in" via a CHUNK processing instruction, [link UI] as an internal subset if need be. It can be used if data is not yet converted to XML and still has a number of character entity references. This allows the XML parser to proceed as if the data were XML with all non-XML character entity references converted.
</li></ul>
<ul><li>The DlpsUtils::Twigify subroutine was written to convert snippets of, possibly broken, XML into well-formed XML by removing tags that have been truncated (as in "KWICs" returned in XPat queries) and by closing open tags and opening closed ones, in order to arrive at a well-formed XML "twig".
</li></ul>
<a name="Working_with_XML_and_XSL_in_DLXS"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=3" title="Edit section: Working with XML and XSL in DLXS">edit</a>]</span> <span class="mw-headline">Working with XML and XSL in DLXS</span></h3>
<p>Working with an XML file that has not had its dynamic content filled in yet or a <i>virtual</i> XSL stylesheet can be difficult. That is where three new debug values come in handy. To see the XML file, with all its dynamic content filled in, that the CGI will send to be processed by the XSLT transformation engine, add debug=xml to the URL. The CGI will fill in all the PIs and then send the untransformed block of XML to the browser. If you use a browser that can display untransformed XML, you will see the content and the form of the XML data. You can also use the browser's view source to get untransformed XML and view it or save it to a file for debugging purposes
</p><p>Since the virtual stylesheet is created only at run time by importing a number of XSLT files, each of which is likely to have been gotten via fallback, the best way to see the full paths of the files which are being imported and used is to add debug=xslt to the URL. The contents of the virtual stylesheet will be delivered to the browser as XML. If need be, you can copy the source and paste it into an XSLT processor or debugger.
</p><p>Description of xsltwrite command goes here: add debug=xsltwrite to the URL.
</p><p>Here at DLPS, we use a variety of tools for editing and debugging XML and XSL, everything from Oxygen to Dreamweaver to xemacs to Saxon to XMLSpy. The debug switches allow us to get at what's inside the CGI code as it runs.
</p>
<a name="Data_migration_issues"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=4" title="Edit section: Data migration issues">edit</a>]</span> <span class="mw-headline">Data migration issues</span></h3>
<p><b>Data conversion</b>
</p><p>See <a href="Data_Conversion_and_Preparation.html#Unicode.2C_XML_and_Normalization" title="Data Conversion and Preparation">Data Conversion and Preparation: Unicode, XML and Normalization.</a>
</p><p><b>Writing your own XSL to customize your collections' look and feel</b>
</p><p>There is no easy way to convert the HTML templates from previous releases of DLXS into XSL. Your best course of action will likely be to start with the XSL files that are delivered with Release 12a. Then, for any collection that needs a specfic look, behavior, or filtering into HTML, copy, place in the collection subdirectory, and modify only those XSL files or templates that you need to modify.
</p>
<a name="collmgr_entries"></a><h4><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=5" title="Edit section: collmgr entries">edit</a>]</span> <span class="mw-headline">collmgr entries</span></h4>
<p>The dlxs database has been changed to store and retrieve UTF-8 encoded strings in its tables. Therefore, when entering data into collmgr fields, be sure to enter proper UTF-8. This can include the actual character, if you have the ability to enter things directly through an alternate keyboard mapping; a hexadecimal entity; or a decimal entity (though hex may be the best choice).
</p>
<a name="Implications_for_users"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=6" title="Edit section: Implications for users">edit</a>]</span> <span class="mw-headline">Implications for users</span></h3>
<p>You may receive a variety of questions from users, some of which may be difficult to track down. We are still learning ourselves about the vagaries of how different platforms, browsers, etc. handle UTF-8. For example, if a user copies Latin 1 data from a web page or application and pastes it into a UTF-8 web form on a DLXS search page, will their applications and operating system properly transcode the pasted data into UTF-8? Will the data that is received by the CGI be UTF-8 or will it be improperly encoded? Will older browsers or operating systems have the fonts available to display the languages you can now index and include in your collections? We've also learned that different browsers handle character interpretation issues differently, with everything from the classic Mac empty box to a triangle with a question mark to offering up what "seems" to be the right choice (inevitably Chinese). The move to cookies for tracking sessions also means that the problems with users who refuse all cookies are now an issue for DLXS, as it has been for other products in the library world for some time.
</p>
<a name="XML.2FXSLT_Frequently_Asked_Questions"></a><h3><span class="editsection">[<a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit&amp;section=7" title="Edit section: XML/XSLT Frequently Asked Questions">edit</a>]</span> <span class="mw-headline"><a href="XML/XSLT_Frequently_Asked_Questions.html" title="XML/XSLT Frequently Asked Questions">XML/XSLT Frequently Asked Questions</a></span></h3>
<p><a href="#top" title="">Top</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 8/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mediawiki_dlxsdocs_15:pcache:idhash:13-0!1!0!!en!2 and timestamp 20250202211351 -->
<div class="printfooter">
Retrieved from "<a href="Working_with_XML_%26_XSLT.html">http://localhost/wiki/Working_with_XML_%26_XSLT</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Working_with_XML_%26_XSLT.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="http://localhost/mediawiki/index.php?title=Talk:Working_with_XML_%26_XSLT&amp;action=edit" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving. [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;action=history" title="Past versions of this page. [h]" accesskey="h">History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://localhost/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Working_with_XML_%26_XSLT" title="You are encouraged to log in, it is not mandatory however. [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(../dlxs15/uploads/DLXS_logo2.gif);" href="Main_Page.html" title="Visit the Main Page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="Main_Page.html">Main Page</a></li>
				<li id="n-portal"><a href="DLXS_Documentation_Community_Portal.html" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="DLXS_Documentation_Current_events.html" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html" title="The list of recent changes in the wiki. [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="Mounting_a_Bib_Class_Collection.html" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="Help_Contents.html" title="The place to find out.">Help</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://localhost/wiki/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search DLXS Documentation [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Working_with_XML_%26_XSLT.html" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Working_with_XML_%26_XSLT.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://localhost/mediawiki/index.php?title=Working_with_XML_%26_XSLT&amp;oldid=2650" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified on 12 August 2008, at 17:16.</li>
				<li id="viewcount">This page has been accessed 3,311 times.</li>
				<li id="privacy"><a href="DLXS_Documentation_Privacy_policy.html" title="DLXS Documentation:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="DLXS_Documentation_About.html" title="DLXS Documentation:About">About DLXS Documentation</a></li>
				<li id="disclaimer"><a href="DLXS_Documentation_General_disclaimer.html" title="DLXS Documentation:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.121 secs. --></body>
<!-- Mirrored from localhost/wiki/Working_with_XML_%26_XSLT by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2025 00:27:31 GMT -->
</html>
